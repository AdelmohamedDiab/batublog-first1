(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function xl(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ke={},gs=[],fn=()=>{},vp=()=>!1,Aa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ml=t=>t.startsWith("onUpdate:"),Je=Object.assign,Ll=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Hy=Object.prototype.hasOwnProperty,be=(t,e)=>Hy.call(t,e),se=Array.isArray,_s=t=>to(t)==="[object Map]",Us=t=>to(t)==="[object Set]",Uh=t=>to(t)==="[object Date]",he=t=>typeof t=="function",qe=t=>typeof t=="string",vn=t=>typeof t=="symbol",Pe=t=>t!==null&&typeof t=="object",Tp=t=>(Pe(t)||he(t))&&he(t.then)&&he(t.catch),Ip=Object.prototype.toString,to=t=>Ip.call(t),Wy=t=>to(t).slice(8,-1),wp=t=>to(t)==="[object Object]",Fl=t=>qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,vi=xl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ra=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Gy=/-\w/g,qt=Ra(t=>t.replace(Gy,e=>e.slice(1).toUpperCase())),Ky=/\B([A-Z])/g,Yr=Ra(t=>t.replace(Ky,"-$1").toLowerCase()),ba=Ra(t=>t.charAt(0).toUpperCase()+t.slice(1)),yc=Ra(t=>t?`on${ba(t)}`:""),lr=(t,e)=>!Object.is(t,e),Lo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Ap=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Sa=t=>{const e=parseFloat(t);return isNaN(e)?t:e},zy=t=>{const e=qe(t)?Number(t):NaN;return isNaN(e)?t:e};let Bh;const Ca=()=>Bh||(Bh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ul(t){if(se(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=qe(r)?Xy(r):Ul(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(qe(t)||Pe(t))return t}const Qy=/;(?![^(]*\))/g,Jy=/:([^]+)/,Yy=/\/\*[^]*?\*\//g;function Xy(t){const e={};return t.replace(Yy,"").split(Qy).forEach(n=>{if(n){const r=n.split(Jy);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Bl(t){let e="";if(qe(t))e=t;else if(se(t))for(let n=0;n<t.length;n++){const r=Bl(t[n]);r&&(e+=r+" ")}else if(Pe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Zy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eE=xl(Zy);function Rp(t){return!!t||t===""}function tE(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Hr(t[r],e[r]);return n}function Hr(t,e){if(t===e)return!0;let n=Uh(t),r=Uh(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=vn(t),r=vn(e),n||r)return t===e;if(n=se(t),r=se(e),n||r)return n&&r?tE(t,e):!1;if(n=Pe(t),r=Pe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const c=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(c&&!l||!c&&l||!Hr(t[o],e[o]))return!1}}return String(t)===String(e)}function jl(t,e){return t.findIndex(n=>Hr(n,e))}const bp=t=>!!(t&&t.__v_isRef===!0),un=t=>qe(t)?t:t==null?"":se(t)||Pe(t)&&(t.toString===Ip||!he(t.toString))?bp(t)?un(t.value):JSON.stringify(t,Sp,2):String(t),Sp=(t,e)=>bp(e)?Sp(t,e.value):_s(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Ec(r,i)+" =>"]=s,n),{})}:Us(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ec(n))}:vn(e)?Ec(e):Pe(e)&&!se(e)&&!wp(e)?String(e):e,Ec=(t,e="")=>{var n;return vn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let At;class nE{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=At,!e&&At&&(this.index=(At.scopes||(At.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=At;try{return At=this,e()}finally{At=n}}}on(){++this._on===1&&(this.prevScope=At,At=this)}off(){this._on>0&&--this._on===0&&(At=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function rE(){return At}let Ve;const vc=new WeakSet;class Cp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,At&&At.active&&At.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,vc.has(this)&&(vc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Np(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jh(this),kp(this);const e=Ve,n=Qt;Ve=this,Qt=!0;try{return this.fn()}finally{Vp(this),Ve=e,Qt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Hl(e);this.deps=this.depsTail=void 0,jh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?vc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Kc(this)&&this.run()}get dirty(){return Kc(this)}}let Pp=0,Ti,Ii;function Np(t,e=!1){if(t.flags|=8,e){t.next=Ii,Ii=t;return}t.next=Ti,Ti=t}function ql(){Pp++}function $l(){if(--Pp>0)return;if(Ii){let e=Ii;for(Ii=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ti;){let e=Ti;for(Ti=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function kp(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Vp(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Hl(r),sE(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Kc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Dp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Dp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Oi)||(t.globalVersion=Oi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Kc(t))))return;t.flags|=2;const e=t.dep,n=Ve,r=Qt;Ve=t,Qt=!0;try{kp(t);const s=t.fn(t._value);(e.version===0||lr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ve=n,Qt=r,Vp(t),t.flags&=-3}}function Hl(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Hl(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function sE(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Qt=!0;const Op=[];function xn(){Op.push(Qt),Qt=!1}function Mn(){const t=Op.pop();Qt=t===void 0?!0:t}function jh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ve;Ve=void 0;try{e()}finally{Ve=n}}}let Oi=0;class iE{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Wl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ve||!Qt||Ve===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ve)n=this.activeLink=new iE(Ve,this),Ve.deps?(n.prevDep=Ve.depsTail,Ve.depsTail.nextDep=n,Ve.depsTail=n):Ve.deps=Ve.depsTail=n,xp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ve.depsTail,n.nextDep=void 0,Ve.depsTail.nextDep=n,Ve.depsTail=n,Ve.deps===n&&(Ve.deps=r)}return n}trigger(e){this.version++,Oi++,this.notify(e)}notify(e){ql();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{$l()}}}function xp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)xp(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const zc=new WeakMap,Br=Symbol(""),Qc=Symbol(""),xi=Symbol("");function ht(t,e,n){if(Qt&&Ve){let r=zc.get(t);r||zc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Wl),s.map=r,s.key=n),s.track()}}function Cn(t,e,n,r,s,i){const o=zc.get(t);if(!o){Oi++;return}const c=l=>{l&&l.trigger()};if(ql(),e==="clear")o.forEach(c);else{const l=se(t),u=l&&Fl(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,m)=>{(m==="length"||m===xi||!vn(m)&&m>=f)&&c(p)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(xi)),e){case"add":l?u&&c(o.get("length")):(c(o.get(Br)),_s(t)&&c(o.get(Qc)));break;case"delete":l||(c(o.get(Br)),_s(t)&&c(o.get(Qc)));break;case"set":_s(t)&&c(o.get(Br));break}}$l()}function cs(t){const e=we(t);return e===t?e:(ht(e,"iterate",xi),Bt(t)?e:e.map(Yt))}function Pa(t){return ht(t=we(t),"iterate",xi),t}function Zn(t,e){return Ln(t)?Cs(jr(t)?Yt(e):e):Yt(e)}const oE={__proto__:null,[Symbol.iterator](){return Tc(this,Symbol.iterator,t=>Zn(this,t))},concat(...t){return cs(this).concat(...t.map(e=>se(e)?cs(e):e))},entries(){return Tc(this,"entries",t=>(t[1]=Zn(this,t[1]),t))},every(t,e){return wn(this,"every",t,e,void 0,arguments)},filter(t,e){return wn(this,"filter",t,e,n=>n.map(r=>Zn(this,r)),arguments)},find(t,e){return wn(this,"find",t,e,n=>Zn(this,n),arguments)},findIndex(t,e){return wn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return wn(this,"findLast",t,e,n=>Zn(this,n),arguments)},findLastIndex(t,e){return wn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return wn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ic(this,"includes",t)},indexOf(...t){return Ic(this,"indexOf",t)},join(t){return cs(this).join(t)},lastIndexOf(...t){return Ic(this,"lastIndexOf",t)},map(t,e){return wn(this,"map",t,e,void 0,arguments)},pop(){return li(this,"pop")},push(...t){return li(this,"push",t)},reduce(t,...e){return qh(this,"reduce",t,e)},reduceRight(t,...e){return qh(this,"reduceRight",t,e)},shift(){return li(this,"shift")},some(t,e){return wn(this,"some",t,e,void 0,arguments)},splice(...t){return li(this,"splice",t)},toReversed(){return cs(this).toReversed()},toSorted(t){return cs(this).toSorted(t)},toSpliced(...t){return cs(this).toSpliced(...t)},unshift(...t){return li(this,"unshift",t)},values(){return Tc(this,"values",t=>Zn(this,t))}};function Tc(t,e,n){const r=Pa(t),s=r[e]();return r!==t&&!Bt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const aE=Array.prototype;function wn(t,e,n,r,s,i){const o=Pa(t),c=o!==t&&!Bt(t),l=o[e];if(l!==aE[e]){const p=l.apply(t,i);return c?Yt(p):p}let u=n;o!==t&&(c?u=function(p,m){return n.call(this,Zn(t,p),m,t)}:n.length>2&&(u=function(p,m){return n.call(this,p,m,t)}));const f=l.call(o,u,r);return c&&s?s(f):f}function qh(t,e,n,r){const s=Pa(t);let i=n;return s!==t&&(Bt(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,Zn(t,c),l,t)}),s[e](i,...r)}function Ic(t,e,n){const r=we(t);ht(r,"iterate",xi);const s=r[e](...n);return(s===-1||s===!1)&&zl(n[0])?(n[0]=we(n[0]),r[e](...n)):s}function li(t,e,n=[]){xn(),ql();const r=we(t)[e].apply(t,n);return $l(),Mn(),r}const cE=xl("__proto__,__v_isRef,__isVue"),Mp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(vn));function lE(t){vn(t)||(t=String(t));const e=we(this);return ht(e,"has",t),e.hasOwnProperty(t)}class Lp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?EE:jp:i?Bp:Up).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=se(e);if(!s){let l;if(o&&(l=oE[n]))return l;if(n==="hasOwnProperty")return lE}const c=Reflect.get(e,n,pt(e)?e:r);if((vn(n)?Mp.has(n):cE(n))||(s||ht(e,"get",n),i))return c;if(pt(c)){const l=o&&Fl(n)?c:c.value;return s&&Pe(l)?Yc(l):l}return Pe(c)?s?Yc(c):Na(c):c}}class Fp extends Lp{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=se(e)&&Fl(n);if(!this._isShallow){const u=Ln(i);if(!Bt(r)&&!Ln(r)&&(i=we(i),r=we(r)),!o&&pt(i)&&!pt(r))return u||(i.value=r),!0}const c=o?Number(n)<e.length:be(e,n),l=Reflect.set(e,n,r,pt(e)?e:s);return e===we(s)&&(c?lr(r,i)&&Cn(e,"set",n,r):Cn(e,"add",n,r)),l}deleteProperty(e,n){const r=be(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Cn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!vn(n)||!Mp.has(n))&&ht(e,"has",n),r}ownKeys(e){return ht(e,"iterate",se(e)?"length":Br),Reflect.ownKeys(e)}}class uE extends Lp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const hE=new Fp,fE=new uE,dE=new Fp(!0);const Jc=t=>t,bo=t=>Reflect.getPrototypeOf(t);function pE(t,e,n){return function(...r){const s=this.__v_raw,i=we(s),o=_s(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),f=n?Jc:e?Cs:Yt;return!e&&ht(i,"iterate",l?Qc:Br),Je(Object.create(u),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:c?[f(p[0]),f(p[1])]:f(p),done:m}}})}}function So(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function mE(t,e){const n={get(s){const i=this.__v_raw,o=we(i),c=we(s);t||(lr(s,c)&&ht(o,"get",s),ht(o,"get",c));const{has:l}=bo(o),u=e?Jc:t?Cs:Yt;if(l.call(o,s))return u(i.get(s));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&ht(we(s),"iterate",Br),s.size},has(s){const i=this.__v_raw,o=we(i),c=we(s);return t||(lr(s,c)&&ht(o,"has",s),ht(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=we(c),u=e?Jc:t?Cs:Yt;return!t&&ht(l,"iterate",Br),c.forEach((f,p)=>s.call(i,u(f),u(p),o))}};return Je(n,t?{add:So("add"),set:So("set"),delete:So("delete"),clear:So("clear")}:{add(s){!e&&!Bt(s)&&!Ln(s)&&(s=we(s));const i=we(this);return bo(i).has.call(i,s)||(i.add(s),Cn(i,"add",s,s)),this},set(s,i){!e&&!Bt(i)&&!Ln(i)&&(i=we(i));const o=we(this),{has:c,get:l}=bo(o);let u=c.call(o,s);u||(s=we(s),u=c.call(o,s));const f=l.call(o,s);return o.set(s,i),u?lr(i,f)&&Cn(o,"set",s,i):Cn(o,"add",s,i),this},delete(s){const i=we(this),{has:o,get:c}=bo(i);let l=o.call(i,s);l||(s=we(s),l=o.call(i,s)),c&&c.call(i,s);const u=i.delete(s);return l&&Cn(i,"delete",s,void 0),u},clear(){const s=we(this),i=s.size!==0,o=s.clear();return i&&Cn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=pE(s,t,e)}),n}function Gl(t,e){const n=mE(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(be(n,s)&&s in r?n:r,s,i)}const gE={get:Gl(!1,!1)},_E={get:Gl(!1,!0)},yE={get:Gl(!0,!1)};const Up=new WeakMap,Bp=new WeakMap,jp=new WeakMap,EE=new WeakMap;function vE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function TE(t){return t.__v_skip||!Object.isExtensible(t)?0:vE(Wy(t))}function Na(t){return Ln(t)?t:Kl(t,!1,hE,gE,Up)}function qp(t){return Kl(t,!1,dE,_E,Bp)}function Yc(t){return Kl(t,!0,fE,yE,jp)}function Kl(t,e,n,r,s){if(!Pe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=TE(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function jr(t){return Ln(t)?jr(t.__v_raw):!!(t&&t.__v_isReactive)}function Ln(t){return!!(t&&t.__v_isReadonly)}function Bt(t){return!!(t&&t.__v_isShallow)}function zl(t){return t?!!t.__v_raw:!1}function we(t){const e=t&&t.__v_raw;return e?we(e):t}function IE(t){return!be(t,"__v_skip")&&Object.isExtensible(t)&&Ap(t,"__v_skip",!0),t}const Yt=t=>Pe(t)?Na(t):t,Cs=t=>Pe(t)?Yc(t):t;function pt(t){return t?t.__v_isRef===!0:!1}function Et(t){return $p(t,!1)}function wE(t){return $p(t,!0)}function $p(t,e){return pt(t)?t:new AE(t,e)}class AE{constructor(e,n){this.dep=new Wl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:we(e),this._value=n?e:Yt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Bt(e)||Ln(e);e=r?e:we(e),lr(e,n)&&(this._rawValue=e,this._value=r?e:Yt(e),this.dep.trigger())}}function ur(t){return pt(t)?t.value:t}const RE={get:(t,e,n)=>e==="__v_raw"?t:ur(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return pt(s)&&!pt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Hp(t){return jr(t)?t:new Proxy(t,RE)}class bE{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Wl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Oi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ve!==this)return Np(this,!0),!0}get value(){const e=this.dep.track();return Dp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function SE(t,e,n=!1){let r,s;return he(t)?r=t:(r=t.get,s=t.set),new bE(r,s,n)}const Co={},Xo=new WeakMap;let xr;function CE(t,e=!1,n=xr){if(n){let r=Xo.get(n);r||Xo.set(n,r=[]),r.push(t)}}function PE(t,e,n=ke){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,u=G=>s?G:Bt(G)||s===!1||s===0?Pn(G,1):Pn(G);let f,p,m,v,P=!1,k=!1;if(pt(t)?(p=()=>t.value,P=Bt(t)):jr(t)?(p=()=>u(t),P=!0):se(t)?(k=!0,P=t.some(G=>jr(G)||Bt(G)),p=()=>t.map(G=>{if(pt(G))return G.value;if(jr(G))return u(G);if(he(G))return l?l(G,2):G()})):he(t)?e?p=l?()=>l(t,2):t:p=()=>{if(m){xn();try{m()}finally{Mn()}}const G=xr;xr=f;try{return l?l(t,3,[v]):t(v)}finally{xr=G}}:p=fn,e&&s){const G=p,ce=s===!0?1/0:s;p=()=>Pn(G(),ce)}const F=rE(),$=()=>{f.stop(),F&&F.active&&Ll(F.effects,f)};if(i&&e){const G=e;e=(...ce)=>{G(...ce),$()}}let j=k?new Array(t.length).fill(Co):Co;const H=G=>{if(!(!(f.flags&1)||!f.dirty&&!G))if(e){const ce=f.run();if(s||P||(k?ce.some((le,R)=>lr(le,j[R])):lr(ce,j))){m&&m();const le=xr;xr=f;try{const R=[ce,j===Co?void 0:k&&j[0]===Co?[]:j,v];j=ce,l?l(e,3,R):e(...R)}finally{xr=le}}}else f.run()};return c&&c(H),f=new Cp(p),f.scheduler=o?()=>o(H,!1):H,v=G=>CE(G,!1,f),m=f.onStop=()=>{const G=Xo.get(f);if(G){if(l)l(G,4);else for(const ce of G)ce();Xo.delete(f)}},e?r?H(!0):j=f.run():o?o(H.bind(null,!0),!0):f.run(),$.pause=f.pause.bind(f),$.resume=f.resume.bind(f),$.stop=$,$}function Pn(t,e=1/0,n){if(e<=0||!Pe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,pt(t))Pn(t.value,e,n);else if(se(t))for(let r=0;r<t.length;r++)Pn(t[r],e,n);else if(Us(t)||_s(t))t.forEach(r=>{Pn(r,e,n)});else if(wp(t)){for(const r in t)Pn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Pn(t[r],e,n)}return t}function no(t,e,n,r){try{return r?t(...r):t()}catch(s){ka(s,e,n)}}function Xt(t,e,n,r){if(he(t)){const s=no(t,e,n,r);return s&&Tp(s)&&s.catch(i=>{ka(i,e,n)}),s}if(se(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Xt(t[i],e,n,r));return s}}function ka(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ke;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,u)===!1)return}c=c.parent}if(i){xn(),no(i,null,10,[t,l,u]),Mn();return}}NE(t,n,s,r,o)}function NE(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const vt=[];let an=-1;const ys=[];let er=null,ls=0;const Wp=Promise.resolve();let Zo=null;function Ql(t){const e=Zo||Wp;return t?e.then(this?t.bind(this):t):e}function kE(t){let e=an+1,n=vt.length;for(;e<n;){const r=e+n>>>1,s=vt[r],i=Mi(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Jl(t){if(!(t.flags&1)){const e=Mi(t),n=vt[vt.length-1];!n||!(t.flags&2)&&e>=Mi(n)?vt.push(t):vt.splice(kE(e),0,t),t.flags|=1,Gp()}}function Gp(){Zo||(Zo=Wp.then(zp))}function VE(t){se(t)?ys.push(...t):er&&t.id===-1?er.splice(ls+1,0,t):t.flags&1||(ys.push(t),t.flags|=1),Gp()}function $h(t,e,n=an+1){for(;n<vt.length;n++){const r=vt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;vt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Kp(t){if(ys.length){const e=[...new Set(ys)].sort((n,r)=>Mi(n)-Mi(r));if(ys.length=0,er){er.push(...e);return}for(er=e,ls=0;ls<er.length;ls++){const n=er[ls];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}er=null,ls=0}}const Mi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function zp(t){try{for(an=0;an<vt.length;an++){const e=vt[an];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),no(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;an<vt.length;an++){const e=vt[an];e&&(e.flags&=-2)}an=-1,vt.length=0,Kp(),Zo=null,(vt.length||ys.length)&&zp()}}let Dt=null,Qp=null;function ea(t){const e=Dt;return Dt=t,Qp=t&&t.type.__scopeId||null,e}function Yl(t,e=Dt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&ra(-1);const i=ea(e);let o;try{o=t(...s)}finally{ea(i),r._d&&ra(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function kn(t,e){if(Dt===null)return t;const n=Ma(Dt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=ke]=e[s];i&&(he(i)&&(i={mounted:i,updated:i}),i.deep&&Pn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function kr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(xn(),Xt(l,n,8,[t.el,c,t,e]),Mn())}}function Fo(t,e){if(dt){let n=dt.provides;const r=dt.parent&&dt.parent.provides;r===n&&(n=dt.provides=Object.create(r)),n[t]=e}}function dn(t,e,n=!1){const r=Cm();if(r||Es){let s=Es?Es._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&he(e)?e.call(r&&r.proxy):e}}const DE=Symbol.for("v-scx"),OE=()=>dn(DE);function Uo(t,e,n){return Jp(t,e,n)}function Jp(t,e,n=ke){const{immediate:r,deep:s,flush:i,once:o}=n,c=Je({},n),l=e&&r||!e&&i!=="post";let u;if(Bi){if(i==="sync"){const v=OE();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!l){const v=()=>{};return v.stop=fn,v.resume=fn,v.pause=fn,v}}const f=dt;c.call=(v,P,k)=>Xt(v,f,P,k);let p=!1;i==="post"?c.scheduler=v=>{Vt(v,f&&f.suspense)}:i!=="sync"&&(p=!0,c.scheduler=(v,P)=>{P?v():Jl(v)}),c.augmentJob=v=>{e&&(v.flags|=4),p&&(v.flags|=2,f&&(v.id=f.uid,v.i=f))};const m=PE(t,e,c);return Bi&&(u?u.push(m):l&&m()),m}function xE(t,e,n){const r=this.proxy,s=qe(t)?t.includes(".")?Yp(r,t):()=>r[t]:t.bind(r,r);let i;he(e)?i=e:(i=e.handler,n=e);const o=ro(this),c=Jp(s,i.bind(r),n);return o(),c}function Yp(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const ME=Symbol("_vte"),Xp=t=>t.__isTeleport,Sn=Symbol("_leaveCb"),Po=Symbol("_enterCb");function LE(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xl(()=>{t.isMounted=!0}),am(()=>{t.isUnmounting=!0}),t}const xt=[Function,Array],Zp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:xt,onEnter:xt,onAfterEnter:xt,onEnterCancelled:xt,onBeforeLeave:xt,onLeave:xt,onAfterLeave:xt,onLeaveCancelled:xt,onBeforeAppear:xt,onAppear:xt,onAfterAppear:xt,onAppearCancelled:xt},em=t=>{const e=t.subTree;return e.component?em(e.component):e},FE={name:"BaseTransition",props:Zp,setup(t,{slots:e}){const n=Cm(),r=LE();return()=>{const s=e.default&&rm(e.default(),!0);if(!s||!s.length)return;const i=tm(s),o=we(t),{mode:c}=o;if(r.isLeaving)return wc(i);const l=Hh(i);if(!l)return wc(i);let u=Xc(l,o,r,n,p=>u=p);l.type!==Tt&&Li(l,u);let f=n.subTree&&Hh(n.subTree);if(f&&f.type!==Tt&&!Lr(f,l)&&em(n).type!==Tt){let p=Xc(f,o,r,n);if(Li(f,p),c==="out-in"&&l.type!==Tt)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,f=void 0},wc(i);c==="in-out"&&l.type!==Tt?p.delayLeave=(m,v,P)=>{const k=nm(r,f);k[String(f.key)]=f,m[Sn]=()=>{v(),m[Sn]=void 0,delete u.delayedLeave,f=void 0},u.delayedLeave=()=>{P(),delete u.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return i}}};function tm(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Tt){e=n;break}}return e}const UE=FE;function nm(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Xc(t,e,n,r,s){const{appear:i,mode:o,persisted:c=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:m,onLeave:v,onAfterLeave:P,onLeaveCancelled:k,onBeforeAppear:F,onAppear:$,onAfterAppear:j,onAppearCancelled:H}=e,G=String(t.key),ce=nm(n,t),le=(_,b)=>{_&&Xt(_,r,9,b)},R=(_,b)=>{const A=b[1];le(_,b),se(_)?_.every(w=>w.length<=1)&&A():_.length<=1&&A()},T={mode:o,persisted:c,beforeEnter(_){let b=l;if(!n.isMounted)if(i)b=F||l;else return;_[Sn]&&_[Sn](!0);const A=ce[G];A&&Lr(t,A)&&A.el[Sn]&&A.el[Sn](),le(b,[_])},enter(_){let b=u,A=f,w=p;if(!n.isMounted)if(i)b=$||u,A=j||f,w=H||p;else return;let y=!1;const Te=_[Po]=Be=>{y||(y=!0,Be?le(w,[_]):le(A,[_]),T.delayedLeave&&T.delayedLeave(),_[Po]=void 0)};b?R(b,[_,Te]):Te()},leave(_,b){const A=String(t.key);if(_[Po]&&_[Po](!0),n.isUnmounting)return b();le(m,[_]);let w=!1;const y=_[Sn]=Te=>{w||(w=!0,b(),Te?le(k,[_]):le(P,[_]),_[Sn]=void 0,ce[A]===t&&delete ce[A])};ce[A]=t,v?R(v,[_,y]):y()},clone(_){const b=Xc(_,e,n,r,s);return s&&s(b),b}};return T}function wc(t){if(Va(t))return t=gr(t),t.children=null,t}function Hh(t){if(!Va(t))return Xp(t.type)&&t.children?tm(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&he(n.default))return n.default()}}function Li(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Li(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function rm(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const c=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Mt?(o.patchFlag&128&&s++,r=r.concat(rm(o.children,e,c))):(e||o.type!==Tt)&&r.push(c!=null?gr(o,{key:c}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function sm(t,e){return he(t)?Je({name:t.name},e,{setup:t}):t}function im(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ta=new WeakMap;function wi(t,e,n,r,s=!1){if(se(t)){t.forEach((P,k)=>wi(P,e&&(se(e)?e[k]:e),n,r,s));return}if(Ai(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&wi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Ma(r.component):r.el,o=s?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===ke?c.refs={}:c.refs,p=c.setupState,m=we(p),v=p===ke?vp:P=>be(m,P);if(u!=null&&u!==l){if(Wh(e),qe(u))f[u]=null,v(u)&&(p[u]=null);else if(pt(u)){u.value=null;const P=e;P.k&&(f[P.k]=null)}}if(he(l))no(l,c,12,[o,f]);else{const P=qe(l),k=pt(l);if(P||k){const F=()=>{if(t.f){const $=P?v(l)?p[l]:f[l]:l.value;if(s)se($)&&Ll($,i);else if(se($))$.includes(i)||$.push(i);else if(P)f[l]=[i],v(l)&&(p[l]=f[l]);else{const j=[i];l.value=j,t.k&&(f[t.k]=j)}}else P?(f[l]=o,v(l)&&(p[l]=o)):k&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const $=()=>{F(),ta.delete(t)};$.id=-1,ta.set(t,$),Vt($,n)}else Wh(t),F()}}}function Wh(t){const e=ta.get(t);e&&(e.flags|=8,ta.delete(t))}Ca().requestIdleCallback;Ca().cancelIdleCallback;const Ai=t=>!!t.type.__asyncLoader,Va=t=>t.type.__isKeepAlive;function BE(t,e){om(t,"a",e)}function jE(t,e){om(t,"da",e)}function om(t,e,n=dt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Da(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Va(s.parent.vnode)&&qE(r,e,n,s),s=s.parent}}function qE(t,e,n,r){const s=Da(e,t,r,!0);Zl(()=>{Ll(r[e],s)},n)}function Da(t,e,n=dt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{xn();const c=ro(n),l=Xt(e,n,t,o);return c(),Mn(),l});return r?s.unshift(i):s.push(i),i}}const qn=t=>(e,n=dt)=>{(!Bi||t==="sp")&&Da(t,(...r)=>e(...r),n)},$E=qn("bm"),Xl=qn("m"),HE=qn("bu"),WE=qn("u"),am=qn("bum"),Zl=qn("um"),GE=qn("sp"),KE=qn("rtg"),zE=qn("rtc");function QE(t,e=dt){Da("ec",t,e)}const JE="components";function cm(t,e){return XE(JE,t,!0,e)||t}const YE=Symbol.for("v-ndc");function XE(t,e,n=!0,r=!1){const s=Dt||dt;if(s){const i=s.type;{const c=Lv(i,!1);if(c&&(c===e||c===qt(e)||c===ba(qt(e))))return i}const o=Gh(s[t]||i[t],e)||Gh(s.appContext[t],e);return!o&&r?i:o}}function Gh(t,e){return t&&(t[e]||t[qt(e)]||t[ba(qt(e))])}function ZE(t,e,n,r){let s;const i=n,o=se(t);if(o||qe(t)){const c=o&&jr(t);let l=!1,u=!1;c&&(l=!Bt(t),u=Ln(t),t=Pa(t)),s=new Array(t.length);for(let f=0,p=t.length;f<p;f++)s[f]=e(l?u?Cs(Yt(t[f])):Yt(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(Pe(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];s[l]=e(t[f],f,l,i)}}else s=[];return s}const Zc=t=>t?Pm(t)?Ma(t):Zc(t.parent):null,Ri=Je(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zc(t.parent),$root:t=>Zc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>um(t),$forceUpdate:t=>t.f||(t.f=()=>{Jl(t.update)}),$nextTick:t=>t.n||(t.n=Ql.bind(t.proxy)),$watch:t=>xE.bind(t)}),Ac=(t,e)=>t!==ke&&!t.__isScriptSetup&&be(t,e),ev={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Ac(r,e))return o[e]=1,r[e];if(s!==ke&&be(s,e))return o[e]=2,s[e];if(be(i,e))return o[e]=3,i[e];if(n!==ke&&be(n,e))return o[e]=4,n[e];el&&(o[e]=0)}}const u=Ri[e];let f,p;if(u)return e==="$attrs"&&ht(t.attrs,"get",""),u(t);if((f=c.__cssModules)&&(f=f[e]))return f;if(n!==ke&&be(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,be(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Ac(s,e)?(s[e]=n,!0):r!==ke&&be(r,e)?(r[e]=n,!0):be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},c){let l;return!!(n[c]||t!==ke&&c[0]!=="$"&&be(t,c)||Ac(e,c)||be(i,c)||be(r,c)||be(Ri,c)||be(s.config.globalProperties,c)||(l=o.__cssModules)&&l[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Kh(t){return se(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let el=!0;function tv(t){const e=um(t),n=t.proxy,r=t.ctx;el=!1,e.beforeCreate&&zh(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:p,mounted:m,beforeUpdate:v,updated:P,activated:k,deactivated:F,beforeDestroy:$,beforeUnmount:j,destroyed:H,unmounted:G,render:ce,renderTracked:le,renderTriggered:R,errorCaptured:T,serverPrefetch:_,expose:b,inheritAttrs:A,components:w,directives:y,filters:Te}=e;if(u&&nv(u,r,null),o)for(const Ae in o){const Ee=o[Ae];he(Ee)&&(r[Ae]=Ee.bind(n))}if(s){const Ae=s.call(n,n);Pe(Ae)&&(t.data=Na(Ae))}if(el=!0,i)for(const Ae in i){const Ee=i[Ae],wt=he(Ee)?Ee.bind(n,n):he(Ee.get)?Ee.get.bind(n,n):fn,nn=!he(Ee)&&he(Ee.set)?Ee.set.bind(n):fn,Ct=Gt({get:wt,set:nn});Object.defineProperty(r,Ae,{enumerable:!0,configurable:!0,get:()=>Ct.value,set:et=>Ct.value=et})}if(c)for(const Ae in c)lm(c[Ae],r,n,Ae);if(l){const Ae=he(l)?l.call(n):l;Reflect.ownKeys(Ae).forEach(Ee=>{Fo(Ee,Ae[Ee])})}f&&zh(f,t,"c");function Me(Ae,Ee){se(Ee)?Ee.forEach(wt=>Ae(wt.bind(n))):Ee&&Ae(Ee.bind(n))}if(Me($E,p),Me(Xl,m),Me(HE,v),Me(WE,P),Me(BE,k),Me(jE,F),Me(QE,T),Me(zE,le),Me(KE,R),Me(am,j),Me(Zl,G),Me(GE,_),se(b))if(b.length){const Ae=t.exposed||(t.exposed={});b.forEach(Ee=>{Object.defineProperty(Ae,Ee,{get:()=>n[Ee],set:wt=>n[Ee]=wt,enumerable:!0})})}else t.exposed||(t.exposed={});ce&&t.render===fn&&(t.render=ce),A!=null&&(t.inheritAttrs=A),w&&(t.components=w),y&&(t.directives=y),_&&im(t)}function nv(t,e,n=fn){se(t)&&(t=tl(t));for(const r in t){const s=t[r];let i;Pe(s)?"default"in s?i=dn(s.from||r,s.default,!0):i=dn(s.from||r):i=dn(s),pt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function zh(t,e,n){Xt(se(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function lm(t,e,n,r){let s=r.includes(".")?Yp(n,r):()=>n[r];if(qe(t)){const i=e[t];he(i)&&Uo(s,i)}else if(he(t))Uo(s,t.bind(n));else if(Pe(t))if(se(t))t.forEach(i=>lm(i,e,n,r));else{const i=he(t.handler)?t.handler.bind(n):e[t.handler];he(i)&&Uo(s,i,t)}}function um(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>na(l,u,o,!0)),na(l,e,o)),Pe(e)&&i.set(e,l),l}function na(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&na(t,i,n,!0),s&&s.forEach(o=>na(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=rv[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const rv={data:Qh,props:Jh,emits:Jh,methods:di,computed:di,beforeCreate:_t,created:_t,beforeMount:_t,mounted:_t,beforeUpdate:_t,updated:_t,beforeDestroy:_t,beforeUnmount:_t,destroyed:_t,unmounted:_t,activated:_t,deactivated:_t,errorCaptured:_t,serverPrefetch:_t,components:di,directives:di,watch:iv,provide:Qh,inject:sv};function Qh(t,e){return e?t?function(){return Je(he(t)?t.call(this,this):t,he(e)?e.call(this,this):e)}:e:t}function sv(t,e){return di(tl(t),tl(e))}function tl(t){if(se(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function _t(t,e){return t?[...new Set([].concat(t,e))]:e}function di(t,e){return t?Je(Object.create(null),t,e):e}function Jh(t,e){return t?se(t)&&se(e)?[...new Set([...t,...e])]:Je(Object.create(null),Kh(t),Kh(e??{})):e}function iv(t,e){if(!t)return e;if(!e)return t;const n=Je(Object.create(null),t);for(const r in e)n[r]=_t(t[r],e[r]);return n}function hm(){return{app:null,config:{isNativeTag:vp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ov=0;function av(t,e){return function(r,s=null){he(r)||(r=Je({},r)),s!=null&&!Pe(s)&&(s=null);const i=hm(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:ov++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Uv,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&he(f.install)?(o.add(f),f.install(u,...p)):he(f)&&(o.add(f),f(u,...p))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,p){return p?(i.components[f]=p,u):i.components[f]},directive(f,p){return p?(i.directives[f]=p,u):i.directives[f]},mount(f,p,m){if(!l){const v=u._ceVNode||It(r,s);return v.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(v,f,m),l=!0,u._container=f,f.__vue_app__=u,Ma(v.component)}},onUnmount(f){c.push(f)},unmount(){l&&(Xt(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,p){return i.provides[f]=p,u},runWithContext(f){const p=Es;Es=u;try{return f()}finally{Es=p}}};return u}}let Es=null;const cv=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${qt(e)}Modifiers`]||t[`${Yr(e)}Modifiers`];function lv(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ke;let s=n;const i=e.startsWith("update:"),o=i&&cv(r,e.slice(7));o&&(o.trim&&(s=n.map(f=>qe(f)?f.trim():f)),o.number&&(s=n.map(Sa)));let c,l=r[c=yc(e)]||r[c=yc(qt(e))];!l&&i&&(l=r[c=yc(Yr(e))]),l&&Xt(l,t,6,s);const u=r[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Xt(u,t,6,s)}}const uv=new WeakMap;function fm(t,e,n=!1){const r=n?uv:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!he(t)){const l=u=>{const f=fm(u,e,!0);f&&(c=!0,Je(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(Pe(t)&&r.set(t,null),null):(se(i)?i.forEach(l=>o[l]=null):Je(o,i),Pe(t)&&r.set(t,o),o)}function Oa(t,e){return!t||!Aa(e)?!1:(e=e.slice(2).replace(/Once$/,""),be(t,e[0].toLowerCase()+e.slice(1))||be(t,Yr(e))||be(t,e))}function Yh(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:p,data:m,setupState:v,ctx:P,inheritAttrs:k}=t,F=ea(t);let $,j;try{if(n.shapeFlag&4){const G=s||r,ce=G;$=ln(u.call(ce,G,f,p,v,m,P)),j=c}else{const G=e;$=ln(G.length>1?G(p,{attrs:c,slots:o,emit:l}):G(p,null)),j=e.props?c:hv(c)}}catch(G){bi.length=0,ka(G,t,1),$=It(Tt)}let H=$;if(j&&k!==!1){const G=Object.keys(j),{shapeFlag:ce}=H;G.length&&ce&7&&(i&&G.some(Ml)&&(j=fv(j,i)),H=gr(H,j,!1,!0))}return n.dirs&&(H=gr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&Li(H,n.transition),$=H,ea(F),$}const hv=t=>{let e;for(const n in t)(n==="class"||n==="style"||Aa(n))&&((e||(e={}))[n]=t[n]);return e},fv=(t,e)=>{const n={};for(const r in t)(!Ml(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function dv(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Xh(r,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==r[m]&&!Oa(u,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?Xh(r,o,u):!0:!!o;return!1}function Xh(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Oa(n,i))return!0}return!1}function pv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const dm={},pm=()=>Object.create(dm),mm=t=>Object.getPrototypeOf(t)===dm;function mv(t,e,n,r=!1){const s={},i=pm();t.propsDefaults=Object.create(null),gm(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:qp(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function gv(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=we(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(Oa(t.emitsOptions,m))continue;const v=e[m];if(l)if(be(i,m))v!==i[m]&&(i[m]=v,u=!0);else{const P=qt(m);s[P]=nl(l,c,P,v,t,!1)}else v!==i[m]&&(i[m]=v,u=!0)}}}else{gm(t,e,s,i)&&(u=!0);let f;for(const p in c)(!e||!be(e,p)&&((f=Yr(p))===p||!be(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(s[p]=nl(l,c,p,void 0,t,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!be(e,p))&&(delete i[p],u=!0)}u&&Cn(t.attrs,"set","")}function gm(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(vi(l))continue;const u=e[l];let f;s&&be(s,f=qt(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:Oa(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=we(n),u=c||ke;for(let f=0;f<i.length;f++){const p=i[f];n[p]=nl(s,l,p,u[p],t,!be(u,p))}}return o}function nl(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=be(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&he(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const f=ro(s);r=u[n]=l.call(null,e),f()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===Yr(n))&&(r=!0))}return r}const _v=new WeakMap;function _m(t,e,n=!1){const r=n?_v:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!he(t)){const f=p=>{l=!0;const[m,v]=_m(p,e,!0);Je(o,m),v&&c.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return Pe(t)&&r.set(t,gs),gs;if(se(i))for(let f=0;f<i.length;f++){const p=qt(i[f]);Zh(p)&&(o[p]=ke)}else if(i)for(const f in i){const p=qt(f);if(Zh(p)){const m=i[f],v=o[p]=se(m)||he(m)?{type:m}:Je({},m),P=v.type;let k=!1,F=!0;if(se(P))for(let $=0;$<P.length;++$){const j=P[$],H=he(j)&&j.name;if(H==="Boolean"){k=!0;break}else H==="String"&&(F=!1)}else k=he(P)&&P.name==="Boolean";v[0]=k,v[1]=F,(k||be(v,"default"))&&c.push(p)}}const u=[o,c];return Pe(t)&&r.set(t,u),u}function Zh(t){return t[0]!=="$"&&!vi(t)}const eu=t=>t==="_"||t==="_ctx"||t==="$stable",tu=t=>se(t)?t.map(ln):[ln(t)],yv=(t,e,n)=>{if(e._n)return e;const r=Yl((...s)=>tu(e(...s)),n);return r._c=!1,r},ym=(t,e,n)=>{const r=t._ctx;for(const s in t){if(eu(s))continue;const i=t[s];if(he(i))e[s]=yv(s,i,r);else if(i!=null){const o=tu(i);e[s]=()=>o}}},Em=(t,e)=>{const n=tu(e);t.slots.default=()=>n},vm=(t,e,n)=>{for(const r in e)(n||!eu(r))&&(t[r]=e[r])},Ev=(t,e,n)=>{const r=t.slots=pm();if(t.vnode.shapeFlag&32){const s=e._;s?(vm(r,e,n),n&&Ap(r,"_",s,!0)):ym(e,r)}else e&&Em(t,e)},vv=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=ke;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:vm(s,e,n):(i=!e.$stable,ym(e,s)),o=e}else e&&(Em(t,e),o={default:1});if(i)for(const c in s)!eu(c)&&o[c]==null&&delete s[c]},Vt=Rv;function Tv(t){return Iv(t)}function Iv(t,e){const n=Ca();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:p,nextSibling:m,setScopeId:v=fn,insertStaticContent:P}=t,k=(E,I,S,V=null,L=null,D=null,K=void 0,q=null,B=!!I.dynamicChildren)=>{if(E===I)return;E&&!Lr(E,I)&&(V=O(E),et(E,L,D,!0),E=null),I.patchFlag===-2&&(B=!1,I.dynamicChildren=null);const{type:U,ref:re,shapeFlag:J}=I;switch(U){case xa:F(E,I,S,V);break;case Tt:$(E,I,S,V);break;case bc:E==null&&j(I,S,V,K);break;case Mt:w(E,I,S,V,L,D,K,q,B);break;default:J&1?ce(E,I,S,V,L,D,K,q,B):J&6?y(E,I,S,V,L,D,K,q,B):(J&64||J&128)&&U.process(E,I,S,V,L,D,K,q,B,ee)}re!=null&&L?wi(re,E&&E.ref,D,I||E,!I):re==null&&E&&E.ref!=null&&wi(E.ref,null,D,E,!0)},F=(E,I,S,V)=>{if(E==null)r(I.el=c(I.children),S,V);else{const L=I.el=E.el;I.children!==E.children&&u(L,I.children)}},$=(E,I,S,V)=>{E==null?r(I.el=l(I.children||""),S,V):I.el=E.el},j=(E,I,S,V)=>{[E.el,E.anchor]=P(E.children,I,S,V,E.el,E.anchor)},H=({el:E,anchor:I},S,V)=>{let L;for(;E&&E!==I;)L=m(E),r(E,S,V),E=L;r(I,S,V)},G=({el:E,anchor:I})=>{let S;for(;E&&E!==I;)S=m(E),s(E),E=S;s(I)},ce=(E,I,S,V,L,D,K,q,B)=>{if(I.type==="svg"?K="svg":I.type==="math"&&(K="mathml"),E==null)le(I,S,V,L,D,K,q,B);else{const U=E.el&&E.el._isVueCE?E.el:null;try{U&&U._beginPatch(),_(E,I,L,D,K,q,B)}finally{U&&U._endPatch()}}},le=(E,I,S,V,L,D,K,q)=>{let B,U;const{props:re,shapeFlag:J,transition:te,dirs:ie}=E;if(B=E.el=o(E.type,D,re&&re.is,re),J&8?f(B,E.children):J&16&&T(E.children,B,null,V,L,Rc(E,D),K,q),ie&&kr(E,null,V,"created"),R(B,E,E.scopeId,K,V),re){for(const Ce in re)Ce!=="value"&&!vi(Ce)&&i(B,Ce,null,re[Ce],D,V);"value"in re&&i(B,"value",null,re.value,D),(U=re.onVnodeBeforeMount)&&on(U,V,E)}ie&&kr(E,null,V,"beforeMount");const pe=wv(L,te);pe&&te.beforeEnter(B),r(B,I,S),((U=re&&re.onVnodeMounted)||pe||ie)&&Vt(()=>{U&&on(U,V,E),pe&&te.enter(B),ie&&kr(E,null,V,"mounted")},L)},R=(E,I,S,V,L)=>{if(S&&v(E,S),V)for(let D=0;D<V.length;D++)v(E,V[D]);if(L){let D=L.subTree;if(I===D||Am(D.type)&&(D.ssContent===I||D.ssFallback===I)){const K=L.vnode;R(E,K,K.scopeId,K.slotScopeIds,L.parent)}}},T=(E,I,S,V,L,D,K,q,B=0)=>{for(let U=B;U<E.length;U++){const re=E[U]=q?tr(E[U]):ln(E[U]);k(null,re,I,S,V,L,D,K,q)}},_=(E,I,S,V,L,D,K)=>{const q=I.el=E.el;let{patchFlag:B,dynamicChildren:U,dirs:re}=I;B|=E.patchFlag&16;const J=E.props||ke,te=I.props||ke;let ie;if(S&&Vr(S,!1),(ie=te.onVnodeBeforeUpdate)&&on(ie,S,I,E),re&&kr(I,E,S,"beforeUpdate"),S&&Vr(S,!0),(J.innerHTML&&te.innerHTML==null||J.textContent&&te.textContent==null)&&f(q,""),U?b(E.dynamicChildren,U,q,S,V,Rc(I,L),D):K||Ee(E,I,q,null,S,V,Rc(I,L),D,!1),B>0){if(B&16)A(q,J,te,S,L);else if(B&2&&J.class!==te.class&&i(q,"class",null,te.class,L),B&4&&i(q,"style",J.style,te.style,L),B&8){const pe=I.dynamicProps;for(let Ce=0;Ce<pe.length;Ce++){const Ie=pe[Ce],ot=J[Ie],at=te[Ie];(at!==ot||Ie==="value")&&i(q,Ie,ot,at,L,S)}}B&1&&E.children!==I.children&&f(q,I.children)}else!K&&U==null&&A(q,J,te,S,L);((ie=te.onVnodeUpdated)||re)&&Vt(()=>{ie&&on(ie,S,I,E),re&&kr(I,E,S,"updated")},V)},b=(E,I,S,V,L,D,K)=>{for(let q=0;q<I.length;q++){const B=E[q],U=I[q],re=B.el&&(B.type===Mt||!Lr(B,U)||B.shapeFlag&198)?p(B.el):S;k(B,U,re,null,V,L,D,K,!0)}},A=(E,I,S,V,L)=>{if(I!==S){if(I!==ke)for(const D in I)!vi(D)&&!(D in S)&&i(E,D,I[D],null,L,V);for(const D in S){if(vi(D))continue;const K=S[D],q=I[D];K!==q&&D!=="value"&&i(E,D,q,K,L,V)}"value"in S&&i(E,"value",I.value,S.value,L)}},w=(E,I,S,V,L,D,K,q,B)=>{const U=I.el=E?E.el:c(""),re=I.anchor=E?E.anchor:c("");let{patchFlag:J,dynamicChildren:te,slotScopeIds:ie}=I;ie&&(q=q?q.concat(ie):ie),E==null?(r(U,S,V),r(re,S,V),T(I.children||[],S,re,L,D,K,q,B)):J>0&&J&64&&te&&E.dynamicChildren&&E.dynamicChildren.length===te.length?(b(E.dynamicChildren,te,S,L,D,K,q),(I.key!=null||L&&I===L.subTree)&&Tm(E,I,!0)):Ee(E,I,S,re,L,D,K,q,B)},y=(E,I,S,V,L,D,K,q,B)=>{I.slotScopeIds=q,E==null?I.shapeFlag&512?L.ctx.activate(I,S,V,K,B):Te(I,S,V,L,D,K,B):Be(E,I,B)},Te=(E,I,S,V,L,D,K)=>{const q=E.component=Vv(E,V,L);if(Va(E)&&(q.ctx.renderer=ee),Dv(q,!1,K),q.asyncDep){if(L&&L.registerDep(q,Me,K),!E.el){const B=q.subTree=It(Tt);$(null,B,I,S),E.placeholder=B.el}}else Me(q,E,I,S,L,D,K)},Be=(E,I,S)=>{const V=I.component=E.component;if(dv(E,I,S))if(V.asyncDep&&!V.asyncResolved){Ae(V,I,S);return}else V.next=I,V.update();else I.el=E.el,V.vnode=I},Me=(E,I,S,V,L,D,K)=>{const q=()=>{if(E.isMounted){let{next:J,bu:te,u:ie,parent:pe,vnode:Ce}=E;{const Nt=Im(E);if(Nt){J&&(J.el=Ce.el,Ae(E,J,K)),Nt.asyncDep.then(()=>{E.isUnmounted||q()});return}}let Ie=J,ot;Vr(E,!1),J?(J.el=Ce.el,Ae(E,J,K)):J=Ce,te&&Lo(te),(ot=J.props&&J.props.onVnodeBeforeUpdate)&&on(ot,pe,J,Ce),Vr(E,!0);const at=Yh(E),Pt=E.subTree;E.subTree=at,k(Pt,at,p(Pt.el),O(Pt),E,L,D),J.el=at.el,Ie===null&&pv(E,at.el),ie&&Vt(ie,L),(ot=J.props&&J.props.onVnodeUpdated)&&Vt(()=>on(ot,pe,J,Ce),L)}else{let J;const{el:te,props:ie}=I,{bm:pe,m:Ce,parent:Ie,root:ot,type:at}=E,Pt=Ai(I);Vr(E,!1),pe&&Lo(pe),!Pt&&(J=ie&&ie.onVnodeBeforeMount)&&on(J,Ie,I),Vr(E,!0);{ot.ce&&ot.ce._def.shadowRoot!==!1&&ot.ce._injectChildStyle(at);const Nt=E.subTree=Yh(E);k(null,Nt,S,V,E,L,D),I.el=Nt.el}if(Ce&&Vt(Ce,L),!Pt&&(J=ie&&ie.onVnodeMounted)){const Nt=I;Vt(()=>on(J,Ie,Nt),L)}(I.shapeFlag&256||Ie&&Ai(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&E.a&&Vt(E.a,L),E.isMounted=!0,I=S=V=null}};E.scope.on();const B=E.effect=new Cp(q);E.scope.off();const U=E.update=B.run.bind(B),re=E.job=B.runIfDirty.bind(B);re.i=E,re.id=E.uid,B.scheduler=()=>Jl(re),Vr(E,!0),U()},Ae=(E,I,S)=>{I.component=E;const V=E.vnode.props;E.vnode=I,E.next=null,gv(E,I.props,V,S),vv(E,I.children,S),xn(),$h(E),Mn()},Ee=(E,I,S,V,L,D,K,q,B=!1)=>{const U=E&&E.children,re=E?E.shapeFlag:0,J=I.children,{patchFlag:te,shapeFlag:ie}=I;if(te>0){if(te&128){nn(U,J,S,V,L,D,K,q,B);return}else if(te&256){wt(U,J,S,V,L,D,K,q,B);return}}ie&8?(re&16&&it(U,L,D),J!==U&&f(S,J)):re&16?ie&16?nn(U,J,S,V,L,D,K,q,B):it(U,L,D,!0):(re&8&&f(S,""),ie&16&&T(J,S,V,L,D,K,q,B))},wt=(E,I,S,V,L,D,K,q,B)=>{E=E||gs,I=I||gs;const U=E.length,re=I.length,J=Math.min(U,re);let te;for(te=0;te<J;te++){const ie=I[te]=B?tr(I[te]):ln(I[te]);k(E[te],ie,S,null,L,D,K,q,B)}U>re?it(E,L,D,!0,!1,J):T(I,S,V,L,D,K,q,B,J)},nn=(E,I,S,V,L,D,K,q,B)=>{let U=0;const re=I.length;let J=E.length-1,te=re-1;for(;U<=J&&U<=te;){const ie=E[U],pe=I[U]=B?tr(I[U]):ln(I[U]);if(Lr(ie,pe))k(ie,pe,S,null,L,D,K,q,B);else break;U++}for(;U<=J&&U<=te;){const ie=E[J],pe=I[te]=B?tr(I[te]):ln(I[te]);if(Lr(ie,pe))k(ie,pe,S,null,L,D,K,q,B);else break;J--,te--}if(U>J){if(U<=te){const ie=te+1,pe=ie<re?I[ie].el:V;for(;U<=te;)k(null,I[U]=B?tr(I[U]):ln(I[U]),S,pe,L,D,K,q,B),U++}}else if(U>te)for(;U<=J;)et(E[U],L,D,!0),U++;else{const ie=U,pe=U,Ce=new Map;for(U=pe;U<=te;U++){const tt=I[U]=B?tr(I[U]):ln(I[U]);tt.key!=null&&Ce.set(tt.key,U)}let Ie,ot=0;const at=te-pe+1;let Pt=!1,Nt=0;const Wt=new Array(at);for(U=0;U<at;U++)Wt[U]=0;for(U=ie;U<=J;U++){const tt=E[U];if(ot>=at){et(tt,L,D,!0);continue}let Ye;if(tt.key!=null)Ye=Ce.get(tt.key);else for(Ie=pe;Ie<=te;Ie++)if(Wt[Ie-pe]===0&&Lr(tt,I[Ie])){Ye=Ie;break}Ye===void 0?et(tt,L,D,!0):(Wt[Ye-pe]=U+1,Ye>=Nt?Nt=Ye:Pt=!0,k(tt,I[Ye],S,null,L,D,K,q,B),ot++)}const ss=Pt?Av(Wt):gs;for(Ie=ss.length-1,U=at-1;U>=0;U--){const tt=pe+U,Ye=I[tt],zs=I[tt+1],br=tt+1<re?zs.el||wm(zs):V;Wt[U]===0?k(null,Ye,S,br,L,D,K,q,B):Pt&&(Ie<0||U!==ss[Ie]?Ct(Ye,S,br,2):Ie--)}}},Ct=(E,I,S,V,L=null)=>{const{el:D,type:K,transition:q,children:B,shapeFlag:U}=E;if(U&6){Ct(E.component.subTree,I,S,V);return}if(U&128){E.suspense.move(I,S,V);return}if(U&64){K.move(E,I,S,ee);return}if(K===Mt){r(D,I,S);for(let J=0;J<B.length;J++)Ct(B[J],I,S,V);r(E.anchor,I,S);return}if(K===bc){H(E,I,S);return}if(V!==2&&U&1&&q)if(V===0)q.beforeEnter(D),r(D,I,S),Vt(()=>q.enter(D),L);else{const{leave:J,delayLeave:te,afterLeave:ie}=q,pe=()=>{E.ctx.isUnmounted?s(D):r(D,I,S)},Ce=()=>{D._isLeaving&&D[Sn](!0),J(D,()=>{pe(),ie&&ie()})};te?te(D,pe,Ce):Ce()}else r(D,I,S)},et=(E,I,S,V=!1,L=!1)=>{const{type:D,props:K,ref:q,children:B,dynamicChildren:U,shapeFlag:re,patchFlag:J,dirs:te,cacheIndex:ie}=E;if(J===-2&&(L=!1),q!=null&&(xn(),wi(q,null,S,E,!0),Mn()),ie!=null&&(I.renderCache[ie]=void 0),re&256){I.ctx.deactivate(E);return}const pe=re&1&&te,Ce=!Ai(E);let Ie;if(Ce&&(Ie=K&&K.onVnodeBeforeUnmount)&&on(Ie,I,E),re&6)Ht(E.component,S,V);else{if(re&128){E.suspense.unmount(S,V);return}pe&&kr(E,null,I,"beforeUnmount"),re&64?E.type.remove(E,I,S,ee,V):U&&!U.hasOnce&&(D!==Mt||J>0&&J&64)?it(U,I,S,!1,!0):(D===Mt&&J&384||!L&&re&16)&&it(B,I,S),V&&In(E)}(Ce&&(Ie=K&&K.onVnodeUnmounted)||pe)&&Vt(()=>{Ie&&on(Ie,I,E),pe&&kr(E,null,I,"unmounted")},S)},In=E=>{const{type:I,el:S,anchor:V,transition:L}=E;if(I===Mt){$t(S,V);return}if(I===bc){G(E);return}const D=()=>{s(S),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(E.shapeFlag&1&&L&&!L.persisted){const{leave:K,delayLeave:q}=L,B=()=>K(S,D);q?q(E.el,D,B):B()}else D()},$t=(E,I)=>{let S;for(;E!==I;)S=m(E),s(E),E=S;s(I)},Ht=(E,I,S)=>{const{bum:V,scope:L,job:D,subTree:K,um:q,m:B,a:U}=E;ef(B),ef(U),V&&Lo(V),L.stop(),D&&(D.flags|=8,et(K,E,I,S)),q&&Vt(q,I),Vt(()=>{E.isUnmounted=!0},I)},it=(E,I,S,V=!1,L=!1,D=0)=>{for(let K=D;K<E.length;K++)et(E[K],I,S,V,L)},O=E=>{if(E.shapeFlag&6)return O(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const I=m(E.anchor||E.el),S=I&&I[ME];return S?m(S):I};let X=!1;const z=(E,I,S)=>{let V;E==null?I._vnode&&(et(I._vnode,null,null,!0),V=I._vnode.component):k(I._vnode||null,E,I,null,null,null,S),I._vnode=E,X||(X=!0,$h(V),Kp(),X=!1)},ee={p:k,um:et,m:Ct,r:In,mt:Te,mc:T,pc:Ee,pbc:b,n:O,o:t};return{render:z,hydrate:void 0,createApp:av(z)}}function Rc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Vr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function wv(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Tm(t,e,n=!1){const r=t.children,s=e.children;if(se(r)&&se(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=tr(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&Tm(o,c)),c.type===xa&&(c.patchFlag!==-1?c.el=o.el:c.__elIndex=i+(t.type===Mt?1:0)),c.type===Tt&&!c.el&&(c.el=o.el)}}function Av(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Im(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Im(e)}function ef(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function wm(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?wm(e.subTree):null}const Am=t=>t.__isSuspense;function Rv(t,e){e&&e.pendingBranch?se(t)?e.effects.push(...t):e.effects.push(t):VE(t)}const Mt=Symbol.for("v-fgt"),xa=Symbol.for("v-txt"),Tt=Symbol.for("v-cmt"),bc=Symbol.for("v-stc"),bi=[];let Ot=null;function ut(t=!1){bi.push(Ot=t?null:[])}function bv(){bi.pop(),Ot=bi[bi.length-1]||null}let Fi=1;function ra(t,e=!1){Fi+=t,t<0&&Ot&&e&&(Ot.hasOnce=!0)}function Rm(t){return t.dynamicChildren=Fi>0?Ot||gs:null,bv(),Fi>0&&Ot&&Ot.push(t),t}function bt(t,e,n,r,s,i){return Rm(Q(t,e,n,r,s,i,!0))}function bm(t,e,n,r,s){return Rm(It(t,e,n,r,s,!0))}function sa(t){return t?t.__v_isVNode===!0:!1}function Lr(t,e){return t.type===e.type&&t.key===e.key}const Sm=({key:t})=>t??null,Bo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?qe(t)||pt(t)||he(t)?{i:Dt,r:t,k:e,f:!!n}:t:null);function Q(t,e=null,n=null,r=0,s=null,i=t===Mt?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Sm(e),ref:e&&Bo(e),scopeId:Qp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Dt};return c?(nu(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=qe(n)?8:16),Fi>0&&!o&&Ot&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ot.push(l),l}const It=Sv;function Sv(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===YE)&&(t=Tt),sa(t)){const c=gr(t,e,!0);return n&&nu(c,n),Fi>0&&!i&&Ot&&(c.shapeFlag&6?Ot[Ot.indexOf(t)]=c:Ot.push(c)),c.patchFlag=-2,c}if(Fv(t)&&(t=t.__vccOpts),e){e=Cv(e);let{class:c,style:l}=e;c&&!qe(c)&&(e.class=Bl(c)),Pe(l)&&(zl(l)&&!se(l)&&(l=Je({},l)),e.style=Ul(l))}const o=qe(t)?1:Am(t)?128:Xp(t)?64:Pe(t)?4:he(t)?2:0;return Q(t,e,n,r,s,o,i,!0)}function Cv(t){return t?zl(t)||mm(t)?Je({},t):t:null}function gr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?Pv(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Sm(u),ref:e&&e.ref?n&&i?se(i)?i.concat(Bo(e)):[i,Bo(e)]:Bo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Mt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&gr(t.ssContent),ssFallback:t.ssFallback&&gr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Li(f,l.clone(f)),f}function vs(t=" ",e=0){return It(xa,null,t,e)}function Ui(t="",e=!1){return e?(ut(),bm(Tt,null,t)):It(Tt,null,t)}function ln(t){return t==null||typeof t=="boolean"?It(Tt):se(t)?It(Mt,null,t.slice()):sa(t)?tr(t):It(xa,null,String(t))}function tr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:gr(t)}function nu(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(se(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),nu(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!mm(e)?e._ctx=Dt:s===3&&Dt&&(Dt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else he(e)?(e={default:e,_ctx:Dt},n=32):(e=String(e),r&64?(n=16,e=[vs(e)]):n=8);t.children=e,t.shapeFlag|=n}function Pv(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Bl([e.class,r.class]));else if(s==="style")e.style=Ul([e.style,r.style]);else if(Aa(s)){const i=e[s],o=r[s];o&&i!==o&&!(se(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function on(t,e,n,r=null){Xt(t,e,7,[n,r])}const Nv=hm();let kv=0;function Vv(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Nv,i={uid:kv++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new nE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_m(r,s),emitsOptions:fm(r,s),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:r.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=lv.bind(null,i),t.ce&&t.ce(i),i}let dt=null;const Cm=()=>dt||Dt;let ia,rl;{const t=Ca(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};ia=e("__VUE_INSTANCE_SETTERS__",n=>dt=n),rl=e("__VUE_SSR_SETTERS__",n=>Bi=n)}const ro=t=>{const e=dt;return ia(t),t.scope.on(),()=>{t.scope.off(),ia(e)}},tf=()=>{dt&&dt.scope.off(),ia(null)};function Pm(t){return t.vnode.shapeFlag&4}let Bi=!1;function Dv(t,e=!1,n=!1){e&&rl(e);const{props:r,children:s}=t.vnode,i=Pm(t);mv(t,r,i,e),Ev(t,s,n||e);const o=i?Ov(t,e):void 0;return e&&rl(!1),o}function Ov(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ev);const{setup:r}=n;if(r){xn();const s=t.setupContext=r.length>1?Mv(t):null,i=ro(t),o=no(r,t,0,[t.props,s]),c=Tp(o);if(Mn(),i(),(c||t.sp)&&!Ai(t)&&im(t),c){if(o.then(tf,tf),e)return o.then(l=>{nf(t,l)}).catch(l=>{ka(l,t,0)});t.asyncDep=o}else nf(t,o)}else Nm(t)}function nf(t,e,n){he(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Pe(e)&&(t.setupState=Hp(e)),Nm(t)}function Nm(t,e,n){const r=t.type;t.render||(t.render=r.render||fn);{const s=ro(t);xn();try{tv(t)}finally{Mn(),s()}}}const xv={get(t,e){return ht(t,"get",""),t[e]}};function Mv(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,xv),slots:t.slots,emit:t.emit,expose:e}}function Ma(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Hp(IE(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ri)return Ri[n](t)},has(e,n){return n in e||n in Ri}})):t.proxy}function Lv(t,e=!0){return he(t)?t.displayName||t.name:t.name||e&&t.__name}function Fv(t){return he(t)&&"__vccOpts"in t}const Gt=(t,e)=>SE(t,e,Bi);function ru(t,e,n){try{ra(-1);const r=arguments.length;return r===2?Pe(e)&&!se(e)?sa(e)?It(t,null,[e]):It(t,e):It(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&sa(n)&&(n=[n]),It(t,e,n))}finally{ra(1)}}const Uv="3.5.27";let sl;const rf=typeof window<"u"&&window.trustedTypes;if(rf)try{sl=rf.createPolicy("vue",{createHTML:t=>t})}catch{}const km=sl?t=>sl.createHTML(t):t=>t,Bv="http://www.w3.org/2000/svg",jv="http://www.w3.org/1998/Math/MathML",bn=typeof document<"u"?document:null,sf=bn&&bn.createElement("template"),qv={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?bn.createElementNS(Bv,t):e==="mathml"?bn.createElementNS(jv,t):n?bn.createElement(t,{is:n}):bn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>bn.createTextNode(t),createComment:t=>bn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>bn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{sf.innerHTML=km(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=sf.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Jn="transition",ui="animation",ji=Symbol("_vtc"),Vm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},$v=Je({},Zp,Vm),Hv=t=>(t.displayName="Transition",t.props=$v,t),Wv=Hv((t,{slots:e})=>ru(UE,Gv(t),e)),Dr=(t,e=[])=>{se(t)?t.forEach(n=>n(...e)):t&&t(...e)},of=t=>t?se(t)?t.some(e=>e.length>1):t.length>1:!1;function Gv(t){const e={};for(const w in t)w in Vm||(e[w]=t[w]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:f=c,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=t,P=Kv(s),k=P&&P[0],F=P&&P[1],{onBeforeEnter:$,onEnter:j,onEnterCancelled:H,onLeave:G,onLeaveCancelled:ce,onBeforeAppear:le=$,onAppear:R=j,onAppearCancelled:T=H}=e,_=(w,y,Te,Be)=>{w._enterCancelled=Be,Or(w,y?f:c),Or(w,y?u:o),Te&&Te()},b=(w,y)=>{w._isLeaving=!1,Or(w,p),Or(w,v),Or(w,m),y&&y()},A=w=>(y,Te)=>{const Be=w?R:j,Me=()=>_(y,w,Te);Dr(Be,[y,Me]),af(()=>{Or(y,w?l:i),An(y,w?f:c),of(Be)||cf(y,r,k,Me)})};return Je(e,{onBeforeEnter(w){Dr($,[w]),An(w,i),An(w,o)},onBeforeAppear(w){Dr(le,[w]),An(w,l),An(w,u)},onEnter:A(!1),onAppear:A(!0),onLeave(w,y){w._isLeaving=!0;const Te=()=>b(w,y);An(w,p),w._enterCancelled?(An(w,m),hf(w)):(hf(w),An(w,m)),af(()=>{w._isLeaving&&(Or(w,p),An(w,v),of(G)||cf(w,r,F,Te))}),Dr(G,[w,Te])},onEnterCancelled(w){_(w,!1,void 0,!0),Dr(H,[w])},onAppearCancelled(w){_(w,!0,void 0,!0),Dr(T,[w])},onLeaveCancelled(w){b(w),Dr(ce,[w])}})}function Kv(t){if(t==null)return null;if(Pe(t))return[Sc(t.enter),Sc(t.leave)];{const e=Sc(t);return[e,e]}}function Sc(t){return zy(t)}function An(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ji]||(t[ji]=new Set)).add(e)}function Or(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[ji];n&&(n.delete(e),n.size||(t[ji]=void 0))}function af(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let zv=0;function cf(t,e,n,r){const s=t._endId=++zv,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:c,propCount:l}=Qv(t,e);if(!o)return r();const u=o+"end";let f=0;const p=()=>{t.removeEventListener(u,m),i()},m=v=>{v.target===t&&++f>=l&&p()};setTimeout(()=>{f<l&&p()},c+1),t.addEventListener(u,m)}function Qv(t,e){const n=window.getComputedStyle(t),r=P=>(n[P]||"").split(", "),s=r(`${Jn}Delay`),i=r(`${Jn}Duration`),o=lf(s,i),c=r(`${ui}Delay`),l=r(`${ui}Duration`),u=lf(c,l);let f=null,p=0,m=0;e===Jn?o>0&&(f=Jn,p=o,m=i.length):e===ui?u>0&&(f=ui,p=u,m=l.length):(p=Math.max(o,u),f=p>0?o>u?Jn:ui:null,m=f?f===Jn?i.length:l.length:0);const v=f===Jn&&/\b(?:transform|all)(?:,|$)/.test(r(`${Jn}Property`).toString());return{type:f,timeout:p,propCount:m,hasTransform:v}}function lf(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>uf(n)+uf(t[r])))}function uf(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function hf(t){return(t?t.ownerDocument:document).body.offsetHeight}function Jv(t,e,n){const r=t[ji];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ff=Symbol("_vod"),Yv=Symbol("_vsh"),Xv=Symbol(""),Zv=/(?:^|;)\s*display\s*:/;function eT(t,e,n){const r=t.style,s=qe(n);let i=!1;if(n&&!s){if(e)if(qe(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&jo(r,c,"")}else for(const o in e)n[o]==null&&jo(r,o,"");for(const o in n)o==="display"&&(i=!0),jo(r,o,n[o])}else if(s){if(e!==n){const o=r[Xv];o&&(n+=";"+o),r.cssText=n,i=Zv.test(n)}}else e&&t.removeAttribute("style");ff in t&&(t[ff]=i?r.display:"",t[Yv]&&(r.display="none"))}const df=/\s*!important$/;function jo(t,e,n){if(se(n))n.forEach(r=>jo(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=tT(t,e);df.test(n)?t.setProperty(Yr(r),n.replace(df,""),"important"):t[r]=n}}const pf=["Webkit","Moz","ms"],Cc={};function tT(t,e){const n=Cc[e];if(n)return n;let r=qt(e);if(r!=="filter"&&r in t)return Cc[e]=r;r=ba(r);for(let s=0;s<pf.length;s++){const i=pf[s]+r;if(i in t)return Cc[e]=i}return e}const mf="http://www.w3.org/1999/xlink";function gf(t,e,n,r,s,i=eE(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(mf,e.slice(6,e.length)):t.setAttributeNS(mf,e,n):n==null||i&&!Rp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":vn(n)?String(n):n)}function _f(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?km(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Rp(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Nn(t,e,n,r){t.addEventListener(e,n,r)}function nT(t,e,n,r){t.removeEventListener(e,n,r)}const yf=Symbol("_vei");function rT(t,e,n,r,s=null){const i=t[yf]||(t[yf]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=sT(e);if(r){const u=i[e]=aT(r,s);Nn(t,c,u,l)}else o&&(nT(t,c,o,l),i[e]=void 0)}}const Ef=/(?:Once|Passive|Capture)$/;function sT(t){let e;if(Ef.test(t)){e={};let r;for(;r=t.match(Ef);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Yr(t.slice(2)),e]}let Pc=0;const iT=Promise.resolve(),oT=()=>Pc||(iT.then(()=>Pc=0),Pc=Date.now());function aT(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Xt(cT(r,n.value),e,5,[r])};return n.value=t,n.attached=oT(),n}function cT(t,e){if(se(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const vf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,lT=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?Jv(t,r,o):e==="style"?eT(t,n,r):Aa(e)?Ml(e)||rT(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):uT(t,e,r,o))?(_f(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&gf(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!qe(r))?_f(t,qt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),gf(t,e,r,o))};function uT(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&vf(e)&&he(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return vf(e)&&qe(n)?!1:e in t}const _r=t=>{const e=t.props["onUpdate:modelValue"]||!1;return se(e)?n=>Lo(e,n):e};function hT(t){t.target.composing=!0}function Tf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const jt=Symbol("_assign");function If(t,e,n){return e&&(t=t.trim()),n&&(t=Sa(t)),t}const hn={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[jt]=_r(s);const i=r||s.props&&s.props.type==="number";Nn(t,e?"change":"input",o=>{o.target.composing||t[jt](If(t.value,n,i))}),(n||i)&&Nn(t,"change",()=>{t.value=If(t.value,n,i)}),e||(Nn(t,"compositionstart",hT),Nn(t,"compositionend",Tf),Nn(t,"change",Tf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[jt]=_r(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?Sa(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},fT={deep:!0,created(t,e,n){t[jt]=_r(n),Nn(t,"change",()=>{const r=t._modelValue,s=Ps(t),i=t.checked,o=t[jt];if(se(r)){const c=jl(r,s),l=c!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(c,1),o(u)}}else if(Us(r)){const c=new Set(r);i?c.add(s):c.delete(s),o(c)}else o(Dm(t,i))})},mounted:wf,beforeUpdate(t,e,n){t[jt]=_r(n),wf(t,e,n)}};function wf(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(se(e))s=jl(e,r.props.value)>-1;else if(Us(e))s=e.has(r.props.value);else{if(e===n)return;s=Hr(e,Dm(t,!0))}t.checked!==s&&(t.checked=s)}const dT={created(t,{value:e},n){t.checked=Hr(e,n.props.value),t[jt]=_r(n),Nn(t,"change",()=>{t[jt](Ps(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[jt]=_r(r),e!==n&&(t.checked=Hr(e,r.props.value))}},pT={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Us(e);Nn(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Sa(Ps(o)):Ps(o));t[jt](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Ql(()=>{t._assigning=!1})}),t[jt]=_r(r)},mounted(t,{value:e}){Af(t,e)},beforeUpdate(t,e,n){t[jt]=_r(n)},updated(t,{value:e}){t._assigning||Af(t,e)}};function Af(t,e){const n=t.multiple,r=se(e);if(!(n&&!r&&!Us(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],c=Ps(o);if(n)if(r){const l=typeof c;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(c)):o.selected=jl(e,c)>-1}else o.selected=e.has(c);else if(Hr(Ps(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ps(t){return"_value"in t?t._value:t.value}function Dm(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const mT={created(t,e,n){No(t,e,n,null,"created")},mounted(t,e,n){No(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){No(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){No(t,e,n,r,"updated")}};function gT(t,e){switch(t){case"SELECT":return pT;case"TEXTAREA":return hn;default:switch(e){case"checkbox":return fT;case"radio":return dT;default:return hn}}}function No(t,e,n,r,s){const o=gT(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,r)}const _T=["ctrl","shift","alt","meta"],yT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>_T.some(n=>t[`${n}Key`]&&!e.includes(n))},Om=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const c=yT[e[o]];if(c&&c(s,e))return}return t(s,...i)}))},ET=Je({patchProp:lT},qv);let Rf;function vT(){return Rf||(Rf=Tv(ET))}const TT=((...t)=>{const e=vT().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=wT(r);if(!s)return;const i=e._component;!he(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,IT(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function IT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function wT(t){return qe(t)?document.querySelector(t):t}const La=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},AT={};function RT(t,e){const n=cm("router-view");return ut(),bm(n)}const bT=La(AT,[["render",RT]]);const us=typeof document<"u";function xm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ST(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&xm(t.default)}const Re=Object.assign;function Nc(t,e){const n={};for(const r in e){const s=e[r];n[r]=Zt(s)?s.map(t):t(s)}return n}const Si=()=>{},Zt=Array.isArray;function bf(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Mm=/#/g,CT=/&/g,PT=/\//g,NT=/=/g,kT=/\?/g,Lm=/\+/g,VT=/%5B/g,DT=/%5D/g,Fm=/%5E/g,OT=/%60/g,Um=/%7B/g,xT=/%7C/g,Bm=/%7D/g,MT=/%20/g;function su(t){return t==null?"":encodeURI(""+t).replace(xT,"|").replace(VT,"[").replace(DT,"]")}function LT(t){return su(t).replace(Um,"{").replace(Bm,"}").replace(Fm,"^")}function il(t){return su(t).replace(Lm,"%2B").replace(MT,"+").replace(Mm,"%23").replace(CT,"%26").replace(OT,"`").replace(Um,"{").replace(Bm,"}").replace(Fm,"^")}function FT(t){return il(t).replace(NT,"%3D")}function UT(t){return su(t).replace(Mm,"%23").replace(kT,"%3F")}function BT(t){return UT(t).replace(PT,"%2F")}function qi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const jT=/\/$/,qT=t=>t.replace(jT,"");function kc(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,c>0?c:e.length),s=t(i.slice(1))),c>=0&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=GT(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:qi(o)}}function $T(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Sf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function HT(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ns(e.matched[r],n.matched[s])&&jm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ns(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function jm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!WT(t[n],e[n]))return!1;return!0}function WT(t,e){return Zt(t)?Cf(t,e):Zt(e)?Cf(e,t):t?.valueOf()===e?.valueOf()}function Cf(t,e){return Zt(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function GT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Yn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let ol=(function(t){return t.pop="pop",t.push="push",t})({}),Vc=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function KT(t){if(!t)if(us){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),qT(t)}const zT=/^[^#]+#/;function QT(t,e){return t.replace(zT,"#")+e}function JT(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Fa=()=>({left:window.scrollX,top:window.scrollY});function YT(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=JT(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Pf(t,e){return(history.state?history.state.position-e:-1)+t}const al=new Map;function XT(t,e){al.set(t,e)}function ZT(t){const e=al.get(t);return al.delete(t),e}function eI(t){return typeof t=="string"||t&&typeof t=="object"}function qm(t){return typeof t=="string"||typeof t=="symbol"}let Ue=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const $m=Symbol("");Ue.MATCHER_NOT_FOUND+"",Ue.NAVIGATION_GUARD_REDIRECT+"",Ue.NAVIGATION_ABORTED+"",Ue.NAVIGATION_CANCELLED+"",Ue.NAVIGATION_DUPLICATED+"";function ks(t,e){return Re(new Error,{type:t,[$m]:!0},e)}function Rn(t,e){return t instanceof Error&&$m in t&&(e==null||!!(t.type&e))}const tI=["params","query","hash"];function nI(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of tI)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function rI(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Lm," "),i=s.indexOf("="),o=qi(i<0?s:s.slice(0,i)),c=i<0?null:qi(s.slice(i+1));if(o in e){let l=e[o];Zt(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function Nf(t){let e="";for(let n in t){const r=t[n];if(n=FT(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Zt(r)?r.map(s=>s&&il(s)):[r&&il(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function sI(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Zt(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const iI=Symbol(""),kf=Symbol(""),Ua=Symbol(""),Hm=Symbol(""),cl=Symbol("");function hi(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function nr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const u=m=>{m===!1?l(ks(Ue.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?l(m):eI(m)?l(ks(Ue.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),c())},f=i(()=>t.call(r&&r.instances[s],e,n,u));let p=Promise.resolve(f);t.length<3&&(p=p.then(u)),p.catch(m=>l(m))})}function Dc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(xm(l)){const u=(l.__vccOpts||l)[e];u&&i.push(nr(u,n,r,o,c,s))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=ST(f)?f.default:f;o.mods[c]=f,o.components[c]=p;const m=(p.__vccOpts||p)[e];return m&&nr(m,n,r,o,c,s)()}))}}return i}function oI(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>Ns(u,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>Ns(u,l))||s.push(l))}return[n,r,s]}let aI=()=>location.protocol+"//"+location.host;function Wm(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),Sf(c,"")}return Sf(n,t)+r+s}function cI(t,e,n,r){let s=[],i=[],o=null;const c=({state:m})=>{const v=Wm(t,location),P=n.value,k=e.value;let F=0;if(m){if(n.value=v,e.value=m,o&&o===P){o=null;return}F=k?m.position-k.position:0}else r(v);s.forEach($=>{$(n.value,P,{delta:F,type:ol.pop,direction:F?F>0?Vc.forward:Vc.back:Vc.unknown})})};function l(){o=n.value}function u(m){s.push(m);const v=()=>{const P=s.indexOf(m);P>-1&&s.splice(P,1)};return i.push(v),v}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Re({},m.state,{scroll:Fa()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:p}}function Vf(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Fa():null}}function lI(t){const{history:e,location:n}=window,r={value:Wm(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:aI()+t+l;try{e[f?"replaceState":"pushState"](u,"",m),s.value=u}catch(v){console.error(v),n[f?"replace":"assign"](m)}}function o(l,u){i(l,Re({},e.state,Vf(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function c(l,u){const f=Re({},s.value,e.state,{forward:l,scroll:Fa()});i(f.current,f,!0),i(l,Re({},Vf(r.value,l,null),{position:f.position+1},u),!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function uI(t){t=KT(t);const e=lI(t),n=cI(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Re({location:"",base:t,go:r,createHref:QT.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Fr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Ke=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Ke||{});const hI={type:Fr.Static,value:""},fI=/[a-zA-Z0-9_]/;function dI(t){if(!t)return[[]];if(t==="/")return[[hI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(v){throw new Error(`ERR (${n})/"${u}": ${v}`)}let n=Ke.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,u="",f="";function p(){u&&(n===Ke.Static?i.push({type:Fr.Static,value:u}):n===Ke.Param||n===Ke.ParamRegExp||n===Ke.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Fr.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==Ke.ParamRegExp){r=n,n=Ke.EscapeNext;continue}switch(n){case Ke.Static:l==="/"?(u&&p(),o()):l===":"?(p(),n=Ke.Param):m();break;case Ke.EscapeNext:m(),n=r;break;case Ke.Param:l==="("?n=Ke.ParamRegExp:fI.test(l)?m():(p(),n=Ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case Ke.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=Ke.ParamRegExpEnd:f+=l;break;case Ke.ParamRegExpEnd:p(),n=Ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===Ke.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),s}const Df="[^/]+?",pI={sensitive:!1,strict:!1,start:!0,end:!0};var yt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(yt||{});const mI=/[.+*?^${}()[\]/\\]/g;function gI(t,e){const n=Re({},pI,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[yt.Root];n.strict&&!u.length&&(s+="/");for(let p=0;p<u.length;p++){const m=u[p];let v=yt.Segment+(n.sensitive?yt.BonusCaseSensitive:0);if(m.type===Fr.Static)p||(s+="/"),s+=m.value.replace(mI,"\\$&"),v+=yt.Static;else if(m.type===Fr.Param){const{value:P,repeatable:k,optional:F,regexp:$}=m;i.push({name:P,repeatable:k,optional:F});const j=$||Df;if(j!==Df){v+=yt.BonusCustomRegExp;try{`${j}`}catch(G){throw new Error(`Invalid custom RegExp for param "${P}" (${j}): `+G.message)}}let H=k?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;p||(H=F&&u.length<2?`(?:/${H})`:"/"+H),F&&(H+="?"),s+=H,v+=yt.Dynamic,F&&(v+=yt.BonusOptional),k&&(v+=yt.BonusRepeatable),j===".*"&&(v+=yt.BonusWildcard)}f.push(v)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=yt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(u){const f=u.match(o),p={};if(!f)return null;for(let m=1;m<f.length;m++){const v=f[m]||"",P=i[m-1];p[P.name]=v&&P.repeatable?v.split("/"):v}return p}function l(u){let f="",p=!1;for(const m of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const v of m)if(v.type===Fr.Static)f+=v.value;else if(v.type===Fr.Param){const{value:P,repeatable:k,optional:F}=v,$=P in u?u[P]:"";if(Zt($)&&!k)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const j=Zt($)?$.join("/"):$;if(!j)if(F)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${P}"`);f+=j}}return f||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function _I(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===yt.Static+yt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===yt.Static+yt.Segment?1:-1:0}function Gm(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=_I(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Of(r))return 1;if(Of(s))return-1}return s.length-r.length}function Of(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const yI={strict:!1,end:!0,sensitive:!1};function EI(t,e,n){const r=gI(dI(t.path),n),s=Re(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function vI(t,e){const n=[],r=new Map;e=bf(yI,e);function s(p){return r.get(p)}function i(p,m,v){const P=!v,k=Mf(p);k.aliasOf=v&&v.record;const F=bf(e,p),$=[k];if("alias"in p){const G=typeof p.alias=="string"?[p.alias]:p.alias;for(const ce of G)$.push(Mf(Re({},k,{components:v?v.record.components:k.components,path:ce,aliasOf:v?v.record:k})))}let j,H;for(const G of $){const{path:ce}=G;if(m&&ce[0]!=="/"){const le=m.record.path,R=le[le.length-1]==="/"?"":"/";G.path=m.record.path+(ce&&R+ce)}if(j=EI(G,m,F),v?v.alias.push(j):(H=H||j,H!==j&&H.alias.push(j),P&&p.name&&!Lf(j)&&o(p.name)),Km(j)&&l(j),k.children){const le=k.children;for(let R=0;R<le.length;R++)i(le[R],j,v&&v.children[R])}v=v||j}return H?()=>{o(H)}:Si}function o(p){if(qm(p)){const m=r.get(p);m&&(r.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const m=wI(p,n);n.splice(m,0,p),p.record.name&&!Lf(p)&&r.set(p.record.name,p)}function u(p,m){let v,P={},k,F;if("name"in p&&p.name){if(v=r.get(p.name),!v)throw ks(Ue.MATCHER_NOT_FOUND,{location:p});F=v.record.name,P=Re(xf(m.params,v.keys.filter(H=>!H.optional).concat(v.parent?v.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),p.params&&xf(p.params,v.keys.map(H=>H.name))),k=v.stringify(P)}else if(p.path!=null)k=p.path,v=n.find(H=>H.re.test(k)),v&&(P=v.parse(k),F=v.record.name);else{if(v=m.name?r.get(m.name):n.find(H=>H.re.test(m.path)),!v)throw ks(Ue.MATCHER_NOT_FOUND,{location:p,currentLocation:m});F=v.record.name,P=Re({},m.params,p.params),k=v.stringify(P)}const $=[];let j=v;for(;j;)$.unshift(j.record),j=j.parent;return{name:F,path:k,params:P,matched:$,meta:II($)}}t.forEach(p=>i(p));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function xf(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Mf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:TI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function TI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Lf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function II(t){return t.reduce((e,n)=>Re(e,n.meta),{})}function wI(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Gm(t,e[i])<0?r=i:n=i+1}const s=AI(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function AI(t){let e=t;for(;e=e.parent;)if(Km(e)&&Gm(t,e)===0)return e}function Km({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Ff(t){const e=dn(Ua),n=dn(Hm),r=Gt(()=>{const l=ur(t.to);return e.resolve(l)}),s=Gt(()=>{const{matched:l}=r.value,{length:u}=l,f=l[u-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Ns.bind(null,f));if(m>-1)return m;const v=Uf(l[u-2]);return u>1&&Uf(f)===v&&p[p.length-1].path!==v?p.findIndex(Ns.bind(null,l[u-2])):m}),i=Gt(()=>s.value>-1&&PI(n.params,r.value.params)),o=Gt(()=>s.value>-1&&s.value===n.matched.length-1&&jm(n.params,r.value.params));function c(l={}){if(CI(l)){const u=e[ur(t.replace)?"replace":"push"](ur(t.to)).catch(Si);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Gt(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function RI(t){return t.length===1?t[0]:t}const bI=sm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ff,setup(t,{slots:e}){const n=Na(Ff(t)),{options:r}=dn(Ua),s=Gt(()=>({[Bf(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Bf(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&RI(e.default(n));return t.custom?i:ru("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),SI=bI;function CI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function PI(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Zt(s)||s.length!==r.length||r.some((i,o)=>i.valueOf()!==s[o].valueOf()))return!1}return!0}function Uf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Bf=(t,e,n)=>t??e??n,NI=sm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=dn(cl),s=Gt(()=>t.route||r.value),i=dn(kf,0),o=Gt(()=>{let u=ur(i);const{matched:f}=s.value;let p;for(;(p=f[u])&&!p.components;)u++;return u}),c=Gt(()=>s.value.matched[o.value]);Fo(kf,Gt(()=>o.value+1)),Fo(iI,c),Fo(cl,s);const l=Et();return Uo(()=>[l.value,c.value,t.name],([u,f,p],[m,v,P])=>{f&&(f.instances[p]=u,v&&v!==f&&u&&u===m&&(f.leaveGuards.size||(f.leaveGuards=v.leaveGuards),f.updateGuards.size||(f.updateGuards=v.updateGuards))),u&&f&&(!v||!Ns(f,v)||!m)&&(f.enterCallbacks[p]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=s.value,f=t.name,p=c.value,m=p&&p.components[f];if(!m)return jf(n.default,{Component:m,route:u});const v=p.props[f],P=v?v===!0?u.params:typeof v=="function"?v(u):v:null,F=ru(m,Re({},P,e,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return jf(n.default,{Component:F,route:u})||F}}});function jf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const kI=NI;function VI(t){const e=vI(t.routes,t),n=t.parseQuery||rI,r=t.stringifyQuery||Nf,s=t.history,i=hi(),o=hi(),c=hi(),l=wE(Yn);let u=Yn;us&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Nc.bind(null,O=>""+O),p=Nc.bind(null,BT),m=Nc.bind(null,qi);function v(O,X){let z,ee;return qm(O)?(z=e.getRecordMatcher(O),ee=X):ee=O,e.addRoute(ee,z)}function P(O){const X=e.getRecordMatcher(O);X&&e.removeRoute(X)}function k(){return e.getRoutes().map(O=>O.record)}function F(O){return!!e.getRecordMatcher(O)}function $(O,X){if(X=Re({},X||l.value),typeof O=="string"){const S=kc(n,O,X.path),V=e.resolve({path:S.path},X),L=s.createHref(S.fullPath);return Re(S,V,{params:m(V.params),hash:qi(S.hash),redirectedFrom:void 0,href:L})}let z;if(O.path!=null)z=Re({},O,{path:kc(n,O.path,X.path).path});else{const S=Re({},O.params);for(const V in S)S[V]==null&&delete S[V];z=Re({},O,{params:p(S)}),X.params=p(X.params)}const ee=e.resolve(z,X),me=O.hash||"";ee.params=f(m(ee.params));const E=$T(r,Re({},O,{hash:LT(me),path:ee.path})),I=s.createHref(E);return Re({fullPath:E,hash:me,query:r===Nf?sI(O.query):O.query||{}},ee,{redirectedFrom:void 0,href:I})}function j(O){return typeof O=="string"?kc(n,O,l.value.path):Re({},O)}function H(O,X){if(u!==O)return ks(Ue.NAVIGATION_CANCELLED,{from:X,to:O})}function G(O){return R(O)}function ce(O){return G(Re(j(O),{replace:!0}))}function le(O,X){const z=O.matched[O.matched.length-1];if(z&&z.redirect){const{redirect:ee}=z;let me=typeof ee=="function"?ee(O,X):ee;return typeof me=="string"&&(me=me.includes("?")||me.includes("#")?me=j(me):{path:me},me.params={}),Re({query:O.query,hash:O.hash,params:me.path!=null?{}:O.params},me)}}function R(O,X){const z=u=$(O),ee=l.value,me=O.state,E=O.force,I=O.replace===!0,S=le(z,ee);if(S)return R(Re(j(S),{state:typeof S=="object"?Re({},me,S.state):me,force:E,replace:I}),X||z);const V=z;V.redirectedFrom=X;let L;return!E&&HT(r,ee,z)&&(L=ks(Ue.NAVIGATION_DUPLICATED,{to:V,from:ee}),Ct(ee,ee,!0,!1)),(L?Promise.resolve(L):b(V,ee)).catch(D=>Rn(D)?Rn(D,Ue.NAVIGATION_GUARD_REDIRECT)?D:nn(D):Ee(D,V,ee)).then(D=>{if(D){if(Rn(D,Ue.NAVIGATION_GUARD_REDIRECT))return R(Re({replace:I},j(D.to),{state:typeof D.to=="object"?Re({},me,D.to.state):me,force:E}),X||V)}else D=w(V,ee,!0,I,me);return A(V,ee,D),D})}function T(O,X){const z=H(O,X);return z?Promise.reject(z):Promise.resolve()}function _(O){const X=$t.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(O):O()}function b(O,X){let z;const[ee,me,E]=oI(O,X);z=Dc(ee.reverse(),"beforeRouteLeave",O,X);for(const S of ee)S.leaveGuards.forEach(V=>{z.push(nr(V,O,X))});const I=T.bind(null,O,X);return z.push(I),it(z).then(()=>{z=[];for(const S of i.list())z.push(nr(S,O,X));return z.push(I),it(z)}).then(()=>{z=Dc(me,"beforeRouteUpdate",O,X);for(const S of me)S.updateGuards.forEach(V=>{z.push(nr(V,O,X))});return z.push(I),it(z)}).then(()=>{z=[];for(const S of E)if(S.beforeEnter)if(Zt(S.beforeEnter))for(const V of S.beforeEnter)z.push(nr(V,O,X));else z.push(nr(S.beforeEnter,O,X));return z.push(I),it(z)}).then(()=>(O.matched.forEach(S=>S.enterCallbacks={}),z=Dc(E,"beforeRouteEnter",O,X,_),z.push(I),it(z))).then(()=>{z=[];for(const S of o.list())z.push(nr(S,O,X));return z.push(I),it(z)}).catch(S=>Rn(S,Ue.NAVIGATION_CANCELLED)?S:Promise.reject(S))}function A(O,X,z){c.list().forEach(ee=>_(()=>ee(O,X,z)))}function w(O,X,z,ee,me){const E=H(O,X);if(E)return E;const I=X===Yn,S=us?history.state:{};z&&(ee||I?s.replace(O.fullPath,Re({scroll:I&&S&&S.scroll},me)):s.push(O.fullPath,me)),l.value=O,Ct(O,X,z,I),nn()}let y;function Te(){y||(y=s.listen((O,X,z)=>{if(!Ht.listening)return;const ee=$(O),me=le(ee,Ht.currentRoute.value);if(me){R(Re(me,{replace:!0,force:!0}),ee).catch(Si);return}u=ee;const E=l.value;us&&XT(Pf(E.fullPath,z.delta),Fa()),b(ee,E).catch(I=>Rn(I,Ue.NAVIGATION_ABORTED|Ue.NAVIGATION_CANCELLED)?I:Rn(I,Ue.NAVIGATION_GUARD_REDIRECT)?(R(Re(j(I.to),{force:!0}),ee).then(S=>{Rn(S,Ue.NAVIGATION_ABORTED|Ue.NAVIGATION_DUPLICATED)&&!z.delta&&z.type===ol.pop&&s.go(-1,!1)}).catch(Si),Promise.reject()):(z.delta&&s.go(-z.delta,!1),Ee(I,ee,E))).then(I=>{I=I||w(ee,E,!1),I&&(z.delta&&!Rn(I,Ue.NAVIGATION_CANCELLED)?s.go(-z.delta,!1):z.type===ol.pop&&Rn(I,Ue.NAVIGATION_ABORTED|Ue.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),A(ee,E,I)}).catch(Si)}))}let Be=hi(),Me=hi(),Ae;function Ee(O,X,z){nn(O);const ee=Me.list();return ee.length?ee.forEach(me=>me(O,X,z)):console.error(O),Promise.reject(O)}function wt(){return Ae&&l.value!==Yn?Promise.resolve():new Promise((O,X)=>{Be.add([O,X])})}function nn(O){return Ae||(Ae=!O,Te(),Be.list().forEach(([X,z])=>O?z(O):X()),Be.reset()),O}function Ct(O,X,z,ee){const{scrollBehavior:me}=t;if(!us||!me)return Promise.resolve();const E=!z&&ZT(Pf(O.fullPath,0))||(ee||!z)&&history.state&&history.state.scroll||null;return Ql().then(()=>me(O,X,E)).then(I=>I&&YT(I)).catch(I=>Ee(I,O,X))}const et=O=>s.go(O);let In;const $t=new Set,Ht={currentRoute:l,listening:!0,addRoute:v,removeRoute:P,clearRoutes:e.clearRoutes,hasRoute:F,getRoutes:k,resolve:$,options:t,push:G,replace:ce,go:et,back:()=>et(-1),forward:()=>et(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Me.add,isReady:wt,install(O){O.component("RouterLink",SI),O.component("RouterView",kI),O.config.globalProperties.$router=Ht,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>ur(l)}),us&&!In&&l.value===Yn&&(In=!0,G(s.location).catch(ee=>{}));const X={};for(const ee in Yn)Object.defineProperty(X,ee,{get:()=>l.value[ee],enumerable:!0});O.provide(Ua,Ht),O.provide(Hm,qp(X)),O.provide(cl,l);const z=O.unmount;$t.add(O),O.unmount=function(){$t.delete(O),$t.size<1&&(u=Yn,y&&y(),y=null,l.value=Yn,In=!1,Ae=!1),z()}}};function it(O){return O.reduce((X,z)=>X.then(()=>_(z)),Promise.resolve())}return Ht}function iu(){return dn(Ua)}const DI=()=>{};var qf={};const zm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},OI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Qm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let m=(c&15)<<2|u>>6,v=u&63;l||(v=64,o||(m=64)),r.push(n[f],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||p==null)throw new xI;const m=i<<2|c>>4;if(r.push(m),u!==64){const v=c<<4&240|u>>2;if(r.push(v),p!==64){const P=u<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MI=function(t){const e=zm(t);return Qm.encodeByteArray(e,!0)},oa=function(t){return MI(t).replace(/\./g,"")},Jm=function(t){try{return Qm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const FI=()=>LI().__FIREBASE_DEFAULTS__,UI=()=>{if(typeof process>"u"||typeof qf>"u")return;const t=qf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jm(t[1]);return e&&JSON.parse(e)},Ba=()=>{try{return DI()||FI()||UI()||BI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ym=t=>Ba()?.emulatorHosts?.[t],jI=t=>{const e=Ym(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xm=()=>Ba()?.config,Zm=t=>Ba()?.[`_${t}`];class qI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Bs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eg(t){return(await fetch(t,{credentials:"include"})).ok}function $I(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[oa(JSON.stringify(n)),oa(JSON.stringify(o)),""].join(".")}const Ci={};function HI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ci))Ci[e]?t.emulator.push(e):t.prod.push(e);return t}function WI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let $f=!1;function tg(t,e){if(typeof window>"u"||typeof document>"u"||!Bs(window.location.host)||Ci[t]===e||Ci[t]||$f)return;Ci[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=HI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{$f=!0,o()},m}function f(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=WI(r),v=n("text"),P=document.getElementById(v)||document.createElement("span"),k=n("learnmore"),F=document.getElementById(k)||document.createElement("a"),$=n("preprendIcon"),j=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const H=m.element;c(H),f(F,k);const G=u();l(j,$),H.append(j,P,F,G),document.body.appendChild(H)}i?(P.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function KI(){const t=Ba()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YI(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XI(){return!KI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZI(){try{return typeof indexedDB=="object"}catch{return!1}}function ew(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const tw="FirebaseError";class $n extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tw,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,so.prototype.create)}}class so{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?nw(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new $n(s,c,r)}}function nw(t,e){return t.replace(rw,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rw=/\{\$([^}]+)}/g;function sw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Hf(i)&&Hf(o)){if(!Wr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Hf(t){return t!==null&&typeof t=="object"}function io(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function mi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iw(t,e){const n=new ow(t,e);return n.subscribe.bind(n)}class ow{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aw(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Oc),s.error===void 0&&(s.error=Oc),s.complete===void 0&&(s.complete=Oc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aw(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Oc(){}function St(t){return t&&t._delegate?t._delegate:t}class Gr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Mr="[DEFAULT]";class cw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uw(e))try{this.getOrInitializeService({instanceIdentifier:Mr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Mr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mr){return this.instances.has(e)}getOptions(e=Mr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mr){return this.component?this.component.multipleInstances?e:Mr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lw(t){return t===Mr?void 0:t}function uw(t){return t.instantiationMode==="EAGER"}class hw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const fw={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},dw=ge.INFO,pw={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},mw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=pw[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ou{constructor(e){this.name=e,this._logLevel=dw,this._logHandler=mw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const gw=(t,e)=>e.some(n=>t instanceof n);let Wf,Gf;function _w(){return Wf||(Wf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yw(){return Gf||(Gf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ng=new WeakMap,ll=new WeakMap,rg=new WeakMap,xc=new WeakMap,au=new WeakMap;function Ew(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ng.set(n,t)}).catch(()=>{}),au.set(e,t),e}function vw(t){if(ll.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ll.set(t,e)}let ul={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ll.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Tw(t){ul=t(ul)}function Iw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mc(this),e,...n);return rg.set(r,e.sort?e.sort():[e]),hr(r)}:yw().includes(t)?function(...e){return t.apply(Mc(this),e),hr(ng.get(this))}:function(...e){return hr(t.apply(Mc(this),e))}}function ww(t){return typeof t=="function"?Iw(t):(t instanceof IDBTransaction&&vw(t),gw(t,_w())?new Proxy(t,ul):t)}function hr(t){if(t instanceof IDBRequest)return Ew(t);if(xc.has(t))return xc.get(t);const e=ww(t);return e!==t&&(xc.set(t,e),au.set(e,t)),e}const Mc=t=>au.get(t);function Aw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=hr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(hr(o.result),l.oldVersion,l.newVersion,hr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const Rw=["get","getKey","getAll","getAllKeys","count"],bw=["put","add","delete","clear"],Lc=new Map;function Kf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lc.get(e))return Lc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=bw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Rw.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&l.done]))[0]};return Lc.set(e,i),i}Tw(t=>({...t,get:(e,n,r)=>Kf(e,n)||t.get(e,n,r),has:(e,n)=>!!Kf(e,n)||t.has(e,n)}));class Sw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Cw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Cw(t){return t.getComponent()?.type==="VERSION"}const hl="@firebase/app",zf="0.14.7";const Fn=new ou("@firebase/app"),Pw="@firebase/app-compat",Nw="@firebase/analytics-compat",kw="@firebase/analytics",Vw="@firebase/app-check-compat",Dw="@firebase/app-check",Ow="@firebase/auth",xw="@firebase/auth-compat",Mw="@firebase/database",Lw="@firebase/data-connect",Fw="@firebase/database-compat",Uw="@firebase/functions",Bw="@firebase/functions-compat",jw="@firebase/installations",qw="@firebase/installations-compat",$w="@firebase/messaging",Hw="@firebase/messaging-compat",Ww="@firebase/performance",Gw="@firebase/performance-compat",Kw="@firebase/remote-config",zw="@firebase/remote-config-compat",Qw="@firebase/storage",Jw="@firebase/storage-compat",Yw="@firebase/firestore",Xw="@firebase/ai",Zw="@firebase/firestore-compat",eA="firebase",tA="12.8.0";const fl="[DEFAULT]",nA={[hl]:"fire-core",[Pw]:"fire-core-compat",[kw]:"fire-analytics",[Nw]:"fire-analytics-compat",[Dw]:"fire-app-check",[Vw]:"fire-app-check-compat",[Ow]:"fire-auth",[xw]:"fire-auth-compat",[Mw]:"fire-rtdb",[Lw]:"fire-data-connect",[Fw]:"fire-rtdb-compat",[Uw]:"fire-fn",[Bw]:"fire-fn-compat",[jw]:"fire-iid",[qw]:"fire-iid-compat",[$w]:"fire-fcm",[Hw]:"fire-fcm-compat",[Ww]:"fire-perf",[Gw]:"fire-perf-compat",[Kw]:"fire-rc",[zw]:"fire-rc-compat",[Qw]:"fire-gcs",[Jw]:"fire-gcs-compat",[Yw]:"fire-fst",[Zw]:"fire-fst-compat",[Xw]:"fire-vertex","fire-js":"fire-js",[eA]:"fire-js-all"};const aa=new Map,rA=new Map,dl=new Map;function Qf(t,e){try{t.container.addComponent(e)}catch(n){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vs(t){const e=t.name;if(dl.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;dl.set(e,t);for(const n of aa.values())Qf(n,t);for(const n of rA.values())Qf(n,t);return!0}function cu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lt(t){return t==null?!1:t.settings!==void 0}const sA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new so("app","Firebase",sA);class iA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const js=tA;function sg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:fl,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw fr.create("bad-app-name",{appName:String(s)});if(n||(n=Xm()),!n)throw fr.create("no-options");const i=aa.get(s);if(i){if(Wr(n,i.options)&&Wr(r,i.config))return i;throw fr.create("duplicate-app",{appName:s})}const o=new hw(s);for(const l of dl.values())o.addComponent(l);const c=new iA(n,r,o);return aa.set(s,c),c}function ig(t=fl){const e=aa.get(t);if(!e&&t===fl&&Xm())return sg();if(!e)throw fr.create("no-app",{appName:t});return e}function dr(t,e,n){let r=nA[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(o.join(" "));return}Vs(new Gr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const oA="firebase-heartbeat-database",aA=1,$i="firebase-heartbeat-store";let Fc=null;function og(){return Fc||(Fc=Aw(oA,aA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($i)}catch(n){console.warn(n)}}}}).catch(t=>{throw fr.create("idb-open",{originalErrorMessage:t.message})})),Fc}async function cA(t){try{const n=(await og()).transaction($i),r=await n.objectStore($i).get(ag(t));return await n.done,r}catch(e){if(e instanceof $n)Fn.warn(e.message);else{const n=fr.create("idb-get",{originalErrorMessage:e?.message});Fn.warn(n.message)}}}async function Jf(t,e){try{const r=(await og()).transaction($i,"readwrite");await r.objectStore($i).put(e,ag(t)),await r.done}catch(n){if(n instanceof $n)Fn.warn(n.message);else{const r=fr.create("idb-set",{originalErrorMessage:n?.message});Fn.warn(r.message)}}}function ag(t){return`${t.name}!${t.options.appId}`}const lA=1024,uA=30;class hA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Yf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>uA){const s=pA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Yf(),{heartbeatsToSend:n,unsentEntries:r}=fA(this._heartbeatsCache.heartbeats),s=oa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Fn.warn(e),""}}}function Yf(){return new Date().toISOString().substring(0,10)}function fA(t,e=lA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Xf(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Xf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZI()?ew().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Xf(t){return oa(JSON.stringify({version:2,heartbeats:t})).length}function pA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function mA(t){Vs(new Gr("platform-logger",e=>new Sw(e),"PRIVATE")),Vs(new Gr("heartbeat",e=>new hA(e),"PRIVATE")),dr(hl,zf,t),dr(hl,zf,"esm2020"),dr("fire-js","")}mA("");function cg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gA=cg,lg=new so("auth","Firebase",cg());const ca=new ou("@firebase/auth");function _A(t,...e){ca.logLevel<=ge.WARN&&ca.warn(`Auth (${js}): ${t}`,...e)}function qo(t,...e){ca.logLevel<=ge.ERROR&&ca.error(`Auth (${js}): ${t}`,...e)}function en(t,...e){throw lu(t,...e)}function pn(t,...e){return lu(t,...e)}function ug(t,e,n){const r={...gA(),[e]:n};return new so("auth","Firebase",r).create(e,{appName:t.name})}function On(t){return ug(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lu(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lg.create(t,...e)}function oe(t,e,...n){if(!t)throw lu(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qo(e),new Error(e)}function Un(t,e){t||Vn(e)}function pl(){return typeof self<"u"&&self.location?.href||""}function yA(){return Zf()==="http:"||Zf()==="https:"}function Zf(){return typeof self<"u"&&self.location?.protocol||null}function EA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yA()||QI()||"connection"in navigator)?navigator.onLine:!0}function vA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class oo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Un(n>e,"Short delay should be less than long delay!"),this.isMobile=GI()||JI()}get(){return EA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function uu(t,e){Un(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class hg{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const TA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const IA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wA=new oo(3e4,6e4);function Ar(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Rr(t,e,n,r,s={}){return fg(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=io({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return zI()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Bs(t.emulatorConfig.host)&&(u.credentials="include"),hg.fetch()(await dg(t,t.config.apiHost,n,c),u)})}async function fg(t,e,n){t._canInitEmulator=!1;const r={...TA,...e};try{const s=new RA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ko(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ko(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ko(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ko(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ug(t,f,u);en(t,f)}}catch(s){if(s instanceof $n)throw s;en(t,"network-request-failed",{message:String(s)})}}async function ao(t,e,n,r,s={}){const i=await Rr(t,e,n,r,s);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function dg(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?uu(t.config,s):`${t.config.apiScheme}://${s}`;return IA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function AA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),wA.get())})}}function ko(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pn(t,e,r);return s.customData._tokenResponse=n,s}function ed(t){return t!==void 0&&t.enterprise!==void 0}class bA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SA(t,e){return Rr(t,"GET","/v2/recaptchaConfig",Ar(t,e))}async function CA(t,e){return Rr(t,"POST","/v1/accounts:delete",e)}async function la(t,e){return Rr(t,"POST","/v1/accounts:lookup",e)}function Pi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PA(t,e=!1){const n=St(t),r=await n.getIdToken(e),s=hu(r);oe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Pi(Uc(s.auth_time)),issuedAtTime:Pi(Uc(s.iat)),expirationTime:Pi(Uc(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Uc(t){return Number(t)*1e3}function hu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return qo("JWT malformed, contained fewer than 3 sections"),null;try{const s=Jm(n);return s?JSON.parse(s):(qo("Failed to decode base64 JWT payload"),null)}catch(s){return qo("Caught error parsing JWT payload as JSON",s?.toString()),null}}function td(t){const e=hu(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Hi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $n&&NA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function NA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class kA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ml{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pi(this.lastLoginAt),this.creationTime=Pi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ua(t){const e=t.auth,n=await t.getIdToken(),r=await Hi(t,la(e,{idToken:n}));oe(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?pg(s.providerUserInfo):[],o=DA(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ml(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function VA(t){const e=St(t);await ua(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function pg(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function OA(t,e){const n=await fg(t,{},async()=>{const r=io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await dg(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&Bs(t.emulatorConfig.host)&&(l.credentials="include"),hg.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xA(t,e){return Rr(t,"POST","/v2/accounts:revokeToken",Ar(t,e))}class Ts{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):td(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=td(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await OA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ts;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(oe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ts,this.toJSON())}_performRefresh(){return Vn("not implemented")}}function Xn(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new kA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ml(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Hi(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PA(this,e)}reload(){return VA(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ua(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lt(this.auth.app))return Promise.reject(On(this.auth));const e=await this.getIdToken();return await Hi(this,CA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:v,providerData:P,stsTokenManager:k}=n;oe(p&&k,e,"internal-error");const F=Ts.fromJSON(this.name,k);oe(typeof p=="string",e,"internal-error"),Xn(r,e.name),Xn(s,e.name),oe(typeof m=="boolean",e,"internal-error"),oe(typeof v=="boolean",e,"internal-error"),Xn(i,e.name),Xn(o,e.name),Xn(c,e.name),Xn(l,e.name),Xn(u,e.name),Xn(f,e.name);const $=new Kt({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:v,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:F,createdAt:u,lastLoginAt:f});return P&&Array.isArray(P)&&($.providerData=P.map(j=>({...j}))),l&&($._redirectEventId=l),$}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ts;s.updateFromServerResponse(n);const i=new Kt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ua(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];oe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?pg(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new Ts;c.updateFromIdToken(r);const l=new Kt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ml(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const nd=new Map;function Dn(t){Un(t instanceof Function,"Expected a class definition");let e=nd.get(t);return e?(Un(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nd.set(t,e),e)}class mg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mg.type="NONE";const rd=mg;function $o(t,e,n){return`firebase:${t}:${e}:${n}`}class Is{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=$o(this.userKey,s.apiKey,i),this.fullPersistenceKey=$o("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await la(this.auth,{idToken:e}).catch(()=>{});return n?Kt._fromGetAccountInfoResponse(this.auth,n,e):null}return Kt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Is(Dn(rd),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Dn(rd);const o=$o(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let p;if(typeof f=="string"){const m=await la(e,{idToken:f}).catch(()=>{});if(!m)break;p=await Kt._fromGetAccountInfoResponse(e,m,f)}else p=Kt._fromJSON(e,f);u!==i&&(c=p),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Is(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Is(i,e,r))}}function sd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Eg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tg(e))return"Blackberry";if(Ig(e))return"Webos";if(_g(e))return"Safari";if((e.includes("chrome/")||yg(e))&&!e.includes("edge/"))return"Chrome";if(vg(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function gg(t=mt()){return/firefox\//i.test(t)}function _g(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yg(t=mt()){return/crios\//i.test(t)}function Eg(t=mt()){return/iemobile/i.test(t)}function vg(t=mt()){return/android/i.test(t)}function Tg(t=mt()){return/blackberry/i.test(t)}function Ig(t=mt()){return/webos/i.test(t)}function fu(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MA(t=mt()){return fu(t)&&!!window.navigator?.standalone}function LA(){return YI()&&document.documentMode===10}function wg(t=mt()){return fu(t)||vg(t)||Ig(t)||Tg(t)||/windows phone/i.test(t)||Eg(t)}function Ag(t,e=[]){let n;switch(t){case"Browser":n=sd(mt());break;case"Worker":n=`${sd(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${js}/${r}`}class FA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function UA(t,e={}){return Rr(t,"GET","/v2/passwordPolicy",Ar(t,e))}const BA=6;class jA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class qA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new id(this),this.idTokenSubscription=new id(this),this.beforeStateQueue=new FA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Is.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await la(this,{idToken:e}),r=await Kt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Lt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ua(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lt(this.app))return Promise.reject(On(this));const n=e?St(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lt(this.app)?Promise.reject(On(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lt(this.app)?Promise.reject(On(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UA(this),n=new jA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new so("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xA(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dn(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Is.create(this,[Dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ag(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Lt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_A(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Xr(t){return St(t)}class id{constructor(e){this.auth=e,this.observer=null,this.addObserver=iw(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ja={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $A(t){ja=t}function Rg(t){return ja.loadJS(t)}function HA(){return ja.recaptchaEnterpriseScript}function WA(){return ja.gapiScript}function GA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class KA{constructor(){this.enterprise=new zA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class zA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const QA="recaptcha-enterprise",bg="NO_RECAPTCHA";class JA{constructor(e){this.type=QA,this.auth=Xr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{SA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new bA(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function s(i,o,c){const l=window.grecaptcha;ed(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(bg)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new KA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&ed(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=HA();l.length!==0&&(l+=c),Rg(l).then(()=>{s(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function od(t,e,n,r=!1,s=!1){const i=new JA(t);let o;if(s)o=bg;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function gl(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await od(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await od(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function YA(t,e){const n=cu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Wr(i,e??{}))return s;en(s,"already-initialized")}return n.initialize({options:e})}function XA(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Dn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function ZA(t,e,n){const r=Xr(t);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Sg(e),{host:o,port:c}=eR(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe(Wr(u,r.config.emulator)&&Wr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Bs(o)?(eg(`${i}//${o}${l}`),tg("Auth",!0)):tR()}function Sg(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eR(t){const e=Sg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ad(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ad(o)}}}function ad(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class du{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function nR(t,e){return Rr(t,"POST","/v1/accounts:signUp",e)}async function rR(t,e){return ao(t,"POST","/v1/accounts:signInWithPassword",Ar(t,e))}async function sR(t,e){return ao(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}async function iR(t,e){return ao(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}class Wi extends du{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Wi(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wi(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gl(e,n,"signInWithPassword",rR);case"emailLink":return sR(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gl(e,r,"signUpPassword",nR);case"emailLink":return iR(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ws(t,e){return ao(t,"POST","/v1/accounts:signInWithIdp",Ar(t,e))}const oR="http://localhost";class Kr extends du{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Kr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Kr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ws(e,n)}buildRequest(){const e={requestUri:oR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=io(n)}return e}}function aR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cR(t){const e=pi(mi(t)).link,n=e?pi(mi(e)).deep_link_id:null,r=pi(mi(t)).deep_link_id;return(r?pi(mi(r)).link:null)||r||n||e||t}class pu{constructor(e){const n=pi(mi(e)),r=n.apiKey??null,s=n.oobCode??null,i=aR(n.mode??null);oe(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=cR(e);try{return new pu(n)}catch{return null}}}class qs{constructor(){this.providerId=qs.PROVIDER_ID}static credential(e,n){return Wi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pu.parseLink(n);return oe(r,"argument-error"),Wi._fromEmailAndCode(e,r.code,r.tenantId)}}qs.PROVIDER_ID="password";qs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Cg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class co extends Cg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class sr extends co{constructor(){super("facebook.com")}static credential(e){return Kr._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";sr.PROVIDER_ID="facebook.com";class ir extends co{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Kr._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.GOOGLE_SIGN_IN_METHOD="google.com";ir.PROVIDER_ID="google.com";class or extends co{constructor(){super("github.com")}static credential(e){return Kr._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";class ar extends co{constructor(){super("twitter.com")}static credential(e,n){return Kr._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";async function lR(t,e){return ao(t,"POST","/v1/accounts:signUp",Ar(t,e))}class zr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Kt._fromIdTokenResponse(e,r,s),o=cd(r);return new zr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=cd(r);return new zr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function cd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ha extends $n{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ha.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ha(e,n,r,s)}}function Pg(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ha._fromErrorAndOperation(t,i,e,r):i})}async function uR(t,e,n=!1){const r=await Hi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zr._forOperation(t,"link",r)}async function hR(t,e,n=!1){const{auth:r}=t;if(Lt(r.app))return Promise.reject(On(r));const s="reauthenticate";try{const i=await Hi(t,Pg(r,s,e,t),n);oe(i.idToken,r,"internal-error");const o=hu(i.idToken);oe(o,r,"internal-error");const{sub:c}=o;return oe(t.uid===c,r,"user-mismatch"),zr._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&en(r,"user-mismatch"),i}}async function Ng(t,e,n=!1){if(Lt(t.app))return Promise.reject(On(t));const r="signIn",s=await Pg(t,r,e),i=await zr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function fR(t,e){return Ng(Xr(t),e)}async function kg(t){const e=Xr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dR(t,e,n){if(Lt(t.app))return Promise.reject(On(t));const r=Xr(t),o=await gl(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&kg(t),l}),c=await zr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function pR(t,e,n){return Lt(t.app)?Promise.reject(On(t)):fR(St(t),qs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kg(t),r})}function mR(t,e,n,r){return St(t).onIdTokenChanged(e,n,r)}function gR(t,e,n){return St(t).beforeAuthStateChanged(e,n)}const fa="__sak";class Vg{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fa,"1"),this.storage.removeItem(fa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const _R=1e3,yR=10;class Dg extends Vg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);LA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,yR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_R)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dg.type="LOCAL";const ER=Dg;class Og extends Vg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Og.type="SESSION";const xg=Og;function vR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class qa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new qa(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await vR(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qa.receivers=[];function mu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class TR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=mu("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function mn(){return window}function IR(t){mn().location.href=t}function Mg(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}async function wR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AR(){return navigator?.serviceWorker?.controller||null}function RR(){return Mg()?self:null}const Lg="firebaseLocalStorageDb",bR=1,da="firebaseLocalStorage",Fg="fbase_key";class lo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $a(t,e){return t.transaction([da],e?"readwrite":"readonly").objectStore(da)}function SR(){const t=indexedDB.deleteDatabase(Lg);return new lo(t).toPromise()}function _l(){const t=indexedDB.open(Lg,bR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(da,{keyPath:Fg})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(da)?e(r):(r.close(),await SR(),e(await _l()))})})}async function ld(t,e,n){const r=$a(t,!0).put({[Fg]:e,value:n});return new lo(r).toPromise()}async function CR(t,e){const n=$a(t,!1).get(e),r=await new lo(n).toPromise();return r===void 0?null:r.value}function ud(t,e){const n=$a(t,!0).delete(e);return new lo(n).toPromise()}const PR=800,NR=3;class Ug{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _l(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qa._getInstance(RR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await wR(),!this.activeServiceWorker)return;this.sender=new TR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _l();return await ld(e,fa,"1"),await ud(e,fa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ld(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>CR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ud(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=$a(s,!1).getAll();return new lo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ug.type="LOCAL";const kR=Ug;new oo(3e4,6e4);function VR(t,e){return e?Dn(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class gu extends du{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DR(t){return Ng(t.auth,new gu(t),t.bypassAuthState)}function OR(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),hR(n,new gu(t),t.bypassAuthState)}async function xR(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),uR(n,new gu(t),t.bypassAuthState)}class Bg{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DR;case"linkViaPopup":case"linkViaRedirect":return xR;case"reauthViaPopup":case"reauthViaRedirect":return OR;default:en(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const MR=new oo(2e3,1e4);class ms extends Bg{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Un(this.filter.length===1,"Popup operations only handle one event");const e=mu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MR.get())};e()}}ms.currentPopupAction=null;const LR="pendingRedirect",Ho=new Map;class FR extends Bg{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ho.get(this.auth._key());if(!e){try{const r=await UR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ho.set(this.auth._key(),e)}return this.bypassAuthState||Ho.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UR(t,e){const n=qR(e),r=jR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function BR(t,e){Ho.set(t._key(),e)}function jR(t){return Dn(t._redirectPersistence)}function qR(t){return $o(LR,t.config.apiKey,t.name)}async function $R(t,e,n=!1){if(Lt(t.app))return Promise.reject(On(t));const r=Xr(t),s=VR(r,e),o=await new FR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const HR=600*1e3;class WR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!jg(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(pn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HR&&this.cachedEventUids.clear(),this.cachedEventUids.has(hd(e))}saveEventToCache(e){this.cachedEventUids.add(hd(e)),this.lastProcessedEventTime=Date.now()}}function hd(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jg({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function GR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jg(t);default:return!1}}async function KR(t,e={}){return Rr(t,"GET","/v1/projects",e)}const zR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QR=/^https?/;async function JR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KR(t);for(const n of e)try{if(YR(n))return}catch{}en(t,"unauthorized-domain")}function YR(t){const e=pl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!QR.test(n))return!1;if(zR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const XR=new oo(3e4,6e4);function fd(){const t=mn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ZR(t){return new Promise((e,n)=>{function r(){fd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fd(),n(pn(t,"network-request-failed"))},timeout:XR.get()})}if(mn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mn().gapi?.load)r();else{const s=GA("iframefcb");return mn()[s]=()=>{gapi.load?r():n(pn(t,"network-request-failed"))},Rg(`${WA()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw Wo=null,e})}let Wo=null;function eb(t){return Wo=Wo||ZR(t),Wo}const tb=new oo(5e3,15e3),nb="__/auth/iframe",rb="emulator/auth/iframe",sb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ib=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ob(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?uu(e,rb):`https://${t.config.authDomain}/${nb}`,r={apiKey:e.apiKey,appName:t.name,v:js},s=ib.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${io(r).slice(1)}`}async function ab(t){const e=await eb(t),n=mn().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:ob(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sb,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=pn(t,"network-request-failed"),c=mn().setTimeout(()=>{i(o)},tb.get());function l(){mn().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const cb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lb=500,ub=600,hb="_blank",fb="http://localhost";class dd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function db(t,e,n,r=lb,s=ub){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...cb,width:r.toString(),height:s.toString(),top:i,left:o},u=mt().toLowerCase();n&&(c=yg(u)?hb:n),gg(u)&&(e=e||fb,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[v,P])=>`${m}${v}=${P},`,"");if(MA(u)&&c!=="_self")return pb(e||"",c),new dd(null);const p=window.open(e||"",c,f);oe(p,t,"popup-blocked");try{p.focus()}catch{}return new dd(p)}function pb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const mb="__/auth/handler",gb="emulator/auth/handler",_b=encodeURIComponent("fac");async function pd(t,e,n,r,s,i){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:js,eventId:s};if(e instanceof Cg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sw(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof co){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${_b}=${encodeURIComponent(l)}`:"";return`${yb(t)}?${io(c).slice(1)}${u}`}function yb({config:t}){return t.emulator?uu(t,gb):`https://${t.authDomain}/${mb}`}const Bc="webStorageSupport";class Eb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xg,this._completeRedirectFn=$R,this._overrideRedirectResult=BR}async _openPopup(e,n,r,s){Un(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await pd(e,n,r,pl(),s);return db(e,i,mu())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await pd(e,n,r,pl(),s);return IR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Un(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ab(e),r=new WR(e);return n.register("authEvent",s=>(oe(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bc,{type:Bc},s=>{const i=s?.[0]?.[Bc];i!==void 0&&n(!!i),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wg()||_g()||fu()}}const vb=Eb;var md="@firebase/auth",gd="1.12.0";class Tb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ib(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wb(t){Vs(new Gr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ag(t)},u=new qA(r,s,i,l);return XA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vs(new Gr("auth-internal",e=>{const n=Xr(e.getProvider("auth").getImmediate());return(r=>new Tb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(md,gd,Ib(t)),dr(md,gd,"esm2020")}const Ab=300,Rb=Zm("authIdTokenMaxAge")||Ab;let _d=null;const bb=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Rb)return;const s=n?.token;_d!==s&&(_d=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Sb(t=ig()){const e=cu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YA(t,{popupRedirectResolver:vb,persistence:[kR,ER,xg]}),r=Zm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=bb(i.toString());gR(n,o,()=>o(n.currentUser)),mR(n,c=>o(c))}}const s=Ym("auth");return s&&ZA(n,`http://${s}`),n}function Cb(){return document.getElementsByTagName("head")?.[0]??document}$A({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=pn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Cb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wb("Browser");var Pb="firebase",Nb="12.8.0";dr(Pb,Nb,"app");var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pr,qg;(function(){var t;function e(R,T){function _(){}_.prototype=T.prototype,R.F=T.prototype,R.prototype=new _,R.prototype.constructor=R,R.D=function(b,A,w){for(var y=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)y[Te-2]=arguments[Te];return T.prototype[A].apply(b,y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,T,_){_||(_=0);const b=Array(16);if(typeof T=="string")for(var A=0;A<16;++A)b[A]=T.charCodeAt(_++)|T.charCodeAt(_++)<<8|T.charCodeAt(_++)<<16|T.charCodeAt(_++)<<24;else for(A=0;A<16;++A)b[A]=T[_++]|T[_++]<<8|T[_++]<<16|T[_++]<<24;T=R.g[0],_=R.g[1],A=R.g[2];let w=R.g[3],y;y=T+(w^_&(A^w))+b[0]+3614090360&4294967295,T=_+(y<<7&4294967295|y>>>25),y=w+(A^T&(_^A))+b[1]+3905402710&4294967295,w=T+(y<<12&4294967295|y>>>20),y=A+(_^w&(T^_))+b[2]+606105819&4294967295,A=w+(y<<17&4294967295|y>>>15),y=_+(T^A&(w^T))+b[3]+3250441966&4294967295,_=A+(y<<22&4294967295|y>>>10),y=T+(w^_&(A^w))+b[4]+4118548399&4294967295,T=_+(y<<7&4294967295|y>>>25),y=w+(A^T&(_^A))+b[5]+1200080426&4294967295,w=T+(y<<12&4294967295|y>>>20),y=A+(_^w&(T^_))+b[6]+2821735955&4294967295,A=w+(y<<17&4294967295|y>>>15),y=_+(T^A&(w^T))+b[7]+4249261313&4294967295,_=A+(y<<22&4294967295|y>>>10),y=T+(w^_&(A^w))+b[8]+1770035416&4294967295,T=_+(y<<7&4294967295|y>>>25),y=w+(A^T&(_^A))+b[9]+2336552879&4294967295,w=T+(y<<12&4294967295|y>>>20),y=A+(_^w&(T^_))+b[10]+4294925233&4294967295,A=w+(y<<17&4294967295|y>>>15),y=_+(T^A&(w^T))+b[11]+2304563134&4294967295,_=A+(y<<22&4294967295|y>>>10),y=T+(w^_&(A^w))+b[12]+1804603682&4294967295,T=_+(y<<7&4294967295|y>>>25),y=w+(A^T&(_^A))+b[13]+4254626195&4294967295,w=T+(y<<12&4294967295|y>>>20),y=A+(_^w&(T^_))+b[14]+2792965006&4294967295,A=w+(y<<17&4294967295|y>>>15),y=_+(T^A&(w^T))+b[15]+1236535329&4294967295,_=A+(y<<22&4294967295|y>>>10),y=T+(A^w&(_^A))+b[1]+4129170786&4294967295,T=_+(y<<5&4294967295|y>>>27),y=w+(_^A&(T^_))+b[6]+3225465664&4294967295,w=T+(y<<9&4294967295|y>>>23),y=A+(T^_&(w^T))+b[11]+643717713&4294967295,A=w+(y<<14&4294967295|y>>>18),y=_+(w^T&(A^w))+b[0]+3921069994&4294967295,_=A+(y<<20&4294967295|y>>>12),y=T+(A^w&(_^A))+b[5]+3593408605&4294967295,T=_+(y<<5&4294967295|y>>>27),y=w+(_^A&(T^_))+b[10]+38016083&4294967295,w=T+(y<<9&4294967295|y>>>23),y=A+(T^_&(w^T))+b[15]+3634488961&4294967295,A=w+(y<<14&4294967295|y>>>18),y=_+(w^T&(A^w))+b[4]+3889429448&4294967295,_=A+(y<<20&4294967295|y>>>12),y=T+(A^w&(_^A))+b[9]+568446438&4294967295,T=_+(y<<5&4294967295|y>>>27),y=w+(_^A&(T^_))+b[14]+3275163606&4294967295,w=T+(y<<9&4294967295|y>>>23),y=A+(T^_&(w^T))+b[3]+4107603335&4294967295,A=w+(y<<14&4294967295|y>>>18),y=_+(w^T&(A^w))+b[8]+1163531501&4294967295,_=A+(y<<20&4294967295|y>>>12),y=T+(A^w&(_^A))+b[13]+2850285829&4294967295,T=_+(y<<5&4294967295|y>>>27),y=w+(_^A&(T^_))+b[2]+4243563512&4294967295,w=T+(y<<9&4294967295|y>>>23),y=A+(T^_&(w^T))+b[7]+1735328473&4294967295,A=w+(y<<14&4294967295|y>>>18),y=_+(w^T&(A^w))+b[12]+2368359562&4294967295,_=A+(y<<20&4294967295|y>>>12),y=T+(_^A^w)+b[5]+4294588738&4294967295,T=_+(y<<4&4294967295|y>>>28),y=w+(T^_^A)+b[8]+2272392833&4294967295,w=T+(y<<11&4294967295|y>>>21),y=A+(w^T^_)+b[11]+1839030562&4294967295,A=w+(y<<16&4294967295|y>>>16),y=_+(A^w^T)+b[14]+4259657740&4294967295,_=A+(y<<23&4294967295|y>>>9),y=T+(_^A^w)+b[1]+2763975236&4294967295,T=_+(y<<4&4294967295|y>>>28),y=w+(T^_^A)+b[4]+1272893353&4294967295,w=T+(y<<11&4294967295|y>>>21),y=A+(w^T^_)+b[7]+4139469664&4294967295,A=w+(y<<16&4294967295|y>>>16),y=_+(A^w^T)+b[10]+3200236656&4294967295,_=A+(y<<23&4294967295|y>>>9),y=T+(_^A^w)+b[13]+681279174&4294967295,T=_+(y<<4&4294967295|y>>>28),y=w+(T^_^A)+b[0]+3936430074&4294967295,w=T+(y<<11&4294967295|y>>>21),y=A+(w^T^_)+b[3]+3572445317&4294967295,A=w+(y<<16&4294967295|y>>>16),y=_+(A^w^T)+b[6]+76029189&4294967295,_=A+(y<<23&4294967295|y>>>9),y=T+(_^A^w)+b[9]+3654602809&4294967295,T=_+(y<<4&4294967295|y>>>28),y=w+(T^_^A)+b[12]+3873151461&4294967295,w=T+(y<<11&4294967295|y>>>21),y=A+(w^T^_)+b[15]+530742520&4294967295,A=w+(y<<16&4294967295|y>>>16),y=_+(A^w^T)+b[2]+3299628645&4294967295,_=A+(y<<23&4294967295|y>>>9),y=T+(A^(_|~w))+b[0]+4096336452&4294967295,T=_+(y<<6&4294967295|y>>>26),y=w+(_^(T|~A))+b[7]+1126891415&4294967295,w=T+(y<<10&4294967295|y>>>22),y=A+(T^(w|~_))+b[14]+2878612391&4294967295,A=w+(y<<15&4294967295|y>>>17),y=_+(w^(A|~T))+b[5]+4237533241&4294967295,_=A+(y<<21&4294967295|y>>>11),y=T+(A^(_|~w))+b[12]+1700485571&4294967295,T=_+(y<<6&4294967295|y>>>26),y=w+(_^(T|~A))+b[3]+2399980690&4294967295,w=T+(y<<10&4294967295|y>>>22),y=A+(T^(w|~_))+b[10]+4293915773&4294967295,A=w+(y<<15&4294967295|y>>>17),y=_+(w^(A|~T))+b[1]+2240044497&4294967295,_=A+(y<<21&4294967295|y>>>11),y=T+(A^(_|~w))+b[8]+1873313359&4294967295,T=_+(y<<6&4294967295|y>>>26),y=w+(_^(T|~A))+b[15]+4264355552&4294967295,w=T+(y<<10&4294967295|y>>>22),y=A+(T^(w|~_))+b[6]+2734768916&4294967295,A=w+(y<<15&4294967295|y>>>17),y=_+(w^(A|~T))+b[13]+1309151649&4294967295,_=A+(y<<21&4294967295|y>>>11),y=T+(A^(_|~w))+b[4]+4149444226&4294967295,T=_+(y<<6&4294967295|y>>>26),y=w+(_^(T|~A))+b[11]+3174756917&4294967295,w=T+(y<<10&4294967295|y>>>22),y=A+(T^(w|~_))+b[2]+718787259&4294967295,A=w+(y<<15&4294967295|y>>>17),y=_+(w^(A|~T))+b[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(A+(y<<21&4294967295|y>>>11))&4294967295,R.g[2]=R.g[2]+A&4294967295,R.g[3]=R.g[3]+w&4294967295}r.prototype.v=function(R,T){T===void 0&&(T=R.length);const _=T-this.blockSize,b=this.C;let A=this.h,w=0;for(;w<T;){if(A==0)for(;w<=_;)s(this,R,w),w+=this.blockSize;if(typeof R=="string"){for(;w<T;)if(b[A++]=R.charCodeAt(w++),A==this.blockSize){s(this,b),A=0;break}}else for(;w<T;)if(b[A++]=R[w++],A==this.blockSize){s(this,b),A=0;break}}this.h=A,this.o+=T},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var _=R.length-8;_<R.length;++_)R[_]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,_=0;_<4;++_)for(let b=0;b<32;b+=8)R[T++]=this.g[_]>>>b&255;return R};function i(R,T){var _=c;return Object.prototype.hasOwnProperty.call(_,R)?_[R]:_[R]=T(R)}function o(R,T){this.h=T;const _=[];let b=!0;for(let A=R.length-1;A>=0;A--){const w=R[A]|0;b&&w==T||(_[A]=w,b=!1)}this.g=_}var c={};function l(R){return-128<=R&&R<128?i(R,function(T){return new o([T|0],T<0?-1:0)}):new o([R|0],R<0?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return F(u(-R));const T=[];let _=1;for(let b=0;R>=_;b++)T[b]=R/_|0,_*=4294967296;return new o(T,0)}function f(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return F(f(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=u(Math.pow(T,8));let b=p;for(let w=0;w<R.length;w+=8){var A=Math.min(8,R.length-w);const y=parseInt(R.substring(w,w+A),T);A<8?(A=u(Math.pow(T,A)),b=b.j(A).add(u(y))):(b=b.j(_),b=b.add(u(y)))}return b}var p=l(0),m=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-F(this).m();let R=0,T=1;for(let _=0;_<this.g.length;_++){const b=this.i(_);R+=(b>=0?b:4294967296+b)*T,T*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(P(this))return"0";if(k(this))return"-"+F(this).toString(R);const T=u(Math.pow(R,6));var _=this;let b="";for(;;){const A=G(_,T).g;_=$(_,A.j(T));let w=((_.g.length>0?_.g[0]:_.h)>>>0).toString(R);if(_=A,P(_))return w+b;for(;w.length<6;)w="0"+w;b=w+b}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function P(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function k(R){return R.h==-1}t.l=function(R){return R=$(this,R),k(R)?-1:P(R)?0:1};function F(R){const T=R.g.length,_=[];for(let b=0;b<T;b++)_[b]=~R.g[b];return new o(_,~R.h).add(m)}t.abs=function(){return k(this)?F(this):this},t.add=function(R){const T=Math.max(this.g.length,R.g.length),_=[];let b=0;for(let A=0;A<=T;A++){let w=b+(this.i(A)&65535)+(R.i(A)&65535),y=(w>>>16)+(this.i(A)>>>16)+(R.i(A)>>>16);b=y>>>16,w&=65535,y&=65535,_[A]=y<<16|w}return new o(_,_[_.length-1]&-2147483648?-1:0)};function $(R,T){return R.add(F(T))}t.j=function(R){if(P(this)||P(R))return p;if(k(this))return k(R)?F(this).j(F(R)):F(F(this).j(R));if(k(R))return F(this.j(F(R)));if(this.l(v)<0&&R.l(v)<0)return u(this.m()*R.m());const T=this.g.length+R.g.length,_=[];for(var b=0;b<2*T;b++)_[b]=0;for(b=0;b<this.g.length;b++)for(let A=0;A<R.g.length;A++){const w=this.i(b)>>>16,y=this.i(b)&65535,Te=R.i(A)>>>16,Be=R.i(A)&65535;_[2*b+2*A]+=y*Be,j(_,2*b+2*A),_[2*b+2*A+1]+=w*Be,j(_,2*b+2*A+1),_[2*b+2*A+1]+=y*Te,j(_,2*b+2*A+1),_[2*b+2*A+2]+=w*Te,j(_,2*b+2*A+2)}for(R=0;R<T;R++)_[R]=_[2*R+1]<<16|_[2*R];for(R=T;R<2*T;R++)_[R]=0;return new o(_,0)};function j(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function H(R,T){this.g=R,this.h=T}function G(R,T){if(P(T))throw Error("division by zero");if(P(R))return new H(p,p);if(k(R))return T=G(F(R),T),new H(F(T.g),F(T.h));if(k(T))return T=G(R,F(T)),new H(F(T.g),T.h);if(R.g.length>30){if(k(R)||k(T))throw Error("slowDivide_ only works with positive integers.");for(var _=m,b=T;b.l(R)<=0;)_=ce(_),b=ce(b);var A=le(_,1),w=le(b,1);for(b=le(b,2),_=le(_,2);!P(b);){var y=w.add(b);y.l(R)<=0&&(A=A.add(_),w=y),b=le(b,1),_=le(_,1)}return T=$(R,A.j(T)),new H(A,T)}for(A=p;R.l(T)>=0;){for(_=Math.max(1,Math.floor(R.m()/T.m())),b=Math.ceil(Math.log(_)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),w=u(_),y=w.j(T);k(y)||y.l(R)>0;)_-=b,w=u(_),y=w.j(T);P(w)&&(w=m),A=A.add(w),R=$(R,y)}return new H(A,R)}t.B=function(R){return G(this,R).h},t.and=function(R){const T=Math.max(this.g.length,R.g.length),_=[];for(let b=0;b<T;b++)_[b]=this.i(b)&R.i(b);return new o(_,this.h&R.h)},t.or=function(R){const T=Math.max(this.g.length,R.g.length),_=[];for(let b=0;b<T;b++)_[b]=this.i(b)|R.i(b);return new o(_,this.h|R.h)},t.xor=function(R){const T=Math.max(this.g.length,R.g.length),_=[];for(let b=0;b<T;b++)_[b]=this.i(b)^R.i(b);return new o(_,this.h^R.h)};function ce(R){const T=R.g.length+1,_=[];for(let b=0;b<T;b++)_[b]=R.i(b)<<1|R.i(b-1)>>>31;return new o(_,R.h)}function le(R,T){const _=T>>5;T%=32;const b=R.g.length-_,A=[];for(let w=0;w<b;w++)A[w]=T>0?R.i(w+_)>>>T|R.i(w+_+1)<<32-T:R.i(w+_);return new o(A,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,qg=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,pr=o}).apply(typeof yd<"u"?yd:typeof self<"u"?self:typeof window<"u"?window:{});var Vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $g,gi,Hg,Go,yl,Wg,Gg,Kg;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vo=="object"&&Vo];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in d))break e;d=d[C]}a=a[a.length-1],g=d[a],h=h(g),h!=g&&h!=null&&e(d,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var d=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&d.push([g,h[g]]);return d}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,d){return a.call.apply(a.bind,arguments)}function u(a,h,d){return u=l,u.apply(null,arguments)}function f(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,h){function d(){}d.prototype=h.prototype,a.Z=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(g,C,N){for(var W=Array(arguments.length-2),de=2;de<arguments.length;de++)W[de-2]=arguments[de];return h.prototype[C].apply(g,W)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function v(a){const h=a.length;if(h>0){const d=Array(h);for(let g=0;g<h;g++)d[g]=a[g];return d}return[]}function P(a,h){for(let g=1;g<arguments.length;g++){const C=arguments[g];var d=typeof C;if(d=d!="object"?d:C?Array.isArray(C)?"array":d:"null",d=="array"||d=="object"&&typeof C.length=="number"){d=a.length||0;const N=C.length||0;a.length=d+N;for(let W=0;W<N;W++)a[d+W]=C[W]}else a.push(C)}}class k{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function F(a){o.setTimeout(()=>{throw a},0)}function $(){var a=R;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class j{constructor(){this.h=this.g=null}add(h,d){const g=H.get();g.set(h,d),this.h?this.h.next=g:this.g=g,this.h=g}}var H=new k(()=>new G,a=>a.reset());class G{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,le=!1,R=new j,T=()=>{const a=Promise.resolve(void 0);ce=()=>{a.then(_)}};function _(){for(var a;a=$();){try{a.h.call(a.g)}catch(d){F(d)}var h=H;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}le=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var w=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,h),o.removeEventListener("test",d,h)}catch{}return a})();function y(a){return/^[\s\xa0]*$/.test(a)}function Te(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(Te,A),Te.prototype.init=function(a,h){const d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Be="closure_listenable_"+(Math.random()*1e6|0),Me=0;function Ae(a,h,d,g,C){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!g,this.ha=C,this.key=++Me,this.da=this.fa=!1}function Ee(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function wt(a,h,d){for(const g in a)h.call(d,a[g],g,a)}function nn(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function Ct(a){const h={};for(const d in a)h[d]=a[d];return h}const et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function In(a,h){let d,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(d in g)a[d]=g[d];for(let N=0;N<et.length;N++)d=et[N],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function $t(a){this.src=a,this.g={},this.h=0}$t.prototype.add=function(a,h,d,g,C){const N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);const W=it(a,h,g,C);return W>-1?(h=a[W],d||(h.fa=!1)):(h=new Ae(h,this.src,N,!!g,C),h.fa=d,a.push(h)),h};function Ht(a,h){const d=h.type;if(d in a.g){var g=a.g[d],C=Array.prototype.indexOf.call(g,h,void 0),N;(N=C>=0)&&Array.prototype.splice.call(g,C,1),N&&(Ee(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function it(a,h,d,g){for(let C=0;C<a.length;++C){const N=a[C];if(!N.da&&N.listener==h&&N.capture==!!d&&N.ha==g)return C}return-1}var O="closure_lm_"+(Math.random()*1e6|0),X={};function z(a,h,d,g,C){if(Array.isArray(h)){for(let N=0;N<h.length;N++)z(a,h[N],d,g,C);return null}return d=K(d),a&&a[Be]?a.J(h,d,c(g)?!!g.capture:!1,C):ee(a,h,d,!1,g,C)}function ee(a,h,d,g,C,N){if(!h)throw Error("Invalid event type");const W=c(C)?!!C.capture:!!C;let de=L(a);if(de||(a[O]=de=new $t(a)),d=de.add(h,d,g,W,N),d.proxy)return d;if(g=me(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)w||(C=W),C===void 0&&(C=!1),a.addEventListener(h.toString(),g,C);else if(a.attachEvent)a.attachEvent(S(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function me(){function a(d){return h.call(a.src,a.listener,d)}const h=V;return a}function E(a,h,d,g,C){if(Array.isArray(h))for(var N=0;N<h.length;N++)E(a,h[N],d,g,C);else g=c(g)?!!g.capture:!!g,d=K(d),a&&a[Be]?(a=a.i,N=String(h).toString(),N in a.g&&(h=a.g[N],d=it(h,d,g,C),d>-1&&(Ee(h[d]),Array.prototype.splice.call(h,d,1),h.length==0&&(delete a.g[N],a.h--)))):a&&(a=L(a))&&(h=a.g[h.toString()],a=-1,h&&(a=it(h,d,g,C)),(d=a>-1?h[a]:null)&&I(d))}function I(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Be])Ht(h.i,a);else{var d=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(d,g,a.capture):h.detachEvent?h.detachEvent(S(d),g):h.addListener&&h.removeListener&&h.removeListener(g),(d=L(h))?(Ht(d,a),d.h==0&&(d.src=null,h[O]=null)):Ee(a)}}}function S(a){return a in X?X[a]:X[a]="on"+a}function V(a,h){if(a.da)a=!0;else{h=new Te(h,this);const d=a.listener,g=a.ha||a.src;a.fa&&I(a),a=d.call(g,h)}return a}function L(a){return a=a[O],a instanceof $t?a:null}var D="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(a){return typeof a=="function"?a:(a[D]||(a[D]=function(h){return a.handleEvent(h)}),a[D])}function q(){b.call(this),this.i=new $t(this),this.M=this,this.G=null}p(q,b),q.prototype[Be]=!0,q.prototype.removeEventListener=function(a,h,d,g){E(this,a,h,d,g)};function B(a,h){var d,g=a.G;if(g)for(d=[];g;g=g.G)d.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var C=h;h=new A(g,a),In(h,C)}C=!0;let N,W;if(d)for(W=d.length-1;W>=0;W--)N=h.g=d[W],C=U(N,g,!0,h)&&C;if(N=h.g=a,C=U(N,g,!0,h)&&C,C=U(N,g,!1,h)&&C,d)for(W=0;W<d.length;W++)N=h.g=d[W],C=U(N,g,!1,h)&&C}q.prototype.N=function(){if(q.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const d=a.g[h];for(let g=0;g<d.length;g++)Ee(d[g]);delete a.g[h],a.h--}}this.G=null},q.prototype.J=function(a,h,d,g){return this.i.add(String(a),h,!1,d,g)},q.prototype.K=function(a,h,d,g){return this.i.add(String(a),h,!0,d,g)};function U(a,h,d,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let C=!0;for(let N=0;N<h.length;++N){const W=h[N];if(W&&!W.da&&W.capture==d){const de=W.listener,Ge=W.ha||W.src;W.fa&&Ht(a.i,W),C=de.call(Ge,g)!==!1&&C}}return C&&!g.defaultPrevented}function re(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function J(a){a.g=re(()=>{a.g=null,a.i&&(a.i=!1,J(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class te extends b{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ie(a){b.call(this),this.h=a,this.g={}}p(ie,b);var pe=[];function Ce(a){wt(a.g,function(h,d){this.g.hasOwnProperty(d)&&I(h)},a),a.g={}}ie.prototype.N=function(){ie.Z.N.call(this),Ce(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ie=o.JSON.stringify,ot=o.JSON.parse,at=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Pt(){}function Nt(){}var Wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ss(){A.call(this,"d")}p(ss,A);function tt(){A.call(this,"c")}p(tt,A);var Ye={},zs=null;function br(){return zs=zs||new q}Ye.Ia="serverreachability";function Yu(a){A.call(this,Ye.Ia,a)}p(Yu,A);function Qs(a){const h=br();B(h,new Yu(h))}Ye.STAT_EVENT="statevent";function Xu(a,h){A.call(this,Ye.STAT_EVENT,a),this.stat=h}p(Xu,A);function gt(a){const h=br();B(h,new Xu(h,a))}Ye.Ja="timingevent";function Zu(a,h){A.call(this,Ye.Ja,a),this.size=h}p(Zu,A);function Js(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function Ys(){this.g=!0}Ys.prototype.ua=function(){this.g=!1};function Iy(a,h,d,g,C,N){a.info(function(){if(a.g)if(N){var W="",de=N.split("&");for(let Ne=0;Ne<de.length;Ne++){var Ge=de[Ne].split("=");if(Ge.length>1){const Xe=Ge[0];Ge=Ge[1];const sn=Xe.split("_");W=sn.length>=2&&sn[1]=="type"?W+(Xe+"="+Ge+"&"):W+(Xe+"=redacted&")}}}else W=null;else W=N;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+h+`
`+d+`
`+W})}function wy(a,h,d,g,C,N,W){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+h+`
`+d+`
`+N+" "+W})}function is(a,h,d,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Ry(a,d)+(g?" "+g:"")})}function Ay(a,h){a.info(function(){return"TIMEOUT: "+h})}Ys.prototype.info=function(){};function Ry(a,h){if(!a.g)return h;if(!h)return null;try{const N=JSON.parse(h);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var d=N[a];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var C=g[0];if(C!="noop"&&C!="stop"&&C!="close")for(let W=1;W<g.length;W++)g[W]=""}}}}return Ie(N)}catch{return h}}var go={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},eh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},th;function sc(){}p(sc,Pt),sc.prototype.g=function(){return new XMLHttpRequest},th=new sc;function Xs(a){return encodeURIComponent(String(a))}function by(a){var h=1;a=a.split(":");const d=[];for(;h>0&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function Hn(a,h,d,g){this.j=a,this.i=h,this.l=d,this.S=g||1,this.V=new ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new nh}function nh(){this.i=null,this.g="",this.h=!1}var rh={},ic={};function oc(a,h,d){a.M=1,a.A=yo(rn(h)),a.u=d,a.R=!0,sh(a,null)}function sh(a,h){a.F=Date.now(),_o(a),a.B=rn(a.A);var d=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),_h(d.i,"t",g),a.C=0,d=a.j.L,a.h=new nh,a.g=xh(a.j,d?h:null,!a.u),a.P>0&&(a.O=new te(u(a.Y,a,a.g),a.P)),h=a.V,d=a.g,g=a.ba;var C="readystatechange";Array.isArray(C)||(C&&(pe[0]=C.toString()),C=pe);for(let N=0;N<C.length;N++){const W=z(d,C[N],g||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=a.J?Ct(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Qs(),Iy(a.i,a.v,a.B,a.l,a.S,a.u)}Hn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Kn(a)==3?h.j():this.Y(a)},Hn.prototype.Y=function(a){try{if(a==this.g)e:{const de=Kn(this.g),Ge=this.g.ya(),Ne=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||Ah(this.g)))){this.K||de!=4||Ge==7||(Ge==8||Ne<=0?Qs(3):Qs(2)),ac(this);var h=this.g.ca();this.X=h;var d=Sy(this);if(this.o=h==200,wy(this.i,this.v,this.B,this.l,this.S,de,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,C=this.g;if((g=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(g)){var N=g;break t}}N=null}if(a=N)is(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cc(this,a);else{this.o=!1,this.m=3,gt(12),Sr(this),Zs(this);break e}}if(this.R){a=!0;let Xe;for(;!this.K&&this.C<d.length;)if(Xe=Cy(this,d),Xe==ic){de==4&&(this.m=4,gt(14),a=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(Xe==rh){this.m=4,gt(15),is(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else is(this.i,this.l,Xe,null),cc(this,Xe);if(ih(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||d.length!=0||this.h.h||(this.m=1,gt(16),a=!1),this.o=this.o&&a,!a)is(this.i,this.l,d,"[Invalid Chunked Response]"),Sr(this),Zs(this);else if(d.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),gc(W),W.P=!0,gt(11))}}else is(this.i,this.l,d,null),cc(this,d);de==4&&Sr(this),this.o&&!this.K&&(de==4?kh(this.j,this):(this.o=!1,_o(this)))}else qy(this.g),h==400&&d.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),Sr(this),Zs(this)}}}catch{}};function Sy(a){if(!ih(a))return a.g.la();const h=Ah(a.g);if(h==="")return"";let d="";const g=h.length,C=Kn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Sr(a),Zs(a),"";a.h.i=new o.TextDecoder}for(let N=0;N<g;N++)a.h.h=!0,d+=a.h.i.decode(h[N],{stream:!(C&&N==g-1)});return h.length=0,a.h.g+=d,a.C=0,a.h.g}function ih(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Cy(a,h){var d=a.C,g=h.indexOf(`
`,d);return g==-1?ic:(d=Number(h.substring(d,g)),isNaN(d)?rh:(g+=1,g+d>h.length?ic:(h=h.slice(g,g+d),a.C=g+d,h)))}Hn.prototype.cancel=function(){this.K=!0,Sr(this)};function _o(a){a.T=Date.now()+a.H,oh(a,a.H)}function oh(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Js(u(a.aa,a),h)}function ac(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Hn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Ay(this.i,this.B),this.M!=2&&(Qs(),gt(17)),Sr(this),this.m=2,Zs(this)):oh(this,this.T-a)};function Zs(a){a.j.I==0||a.K||kh(a.j,a)}function Sr(a){ac(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Ce(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function cc(a,h){try{var d=a.j;if(d.I!=0&&(d.g==a||lc(d.h,a))){if(!a.L&&lc(d.h,a)&&d.I==3){try{var g=d.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)wo(d),To(d);else break e;mc(d),gt(18)}}else d.xa=C[1],0<d.xa-d.K&&C[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Js(u(d.Va,d),6e3));lh(d.h)<=1&&d.ta&&(d.ta=void 0)}else Pr(d,11)}else if((a.L||d.g==a)&&wo(d),!y(h))for(C=d.Ba.g.parse(h),h=0;h<C.length;h++){let Ne=C[h];const Xe=Ne[0];if(!(Xe<=d.K))if(d.K=Xe,Ne=Ne[1],d.I==2)if(Ne[0]=="c"){d.M=Ne[1],d.ba=Ne[2];const sn=Ne[3];sn!=null&&(d.ka=sn,d.j.info("VER="+d.ka));const Nr=Ne[4];Nr!=null&&(d.za=Nr,d.j.info("SVER="+d.za));const zn=Ne[5];zn!=null&&typeof zn=="number"&&zn>0&&(g=1.5*zn,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const Qn=a.g;if(Qn){const Ro=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var N=g.h;N.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(uc(N,N.h),N.h=null))}if(g.G){const _c=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;_c&&(g.wa=_c,Oe(g.J,g.G,_c))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var W=a;if(g.na=Oh(g,g.L?g.ba:null,g.W),W.L){uh(g.h,W);var de=W,Ge=g.O;Ge&&(de.H=Ge),de.D&&(ac(de),_o(de)),g.g=W}else Ph(g);d.i.length>0&&Io(d)}else Ne[0]!="stop"&&Ne[0]!="close"||Pr(d,7);else d.I==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Pr(d,7):pc(d):Ne[0]!="noop"&&d.l&&d.l.qa(Ne),d.A=0)}}Qs(4)}catch{}}var Py=class{constructor(a,h){this.g=a,this.map=h}};function ah(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ch(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function lh(a){return a.h?1:a.g?a.g.size:0}function lc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function uc(a,h){a.g?a.g.add(h):a.h=h}function uh(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}ah.prototype.cancel=function(){if(this.i=hh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function hh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.G);return h}return v(a.i)}var fh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ny(a,h){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const g=a[d].indexOf("=");let C,N=null;g>=0?(C=a[d].substring(0,g),N=a[d].substring(g+1)):C=a[d],h(C,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Wn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Wn?(this.l=a.l,ei(this,a.j),this.o=a.o,this.g=a.g,ti(this,a.u),this.h=a.h,hc(this,yh(a.i)),this.m=a.m):a&&(h=String(a).match(fh))?(this.l=!1,ei(this,h[1]||"",!0),this.o=ni(h[2]||""),this.g=ni(h[3]||"",!0),ti(this,h[4]),this.h=ni(h[5]||"",!0),hc(this,h[6]||"",!0),this.m=ni(h[7]||"")):(this.l=!1,this.i=new si(null,this.l))}Wn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(ri(h,dh,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(ri(h,dh,!0),"@"),a.push(Xs(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ri(d,d.charAt(0)=="/"?Dy:Vy,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ri(d,xy)),a.join("")},Wn.prototype.resolve=function(a){const h=rn(this);let d=!!a.j;d?ei(h,a.j):d=!!a.o,d?h.o=a.o:d=!!a.g,d?h.g=a.g:d=a.u!=null;var g=a.h;if(d)ti(h,a.u);else if(d=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var C=h.h.lastIndexOf("/");C!=-1&&(g=h.h.slice(0,C+1)+g)}if(C=g,C==".."||C==".")g="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){g=C.lastIndexOf("/",0)==0,C=C.split("/");const N=[];for(let W=0;W<C.length;){const de=C[W++];de=="."?g&&W==C.length&&N.push(""):de==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),g&&W==C.length&&N.push("")):(N.push(de),g=!0)}g=N.join("/")}else g=C}return d?h.h=g:d=a.i.toString()!=="",d?hc(h,yh(a.i)):d=!!a.m,d&&(h.m=a.m),h};function rn(a){return new Wn(a)}function ei(a,h,d){a.j=d?ni(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ti(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function hc(a,h,d){h instanceof si?(a.i=h,My(a.i,a.l)):(d||(h=ri(h,Oy)),a.i=new si(h,a.l))}function Oe(a,h,d){a.i.set(h,d)}function yo(a){return Oe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ni(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ri(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,ky),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ky(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var dh=/[#\/\?@]/g,Vy=/[#\?:]/g,Dy=/[#\?]/g,Oy=/[#\?@]/g,xy=/#/g;function si(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Cr(a){a.g||(a.g=new Map,a.h=0,a.i&&Ny(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}t=si.prototype,t.add=function(a,h){Cr(this),this.i=null,a=os(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function ph(a,h){Cr(a),h=os(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function mh(a,h){return Cr(a),h=os(a,h),a.g.has(h)}t.forEach=function(a,h){Cr(this),this.g.forEach(function(d,g){d.forEach(function(C){a.call(h,C,g,this)},this)},this)};function gh(a,h){Cr(a);let d=[];if(typeof h=="string")mh(a,h)&&(d=d.concat(a.g.get(os(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)d=d.concat(a[h]);return d}t.set=function(a,h){return Cr(this),this.i=null,a=os(this,a),mh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=gh(this,a),a.length>0?String(a[0]):h):h};function _h(a,h,d){ph(a,h),d.length>0&&(a.i=null,a.g.set(os(a,h),v(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var d=h[g];const C=Xs(d);d=gh(this,d);for(let N=0;N<d.length;N++){let W=C;d[N]!==""&&(W+="="+Xs(d[N])),a.push(W)}}return this.i=a.join("&")};function yh(a){const h=new si;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function os(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function My(a,h){h&&!a.j&&(Cr(a),a.i=null,a.g.forEach(function(d,g){const C=g.toLowerCase();g!=C&&(ph(this,g),_h(this,C,d))},a)),a.j=h}function Ly(a,h){const d=new Ys;if(o.Image){const g=new Image;g.onload=f(Gn,d,"TestLoadImage: loaded",!0,h,g),g.onerror=f(Gn,d,"TestLoadImage: error",!1,h,g),g.onabort=f(Gn,d,"TestLoadImage: abort",!1,h,g),g.ontimeout=f(Gn,d,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function Fy(a,h){const d=new Ys,g=new AbortController,C=setTimeout(()=>{g.abort(),Gn(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(N=>{clearTimeout(C),N.ok?Gn(d,"TestPingServer: ok",!0,h):Gn(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Gn(d,"TestPingServer: error",!1,h)})}function Gn(a,h,d,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(d)}catch{}}function Uy(){this.g=new at}function fc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(fc,Pt),fc.prototype.g=function(){return new Eo(this.i,this.h)};function Eo(a,h){q.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Eo,q),t=Eo.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,oi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Eh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Eh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ii(this):oi(this),this.readyState==3&&Eh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ii(this))},t.Na=function(a){this.g&&(this.response=a,ii(this))},t.ga=function(){this.g&&ii(this)};function ii(a){a.readyState=4,a.l=null,a.j=null,a.B=null,oi(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function oi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function vh(a){let h="";return wt(a,function(d,g){h+=g,h+=":",h+=d,h+=`\r
`}),h}function dc(a,h,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=vh(d),typeof a=="string"?d!=null&&Xs(d):Oe(a,h,d))}function Fe(a){q.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Fe,q);var By=/^https?$/i,jy=["POST","PUT"];t=Fe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():th.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(N){Th(this,N);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)d.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())d.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),C=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(jy,h,void 0)>=0)||g||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,W]of d)this.g.setRequestHeader(N,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){Th(this,N)}};function Th(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Ih(a),vo(a)}function Ih(a){a.A||(a.A=!0,B(a,"complete"),B(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,B(this,"complete"),B(this,"abort"),vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vo(this,!0)),Fe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wh(this):this.Xa())},t.Xa=function(){wh(this)};function wh(a){if(a.h&&typeof i<"u"){if(a.v&&Kn(a)==4)setTimeout(a.Ca.bind(a),0);else if(B(a,"readystatechange"),Kn(a)==4){a.h=!1;try{const N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var g;if(g=N===0){let W=String(a.D).match(fh)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),g=!By.test(W?W.toLowerCase():"")}d=g}if(d)B(a,"complete"),B(a,"success");else{a.o=6;try{var C=Kn(a)>2?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.ca()+"]",Ih(a)}}finally{vo(a)}}}}function vo(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,h||B(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Kn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Kn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),ot(h)}};function Ah(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function qy(a){const h={};a=(a.g&&Kn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(y(a[g]))continue;var d=by(a[g]);const C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=h[C]||[];h[C]=N,N.push(d)}nn(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function Rh(a){this.za=0,this.i=[],this.j=new Ys,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ai("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ai("baseRetryDelayMs",5e3,a),this.Za=ai("retryDelaySeedMs",1e4,a),this.Ta=ai("forwardChannelMaxRetries",2,a),this.va=ai("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ah(a&&a.concurrentRequestLimit),this.Ba=new Uy,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Rh.prototype,t.ka=8,t.I=1,t.connect=function(a,h,d,g){gt(0),this.W=a,this.H=h||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=Oh(this,null,this.W),Io(this)};function pc(a){if(bh(a),a.I==3){var h=a.V++,d=rn(a.J);if(Oe(d,"SID",a.M),Oe(d,"RID",h),Oe(d,"TYPE","terminate"),ci(a,d),h=new Hn(a,a.j,h),h.M=2,h.A=yo(rn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=h.A,d=!0),d||(h.g=xh(h.j,null),h.g.ea(h.A)),h.F=Date.now(),_o(h)}Dh(a)}function To(a){a.g&&(gc(a),a.g.cancel(),a.g=null)}function bh(a){To(a),a.v&&(o.clearTimeout(a.v),a.v=null),wo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Io(a){if(!ch(a.h)&&!a.m){a.m=!0;var h=a.Ea;ce||T(),le||(ce(),le=!0),R.add(h,a),a.D=0}}function $y(a,h){return lh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Js(u(a.Ea,a,h),Vh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const C=new Hn(this,this.j,a);let N=this.o;if(this.U&&(N?(N=Ct(N),In(N,this.U)):N=this.U),this.u!==null||this.R||(C.J=N,N=null),this.S)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=Ch(this,C,h),d=rn(this.J),Oe(d,"RID",a),Oe(d,"CVER",22),this.G&&Oe(d,"X-HTTP-Session-Id",this.G),ci(this,d),N&&(this.R?h="headers="+Xs(vh(N))+"&"+h:this.u&&dc(d,this.u,N)),uc(this.h,C),this.Ra&&Oe(d,"TYPE","init"),this.S?(Oe(d,"$req",h),Oe(d,"SID","null"),C.U=!0,oc(C,d,null)):oc(C,d,h),this.I=2}}else this.I==3&&(a?Sh(this,a):this.i.length==0||ch(this.h)||Sh(this))};function Sh(a,h){var d;h?d=h.l:d=a.V++;const g=rn(a.J);Oe(g,"SID",a.M),Oe(g,"RID",d),Oe(g,"AID",a.K),ci(a,g),a.u&&a.o&&dc(g,a.u,a.o),d=new Hn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),h&&(a.i=h.G.concat(a.i)),h=Ch(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),uc(a.h,d),oc(d,g,h)}function ci(a,h){a.H&&wt(a.H,function(d,g){Oe(h,g,d)}),a.l&&wt({},function(d,g){Oe(h,g,d)})}function Ch(a,h,d){d=Math.min(a.i.length,d);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var C=a.i;let de=-1;for(;;){const Ge=["count="+d];de==-1?d>0?(de=C[0].g,Ge.push("ofs="+de)):de=0:Ge.push("ofs="+de);let Ne=!0;for(let Xe=0;Xe<d;Xe++){var N=C[Xe].g;const sn=C[Xe].map;if(N-=de,N<0)de=Math.max(0,C[Xe].g-100),Ne=!1;else try{N="req"+N+"_"||"";try{var W=sn instanceof Map?sn:Object.entries(sn);for(const[Nr,zn]of W){let Qn=zn;c(zn)&&(Qn=Ie(zn)),Ge.push(N+Nr+"="+encodeURIComponent(Qn))}}catch(Nr){throw Ge.push(N+"type="+encodeURIComponent("_badmap")),Nr}}catch{g&&g(sn)}}if(Ne){W=Ge.join("&");break e}}W=void 0}return a=a.i.splice(0,d),h.G=a,W}function Ph(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;ce||T(),le||(ce(),le=!0),R.add(h,a),a.A=0}}function mc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Js(u(a.Da,a),Vh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Nh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Js(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),To(this),Nh(this))};function gc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Nh(a){a.g=new Hn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=rn(a.na);Oe(h,"RID","rpc"),Oe(h,"SID",a.M),Oe(h,"AID",a.K),Oe(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Oe(h,"TO",a.ia),Oe(h,"TYPE","xmlhttp"),ci(a,h),a.u&&a.o&&dc(h,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=yo(rn(h)),d.u=null,d.R=!0,sh(d,a)}t.Va=function(){this.C!=null&&(this.C=null,To(this),mc(this),gt(19))};function wo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function kh(a,h){var d=null;if(a.g==h){wo(a),gc(a),a.g=null;var g=2}else if(lc(a.h,h))d=h.G,uh(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){d=h.u?h.u.length:0,h=Date.now()-h.F;var C=a.D;g=br(),B(g,new Zu(g,d)),Io(a)}else Ph(a);else if(C=h.m,C==3||C==0&&h.X>0||!(g==1&&$y(a,h)||g==2&&mc(a)))switch(d&&d.length>0&&(h=a.h,h.i=h.i.concat(d)),C){case 1:Pr(a,5);break;case 4:Pr(a,10);break;case 3:Pr(a,6);break;default:Pr(a,2)}}}function Vh(a,h){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*h}function Pr(a,h){if(a.j.info("Error code "+h),h==2){var d=u(a.bb,a),g=a.Ua;const C=!g;g=new Wn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ei(g,"https"),yo(g),C?Ly(g.toString(),d):Fy(g.toString(),d)}else gt(2);a.I=0,a.l&&a.l.pa(h),Dh(a),bh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Dh(a){if(a.I=0,a.ja=[],a.l){const h=hh(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ja,h),P(a.ja,a.i),a.h.i.length=0,v(a.i),a.i.length=0),a.l.oa()}}function Oh(a,h,d){var g=d instanceof Wn?rn(d):new Wn(d);if(g.g!="")h&&(g.g=h+"."+g.g),ti(g,g.u);else{var C=o.location;g=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;const N=new Wn(null);g&&ei(N,g),h&&(N.g=h),C&&ti(N,C),d&&(N.h=d),g=N}return d=a.G,h=a.wa,d&&h&&Oe(g,d,h),Oe(g,"VER",a.ka),ci(a,g),g}function xh(a,h,d){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Fe(new fc({ab:d})):new Fe(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mh(){}t=Mh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ao(){}Ao.prototype.g=function(a,h){return new kt(a,h)};function kt(a,h){q.call(this),this.g=new Rh(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!y(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!y(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new as(this)}p(kt,q),kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){pc(this.g)},kt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Ie(a),a=d);h.i.push(new Py(h.Ya++,a)),h.I==3&&Io(h)},kt.prototype.N=function(){this.g.l=null,delete this.j,pc(this.g),delete this.g,kt.Z.N.call(this)};function Lh(a){ss.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const d in h){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(Lh,ss);function Fh(){tt.call(this),this.status=1}p(Fh,tt);function as(a){this.g=a}p(as,Mh),as.prototype.ra=function(){B(this.g,"a")},as.prototype.qa=function(a){B(this.g,new Lh(a))},as.prototype.pa=function(a){B(this.g,new Fh)},as.prototype.oa=function(){B(this.g,"b")},Ao.prototype.createWebChannel=Ao.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,Kg=function(){return new Ao},Gg=function(){return br()},Wg=Ye,yl={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},go.NO_ERROR=0,go.TIMEOUT=8,go.HTTP_ERROR=6,Go=go,eh.COMPLETE="complete",Hg=eh,Nt.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",q.prototype.listen=q.prototype.J,gi=Nt,Fe.prototype.listenOnce=Fe.prototype.K,Fe.prototype.getLastError=Fe.prototype.Ha,Fe.prototype.getLastErrorCode=Fe.prototype.ya,Fe.prototype.getStatus=Fe.prototype.ca,Fe.prototype.getResponseJson=Fe.prototype.La,Fe.prototype.getResponseText=Fe.prototype.la,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Fa,$g=Fe}).apply(typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{});class lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");let $s="12.8.0";function kb(t){$s=t}const Qr=new ou("@firebase/firestore");function hs(){return Qr.logLevel}function Z(t,...e){if(Qr.logLevel<=ge.DEBUG){const n=e.map(_u);Qr.debug(`Firestore (${$s}): ${t}`,...n)}}function Bn(t,...e){if(Qr.logLevel<=ge.ERROR){const n=e.map(_u);Qr.error(`Firestore (${$s}): ${t}`,...n)}}function Ds(t,...e){if(Qr.logLevel<=ge.WARN){const n=e.map(_u);Qr.warn(`Firestore (${$s}): ${t}`,...n)}}function _u(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ae(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zg(t,r,n)}function zg(t,e,n){let r=`FIRESTORE (${$s}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Bn(r),new Error(r)}function Se(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||zg(e,s,r)}function fe(t,e){return t}const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends $n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Qg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(lt.UNAUTHENTICATED)))}shutdown(){}}class Db{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Ob{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qr,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qr)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new Qg(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new lt(e)}}class xb{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Mb{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new xb(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(lt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ed{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lb{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ed(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ed(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Fb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class yu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Fb(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function El(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return jc(s)===jc(i)?_e(s,i):jc(s)?1:-1}return _e(t.length,e.length)}const Ub=55296,Bb=57343;function jc(t){const e=t.charCodeAt(0);return e>=Ub&&e<=Bb}function Os(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const vd="__name__";class cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return _e(e.length,n.length)}static compareSegments(e,n){const r=cn.isNumericId(e),s=cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?cn.extractNumericId(e).compare(cn.extractNumericId(n)):El(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pr.fromString(e.substring(4,e.length-2))}}class De extends cn{construct(e,n,r){return new De(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new De(n)}static emptyPath(){return new De([])}}const jb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends cn{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return jb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vd}static keyField(){return new rt([vd])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Y(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new Y(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}class ne{constructor(e){this.path=e}static fromPath(e){return new ne(De.fromString(e))}static fromName(e){return new ne(De.fromString(e).popFirst(5))}static empty(){return new ne(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new De(e.slice()))}}function Jg(t,e,n){if(!n)throw new Y(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qb(t,e,n,r){if(e===!0&&r===!0)throw new Y(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Td(t){if(!ne.isDocumentKey(t))throw new Y(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Id(t){if(ne.isDocumentKey(t))throw new Y(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yg(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ha(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae(12329,{type:typeof t})}function As(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ha(t);throw new Y(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function We(t,e){const n={typeString:t};return e&&(n.value=e),n}function uo(t,e){if(!Yg(t))throw new Y(x.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y(x.INVALID_ARGUMENT,n);return!0}const wd=-62135596800,Ad=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ad);return new xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wd)throw new Y(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ad}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uo(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:We("string",xe._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new xe(0,0))}static max(){return new ue(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Gi=-1;function $b(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new yr(s,ne.empty(),e)}function Hb(t){return new yr(t.readTime,t.key,Gi)}class yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yr(ue.min(),ne.empty(),Gi)}static max(){return new yr(ue.max(),ne.empty(),Gi)}}function Wb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}const Gb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Hs(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==Gb)throw t;Z("LocalStore","Unexpectedly lost primary lease")}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):M.reject(n)}static resolve(e){return new M(((n,r)=>{n(e)}))}static reject(e){return new M(((n,r)=>{r(e)}))}static waitFor(e){return new M(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next((s=>s?M.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new M(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,n){return new M(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function zb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ws(t){return t.name==="IndexedDbTransactionError"}class Wa{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wa.ce=-1;const Eu=-1;function Ga(t){return t==null}function pa(t){return t===0&&1/t==-1/0}function Qb(t){return typeof t=="number"&&Number.isInteger(t)&&!pa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Xg="";function Jb(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rd(e)),e=Yb(t.get(n),e);return Rd(e)}function Yb(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Xg:n+="";break;default:n+=i}}return n}function Rd(t){return t+Xg+""}function bd(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Le{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Do(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Do(this.root,e,this.comparator,!1)}getReverseIterator(){return new Do(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Do(this.root,e,this.comparator,!0)}}class Do{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??nt.RED,this.left=s??nt.EMPTY,this.right=i??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qe{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sd(this.data.getIterator())}getIteratorFrom(e){return new Sd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class Sd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class zt{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new zt([])}unionWith(e){let n=new Qe(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class e_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new e_("Invalid base64 string: "+i):i}})(e);return new st(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const Xb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=Xb.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vr(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}const t_="server_timestamp",n_="__type__",r_="__previous_value__",s_="__local_write_time__";function vu(t){return(t?.mapValue?.fields||{})[n_]?.stringValue===t_}function Ka(t){const e=t.mapValue.fields[r_];return vu(e)?Ka(e):e}function Ki(t){const e=Er(t.mapValue.fields[s_].timestampValue);return new xe(e.seconds,e.nanos)}class Zb{constructor(e,n,r,s,i,o,c,l,u,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f,this.apiKey=p}}const ma="(default)";class zi{constructor(e,n){this.projectId=e,this.database=n||ma}static empty(){return new zi("","")}get isDefaultDatabase(){return this.database===ma}isEqual(e){return e instanceof zi&&e.projectId===this.projectId&&e.database===this.database}}function eS(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Y(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zi(t.options.projectId,e)}const i_="__type__",tS="__max__",Oo={mapValue:{}},o_="__vector__",ga="value";function Tr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vu(t)?4:rS(t)?9007199254740991:nS(t)?10:11:ae(28295,{value:t})}function Tn(t,e){if(t===e)return!0;const n=Tr(t);if(n!==Tr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ki(t).isEqual(Ki(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Er(s.timestampValue),c=Er(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return vr(s.bytesValue).isEqual(vr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),c=je(i.doubleValue);return o===c?pa(o)===pa(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Os(t.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(bd(o)!==bd(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Tn(o[l],c[l])))return!1;return!0})(t,e);default:return ae(52216,{left:t})}}function Qi(t,e){return(t.values||[]).find((n=>Tn(n,e)))!==void 0}function xs(t,e){if(t===e)return 0;const n=Tr(t),r=Tr(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=je(i.integerValue||i.doubleValue),l=je(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return Cd(t.timestampValue,e.timestampValue);case 4:return Cd(Ki(t),Ki(e));case 5:return El(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=vr(i),l=vr(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=_e(c[u],l[u]);if(f!==0)return f}return _e(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=_e(je(i.latitude),je(o.latitude));return c!==0?c:_e(je(i.longitude),je(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Pd(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[ga]?.arrayValue,f=l[ga]?.arrayValue,p=_e(u?.values?.length||0,f?.values?.length||0);return p!==0?p:Pd(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Oo.mapValue&&o===Oo.mapValue)return 0;if(i===Oo.mapValue)return 1;if(o===Oo.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const m=El(l[p],f[p]);if(m!==0)return m;const v=xs(c[l[p]],u[f[p]]);if(v!==0)return v}return _e(l.length,f.length)})(t.mapValue,e.mapValue);default:throw ae(23264,{he:n})}}function Cd(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Er(t),r=Er(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function Pd(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=xs(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function Ms(t){return vl(t)}function vl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Er(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return vr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=vl(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${vl(n.fields[o])}`;return s+"}"})(t.mapValue):ae(61005,{value:t})}function Ko(t){switch(Tr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ka(t);return e?16+Ko(e):16;case 5:return 2*t.stringValue.length;case 6:return vr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Ko(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Zr(r.fields,((i,o)=>{s+=i.length+Ko(o)})),s})(t.mapValue);default:throw ae(13486,{value:t})}}function Nd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tl(t){return!!t&&"integerValue"in t}function Tu(t){return!!t&&"arrayValue"in t}function kd(t){return!!t&&"nullValue"in t}function Vd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zo(t){return!!t&&"mapValue"in t}function nS(t){return(t?.mapValue?.fields||{})[i_]?.stringValue===o_}function Ni(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zr(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ni(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ni(t.arrayValue.values[n]);return e}return{...t}}function rS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tS}class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ni(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Ni(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());zo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];zo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zr(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Ft(Ni(this.value))}}function a_(t){const e=[];return Zr(t.fields,((n,r)=>{const s=new rt([n]);if(zo(r)){const i=a_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new zt(e)}class ft{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ft(e,0,ue.min(),ue.min(),ue.min(),Ft.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,ue.min(),ue.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ue.min(),ue.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _a{constructor(e,n){this.position=e,this.inclusive=n}}function Dd(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=xs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Od(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tn(t.position[n],e.position[n]))return!1;return!0}class Ji{constructor(e,n="asc"){this.field=e,this.dir=n}}function sS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class c_{}class He extends c_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new oS(e,n,r):n==="array-contains"?new lS(e,r):n==="in"?new uS(e,r):n==="not-in"?new hS(e,r):n==="array-contains-any"?new fS(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aS(e,r):new cS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xs(n,this.value)):n!==null&&Tr(this.value)===Tr(n)&&this.matchesComparison(xs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tn extends c_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new tn(e,n)}matches(e){return l_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function l_(t){return t.op==="and"}function u_(t){return iS(t)&&l_(t)}function iS(t){for(const e of t.filters)if(e instanceof tn)return!1;return!0}function Il(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Ms(t.value);if(u_(t))return t.filters.map((e=>Il(e))).join(",");{const e=t.filters.map((n=>Il(n))).join(",");return`${t.op}(${e})`}}function h_(t,e){return t instanceof He?(function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&Tn(r.value,s.value)})(t,e):t instanceof tn?(function(r,s){return s instanceof tn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&h_(o,s.filters[c])),!0):!1})(t,e):void ae(19439)}function f_(t){return t instanceof He?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ms(n.value)}`})(t):t instanceof tn?(function(n){return n.op.toString()+" {"+n.getFilters().map(f_).join(" ,")+"}"})(t):"Filter"}class oS extends He{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class aS extends He{constructor(e,n){super(e,"in",n),this.keys=d_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class cS extends He{constructor(e,n){super(e,"not-in",n),this.keys=d_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function d_(t,e){return(e.arrayValue?.values||[]).map((n=>ne.fromName(n.referenceValue)))}class lS extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tu(n)&&Qi(n.arrayValue,this.value)}}class uS extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qi(this.value.arrayValue,n)}}class hS extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qi(this.value.arrayValue,n)}}class fS extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Qi(this.value.arrayValue,r)))}}class dS{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function xd(t,e=null,n=[],r=[],s=null,i=null,o=null){return new dS(t,e,n,r,s,i,o)}function Iu(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Il(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Ga(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ms(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ms(r))).join(",")),e.Te=n}return e.Te}function wu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Od(t.startAt,e.startAt)&&Od(t.endAt,e.endAt)}function wl(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Gs{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function pS(t,e,n,r,s,i,o,c){return new Gs(t,e,n,r,s,i,o,c)}function Au(t){return new Gs(t)}function Md(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mS(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function p_(t){return t.collectionGroup!==null}function ki(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Qe(rt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ji(i,r))})),n.has(rt.keyField().canonicalString())||e.Ie.push(new Ji(rt.keyField(),r))}return e.Ie}function gn(t){const e=fe(t);return e.Ee||(e.Ee=gS(e,ki(t))),e.Ee}function gS(t,e){if(t.limitType==="F")return xd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Ji(s.field,i)}));const n=t.endAt?new _a(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _a(t.startAt.position,t.startAt.inclusive):null;return xd(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Al(t,e){const n=t.filters.concat([e]);return new Gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _S(t,e){const n=t.explicitOrderBy.concat([e]);return new Gs(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Rl(t,e,n){return new Gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function za(t,e){return wu(gn(t),gn(e))&&t.limitType===e.limitType}function m_(t){return`${Iu(gn(t))}|lt:${t.limitType}`}function fs(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>f_(s))).join(", ")}]`),Ga(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Ms(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Ms(s))).join(",")),`Target(${r})`})(gn(t))}; limitType=${t.limitType})`}function Qa(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of ki(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const u=Dd(o,c,l);return o.inclusive?u<=0:u<0})(r.startAt,ki(r),s)||r.endAt&&!(function(o,c,l){const u=Dd(o,c,l);return o.inclusive?u>=0:u>0})(r.endAt,ki(r),s))})(t,e)}function yS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function g_(t){return(e,n)=>{let r=!1;for(const s of ki(t)){const i=ES(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ES(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?xs(l,u):ae(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae(19790,{direction:t.dir})}}class es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return Zg(this.inner)}size(){return this.innerSize}}const vS=new Le(ne.comparator);function jn(){return vS}const __=new Le(ne.comparator);function _i(...t){let e=__;for(const n of t)e=e.insert(n.key,n);return e}function y_(t){let e=__;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ur(){return Vi()}function E_(){return Vi()}function Vi(){return new es((t=>t.toString()),((t,e)=>t.isEqual(e)))}const TS=new Le(ne.comparator),IS=new Qe(ne.comparator);function ye(...t){let e=IS;for(const n of t)e=e.add(n);return e}const wS=new Qe(_e);function AS(){return wS}function Ru(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pa(e)?"-0":e}}function v_(t){return{integerValue:""+t}}function RS(t,e){return Qb(e)?v_(e):Ru(t,e)}class Ja{constructor(){this._=void 0}}function bS(t,e,n){return t instanceof Yi?(function(s,i){const o={fields:{[n_]:{stringValue:t_},[s_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&vu(i)&&(i=Ka(i)),i&&(o.fields[r_]=i),{mapValue:o}})(n,e):t instanceof Xi?I_(t,e):t instanceof Zi?w_(t,e):(function(s,i){const o=T_(s,i),c=Ld(o)+Ld(s.Ae);return Tl(o)&&Tl(s.Ae)?v_(c):Ru(s.serializer,c)})(t,e)}function SS(t,e,n){return t instanceof Xi?I_(t,e):t instanceof Zi?w_(t,e):n}function T_(t,e){return t instanceof ya?(function(r){return Tl(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Yi extends Ja{}class Xi extends Ja{constructor(e){super(),this.elements=e}}function I_(t,e){const n=A_(e);for(const r of t.elements)n.some((s=>Tn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Zi extends Ja{constructor(e){super(),this.elements=e}}function w_(t,e){let n=A_(e);for(const r of t.elements)n=n.filter((s=>!Tn(s,r)));return{arrayValue:{values:n}}}class ya extends Ja{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ld(t){return je(t.integerValue||t.doubleValue)}function A_(t){return Tu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class CS{constructor(e,n){this.field=e,this.transform=n}}function PS(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Xi&&s instanceof Xi||r instanceof Zi&&s instanceof Zi?Os(r.elements,s.elements,Tn):r instanceof ya&&s instanceof ya?Tn(r.Ae,s.Ae):r instanceof Yi&&s instanceof Yi})(t.transform,e.transform)}class NS{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ya{}function R_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bu(t.key,_n.none()):new ho(t.key,t.data,_n.none());{const n=t.data,r=Ft.empty();let s=new Qe(rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ts(t.key,r,new zt(s.toArray()),_n.none())}}function kS(t,e,n){t instanceof ho?(function(s,i,o){const c=s.value.clone(),l=Ud(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof ts?(function(s,i,o){if(!Qo(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Ud(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(b_(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Di(t,e,n,r){return t instanceof ho?(function(i,o,c,l){if(!Qo(i.precondition,o))return c;const u=i.value.clone(),f=Bd(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof ts?(function(i,o,c,l){if(!Qo(i.precondition,o))return c;const u=Bd(i.fieldTransforms,l,o),f=o.data;return f.setAll(b_(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,o,c){return Qo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function VS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=T_(r.transform,s||null);i!=null&&(n===null&&(n=Ft.empty()),n.set(r.field,i))}return n||null}function Fd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Os(r,s,((i,o)=>PS(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ho extends Ya{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ts extends Ya{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function b_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ud(t,e,n){const r=new Map;Se(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,SS(o,c,n[s]))}return r}function Bd(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,bS(i,o,e))}return r}class bu extends Ya{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DS extends Ya{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&kS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Di(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Di(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E_();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=R_(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ye())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,((n,r)=>Fd(n,r)))&&Os(this.baseMutations,e.baseMutations,((n,r)=>Fd(n,r)))}}class Su{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return TS})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Su(e,n,r,s)}}class xS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class MS{constructor(e,n){this.count=e,this.unchangedNames=n}}var $e,ve;function LS(t){switch(t){case x.OK:return ae(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return ae(15467,{code:t})}}function S_(t){if(t===void 0)return Bn("GRPC error has no .code"),x.UNKNOWN;switch(t){case $e.OK:return x.OK;case $e.CANCELLED:return x.CANCELLED;case $e.UNKNOWN:return x.UNKNOWN;case $e.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case $e.INTERNAL:return x.INTERNAL;case $e.UNAVAILABLE:return x.UNAVAILABLE;case $e.UNAUTHENTICATED:return x.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case $e.NOT_FOUND:return x.NOT_FOUND;case $e.ALREADY_EXISTS:return x.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return x.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case $e.ABORTED:return x.ABORTED;case $e.OUT_OF_RANGE:return x.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return x.UNIMPLEMENTED;case $e.DATA_LOSS:return x.DATA_LOSS;default:return ae(39323,{code:t})}}(ve=$e||($e={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";function FS(){return new TextEncoder}const US=new pr([4294967295,4294967295],0);function jd(t){const e=FS().encode(t),n=new qg;return n.update(e),new Uint8Array(n.digest())}function qd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new pr([n,r],0),new pr([s,i],0)]}class Cu{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yi(`Invalid padding: ${n}`);if(r<0)throw new yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=pr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(pr.fromNumber(r)));return s.compare(US)===1&&(s=new pr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=jd(e),[r,s]=qd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Cu(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=jd(e),[r,s]=qd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xa{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,fo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xa(ue.min(),s,new Le(_e),jn(),ye())}}class fo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fo(r,n,ye(),ye(),ye())}}class Jo{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class C_{constructor(e,n){this.targetId=e,this.Ce=n}}class P_{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class $d{constructor(){this.ve=0,this.Fe=Hd(),this.Me=st.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ye(),n=ye(),r=ye();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae(38017,{changeType:i})}})),new fo(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Hd()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class BS{constructor(e){this.Ge=e,this.ze=new Map,this.je=jn(),this.He=xo(),this.Je=xo(),this.Ze=new Le(_e)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(wl(i))if(r===0){const o=new ne(i.path);this.et(n,o,ft.newNoDocument(o,ue.min()))}else Se(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=vr(r).toUint8Array()}catch(l){if(l instanceof e_)return Ds("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Cu(o,s,i)}catch(l){return Ds(l instanceof yi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&wl(c.target)){const l=new ne(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ft.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}}));let r=ye();this.Je.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Xa(e,n,this.Ze,this.je,r);return this.je=jn(),this.He=xo(),this.Je=xo(),this.Ze=new Le(_e),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new $d,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Qe(_e),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Qe(_e),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $d),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xo(){return new Le(ne.comparator)}function Hd(){return new Le(ne.comparator)}const jS={asc:"ASCENDING",desc:"DESCENDING"},qS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$S={and:"AND",or:"OR"};class HS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bl(t,e){return t.useProto3Json||Ga(e)?e:{value:e}}function Ea(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WS(t,e){return Ea(t,e.toTimestamp())}function yn(t){return Se(!!t,49232),ue.fromTimestamp((function(n){const r=Er(n);return new xe(r.seconds,r.nanos)})(t))}function Pu(t,e){return Sl(t,e).canonicalString()}function Sl(t,e){const n=(function(s){return new De(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function k_(t){const e=De.fromString(t);return Se(M_(e),10190,{key:e.toString()}),e}function Cl(t,e){return Pu(t.databaseId,e.path)}function qc(t,e){const n=k_(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(D_(n))}function V_(t,e){return Pu(t.databaseId,e)}function GS(t){const e=k_(t);return e.length===4?De.emptyPath():D_(e)}function Pl(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function D_(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Wd(t,e,n){return{name:Cl(t,e),fields:n.value.mapValue.fields}}function KS(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Se(f===void 0||typeof f=="string",58123),st.fromBase64String(f||"")):(Se(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),st.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?x.UNKNOWN:S_(u.code);return new Y(f,u.message||"")})(o);n=new P_(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qc(t,r.document.name),i=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):ue.min(),c=new Ft({mapValue:{fields:r.document.fields}}),l=ft.newFoundDocument(s,i,o,c),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Jo(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qc(t,r.document),i=r.readTime?yn(r.readTime):ue.min(),o=ft.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Jo([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qc(t,r.document),i=r.removedTargetIds||[];n=new Jo([],i,s,null)}else{if(!("filter"in e))return ae(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new MS(s,i),c=r.targetId;n=new C_(c,o)}}return n}function zS(t,e){let n;if(e instanceof ho)n={update:Wd(t,e.key,e.value)};else if(e instanceof bu)n={delete:Cl(t,e.key)};else if(e instanceof ts)n={update:Wd(t,e.key,e.data),updateMask:rC(e.fieldMask)};else{if(!(e instanceof DS))return ae(16599,{dt:e.type});n={verify:Cl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const c=o.transform;if(c instanceof Yi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Xi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Zi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ya)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ae(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:WS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae(27497)})(t,e.precondition)),n}function QS(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?yn(s.updateTime):yn(i);return o.isEqual(ue.min())&&(o=yn(i)),new NS(o,s.transformResults||[])})(n,e)))):[]}function JS(t,e){return{documents:[V_(t,e.path)]}}function YS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=V_(t,s);const i=(function(u){if(u.length!==0)return x_(tn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(m){return{field:ds(m.field),direction:eC(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=bl(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function XS(t){let e=GS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Se(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const m=O_(p);return m instanceof tn&&u_(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((m=>(function(P){return new Ji(ps(P.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,Ga(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(p){const m=!!p.before,v=p.values||[];return new _a(v,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){const m=!p.before,v=p.values||[];return new _a(v,m)})(n.endAt)),pS(e,s,o,i,c,"F",l,u)}function ZS(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function O_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ps(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ps(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ps(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ps(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}})(t):t.fieldFilter!==void 0?(function(n){return He.create(ps(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return tn.create(n.compositeFilter.filters.map((r=>O_(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae(1026)}})(n.compositeFilter.op))})(t):ae(30097,{filter:t})}function eC(t){return jS[t]}function tC(t){return qS[t]}function nC(t){return $S[t]}function ds(t){return{fieldPath:t.canonicalString()}}function ps(t){return rt.fromServerFormat(t.fieldPath)}function x_(t){return t instanceof He?(function(n){if(n.op==="=="){if(Vd(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NAN"}};if(kd(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vd(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NAN"}};if(kd(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ds(n.field),op:tC(n.op),value:n.value}}})(t):t instanceof tn?(function(n){const r=n.getFilters().map((s=>x_(s)));return r.length===1?r[0]:{compositeFilter:{op:nC(n.op),filters:r}}})(t):ae(54877,{filter:t})}function rC(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function M_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function L_(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class cr{constructor(e,n,r,s,i=ue.min(),o=ue.min(),c=st.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class sC{constructor(e){this.yt=e}}function iC(t){const e=XS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rl(e,e.limit,"L"):e}class oC{constructor(){this.Sn=new aC}addToCollectionParentIndex(e,n){return this.Sn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(yr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class aC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Qe(De.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qe(De.comparator)).toArray()}}const Gd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},F_=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(F_,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);class Ls{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ls(0)}static ar(){return new Ls(-1)}}const Kd="LruGarbageCollector",cC=1048576;function zd([t,e],[n,r]){const s=_e(t,n);return s===0?_e(e,r):s}class lC{constructor(e){this.Pr=e,this.buffer=new Qe(zd),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zd(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Z(Kd,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ws(n)?Z(Kd,"Ignoring IndexedDB error during garbage collection: ",n):await Hs(n)}await this.Ar(3e5)}))}}class hC{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Wa.ce);const r=new lC(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Gd)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gd):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,n)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(u=Date.now(),hs()<=ge.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function fC(t,e){return new hC(t,e)}class dC{constructor(){this.changes=new es((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class pC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class mC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Di(r.mutation,s,zt.empty(),xe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ye()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ye()){const s=Ur();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=_i();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Ur();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ye())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=jn();const o=Vi(),c=(function(){return Vi()})();return n.forEach(((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof ts)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Di(f.mutation,u,f.mutation.getFieldMask(),xe.now())):o.set(u.key,zt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new pC(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Vi();let s=new Le(((o,c)=>o-c)),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||zt.empty();f=c.applyToLocalView(u,f),r.set(l,f);const p=(s.get(c.batchId)||ye()).add(l);s=s.insert(c.batchId,p)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,p=E_();f.forEach((m=>{if(!i.has(m)){const v=R_(n.get(m),r.get(m));v!==null&&p.set(m,v),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return M.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return mS(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):p_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Ur());let c=Gi,l=i;return o.next((u=>M.forEach(u,((f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{l=l.insert(f,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,ye()))).next((f=>({batchId:c,changes:y_(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next((r=>{let s=_i();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=_i();return this.indexManager.getCollectionParents(e,i).next((c=>M.forEach(c,(l=>{const u=(function(p,m){return new Gs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((f=>{f.forEach(((p,m)=>{o=o.insert(p,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,ft.newInvalidDocument(f)))}));let c=_i();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&Di(f.mutation,u,zt.empty(),xe.now()),Qa(n,u)&&(c=c.insert(l,u))})),c}))}}class gC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return M.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:yn(s.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(s){return{name:s.name,query:iC(s.bundledQuery),readTime:yn(s.readTime)}})(n)),M.resolve()}}class _C{constructor(){this.overlays=new Le(ne.comparator),this.Lr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ur();return M.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.bt(e,n,i)})),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Ur(),i=n.length+1,o=new ne(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=Ur(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=Ur(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=s)););return M.resolve(c)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xS(n,r));let i=this.Lr.get(n);i===void 0&&(i=ye(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}class yC{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}class Nu{constructor(){this.kr=new Qe(Ze.Kr),this.qr=new Qe(Ze.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Ze(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new ne(new De([])),r=new Ze(n,e),s=new Ze(n,e+1),i=[];return this.qr.forEachInRange([r,s],(o=>{this.Wr(o),i.push(o.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ne(new De([])),r=new Ze(n,e),s=new Ze(n,e+1);let i=ye();return this.qr.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new Ze(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ne.comparator(e.key,n.key)||_e(e.Hr,n.Hr)}static Ur(e,n){return _e(e.Hr,n.Hr)||ne.comparator(e.key,n.key)}}class EC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Qe(Ze.Kr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new OS(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Jr=this.Jr.add(new Ze(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Eu:this.Yn-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),s=new Ze(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],(o=>{const c=this.Zr(o.Hr);i.push(c)})),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(_e);return n.forEach((s=>{const i=new Ze(s,0),o=new Ze(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],(c=>{r=r.add(c.Hr)}))})),M.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new Ze(new ne(i),0);let c=new Qe(_e);return this.Jr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.Hr)),!0)}),o),M.resolve(this.Yr(c))}Yr(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Se(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return M.forEach(n.mutations,(s=>{const i=new Ze(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Ze(n,0),s=this.Jr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class vC{constructor(e){this.ti=e,this.docs=(function(){return new Le(ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=jn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))})),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=jn();const o=n.path,c=new ne(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Wb(Hb(f),r)<=0||(s.has(f.key)||Qa(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ae(9500)}ni(e,n){return M.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new TC(this)}getSize(e){return M.resolve(this.size)}}class TC extends dC{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),M.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class IC{constructor(e){this.persistence=e,this.ri=new es((n=>Iu(n)),wu),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.ii=0,this.si=new Nu,this.targetCount=0,this.oi=Ls._r()}forEachTarget(e,n){return this.ri.forEach(((r,s)=>n(s))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),M.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ls(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.lr(n),M.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),M.waitFor(i).next((()=>s))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.si.containsKey(n))}}class U_{constructor(e,n){this._i={},this.overlays={},this.ai=new Wa(0),this.ui=!1,this.ui=!0,this.ci=new yC,this.referenceDelegate=e(this),this.li=new IC(this),this.indexManager=new oC,this.remoteDocumentCache=(function(s){return new vC(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new sC(n),this.Pi=new gC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _C,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new EC(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new wC(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((i=>this.referenceDelegate.Ii(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(e,n){return M.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class wC extends Kb{constructor(e){super(),this.currentSequenceNumber=e}}class ku{constructor(e){this.persistence=e,this.Ri=new Nu,this.Ai=null}static Vi(e){return new ku(e)}get di(){if(this.Ai)return this.Ai;throw ae(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.di.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.di,(r=>{const s=ne.fromPath(r);return this.mi(e,s).next((i=>{i||n.removeEntry(s,ue.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class va{constructor(e,n){this.persistence=e,this.fi=new es((r=>Jb(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=fC(this,n)}static Vi(e,n){return new va(e,n)}Ti(){}Ii(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return M.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((i=>i?M.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,(o=>this.wr(e,o,n).next((c=>{c||(r++,i.removeEntry(o,ue.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),M.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ko(e.data.value)),n}wr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Vu{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Vu(e,n.fromCache,r,s)}}class AC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class RC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return XI()?8:zb(mt())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ps(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new AC;return this.ys(e,n,o).next((c=>{if(i.result=c,this.As)return this.ws(e,n,o,c.size)}))})).next((()=>i.result))}ws(e,n,r,s){return r.documentReadCount<this.Vs?(hs()<=ge.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(hs()<=ge.DEBUG&&Z("QueryEngine","Query:",fs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(hs()<=ge.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):M.resolve())}gs(e,n){if(Md(n))return M.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Rl(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=ye(...i);return this.fs.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.bs(n,c);return this.Ss(n,u,o,l.readTime)?this.gs(e,Rl(n,null,"F")):this.Ds(e,u,n,l)}))))})))))}ps(e,n,r,s){return Md(n)||s.isEqual(ue.min())?M.resolve(null):this.fs.getDocuments(e,r).next((i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?M.resolve(null):(hs()<=ge.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fs(n)),this.Ds(e,o,n,$b(s,Gi)).next((c=>c)))}))}bs(e,n){let r=new Qe(g_(e));return n.forEach(((s,i)=>{Qa(e,i)&&(r=r.add(i))})),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return hs()<=ge.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",fs(n)),this.fs.getDocumentsMatchingQuery(e,n,yr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Du="LocalStore",bC=3e8;class SC{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Le(_e),this.Fs=new es((i=>Iu(i)),wu),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function CC(t,e,n,r){return new SC(t,e,n,r)}async function B_(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=ye();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ns:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function PC(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const p=u.batch,m=p.keys();let v=M.resolve();return m.forEach((P=>{v=v.next((()=>f.getEntry(l,P))).next((k=>{const F=u.docVersions.get(P);Se(F!==null,48541),k.version.compareTo(F)<0&&(p.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),f.addEntry(k)))}))})),v.next((()=>c.mutationQueue.removeMutationBatch(l,p)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=ye();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function j_(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function NC(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const c=[];e.targetChanges.forEach(((f,p)=>{const m=s.get(p);if(!m)return;c.push(n.li.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.li.addMatchingKeys(i,f.addedDocuments,p))));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(st.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),s=s.insert(p,v),(function(k,F,$){return k.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=bC?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(m,v,f)&&c.push(n.li.updateTargetData(i,v))}));let l=jn(),u=ye();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(kC(i,o,e.documentUpdates).next((f=>{l=f.Bs,u=f.Ls}))),!r.isEqual(ue.min())){const f=n.li.getLastRemoteSnapshotVersion(i).next((p=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return M.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.vs=s,i)))}function kC(t,e,n){let r=ye(),s=ye();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=jn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):Z(Du,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{Bs:o,Ls:s}}))}function VC(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Eu),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function DC(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.li.getTargetData(r,e).next((i=>i?(s=i,M.resolve(s)):n.li.allocateTargetId(r).next((o=>(s=new cr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function Nl(t,e,n){const r=fe(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Ws(o))throw o;Z(Du,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Qd(t,e,n){const r=fe(t);let s=ue.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const p=fe(l),m=p.Fs.get(f);return m!==void 0?M.resolve(p.vs.get(m)):p.li.getTargetData(u,f)})(r,o,gn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:ye()))).next((c=>(OC(r,yS(e),c),{documents:c,ks:i})))))}function OC(t,e,n){let r=t.Ms.get(e)||ue.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Ms.set(e,r)}class Jd{constructor(){this.activeTargetIds=AS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xC{constructor(){this.vo=new Jd,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Jd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class MC{Mo(e){}shutdown(){}}const Yd="ConnectivityMonitor";class Xd{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Z(Yd,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Z(Yd,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Mo=null;function kl(){return Mo===null?Mo=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mo++,"0x"+Mo.toString(16)}const $c="RestConnection",LC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class FC{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===ma?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=kl(),c=this.Qo(e,n.toUriEncodedString());Z($c,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,s,i);const{host:u}=new URL(c),f=Bs(u);return this.zo(e,c,l,r,f).then((p=>(Z($c,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Ds($c,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$s})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}Qo(e,n){const r=LC[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class UC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ct="WebChannelConnection",fi=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Rs extends FC{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Rs.c_){const e=Gg();fi(e,Wg.STAT_EVENT,(n=>{n.stat===yl.PROXY?Z(ct,"STAT_EVENT: detected buffering proxy"):n.stat===yl.NOPROXY&&Z(ct,"STAT_EVENT: detected no buffering proxy")})),Rs.c_=!0}}zo(e,n,r,s,i){const o=kl();return new Promise(((c,l)=>{const u=new $g;u.setWithCredentials(!0),u.listenOnce(Hg.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Go.NO_ERROR:const p=u.getResponseJson();Z(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case Go.TIMEOUT:Z(ct,`RPC '${e}' ${o} timed out`),l(new Y(x.DEADLINE_EXCEEDED,"Request time out"));break;case Go.HTTP_ERROR:const m=u.getStatus();if(Z(ct,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const P=v?.error;if(P&&P.status&&P.message){const k=(function($){const j=$.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(j)>=0?j:x.UNKNOWN})(P.status);l(new Y(k,P.message))}else l(new Y(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(x.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Z(ct,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);Z(ct,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const s=kl(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=i.join("");Z(ct,`Creating RPC '${e}' stream ${s}: ${u}`,c);const f=o.createWebChannel(u,c);this.I_(f);let p=!1,m=!1;const v=new UC({Ho:P=>{m?Z(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(p||(Z(ct,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),Z(ct,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},Jo:()=>f.close()});return fi(f,gi.EventType.OPEN,(()=>{m||(Z(ct,`RPC '${e}' stream ${s} transport opened.`),v.i_())})),fi(f,gi.EventType.CLOSE,(()=>{m||(m=!0,Z(ct,`RPC '${e}' stream ${s} transport closed`),v.o_(),this.E_(f))})),fi(f,gi.EventType.ERROR,(P=>{m||(m=!0,Ds(ct,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),v.o_(new Y(x.UNAVAILABLE,"The operation could not be completed")))})),fi(f,gi.EventType.MESSAGE,(P=>{if(!m){const k=P.data[0];Se(!!k,16349);const F=k,$=F?.error||F[0]?.error;if($){Z(ct,`RPC '${e}' stream ${s} received error:`,$);const j=$.status;let H=(function(le){const R=$e[le];if(R!==void 0)return S_(R)})(j),G=$.message;H===void 0&&(H=x.INTERNAL,G="Unknown error status: "+j+" with message "+$.message),m=!0,v.o_(new Y(H,G)),f.close()}else Z(ct,`RPC '${e}' stream ${s} received:`,k),v.__(k)}})),Rs.u_(),setTimeout((()=>{v.s_()}),0),v}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Kg()}}function BC(t){return new Rs(t)}function Hc(){return typeof document<"u"?document:null}function Za(t){return new HS(t,!0)}Rs.c_=!1;class q_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Zd="PersistentStream";class $_{constructor(e,n,r,s,i,o,c,l){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new q_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Bn(n.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new Y(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Z(Zd,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Z(Zd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jC extends $_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=KS(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?yn(o.readTime):ue.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Pl(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=wl(l)?{documents:JS(i,l)}:{query:YS(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=N_(i,o.resumeToken);const u=bl(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(ue.min())>0){c.readTime=Ea(i,o.snapshotVersion.toTimestamp());const u=bl(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=ZS(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Pl(this.serializer),n.removeTarget=e,this.K_(n)}}class qC extends $_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=QS(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Pl(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>zS(this.serializer,r)))};this.K_(n)}}class $C{}class HC extends $C{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y(x.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Wo(e,Sl(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(x.UNKNOWN,i.toString())}))}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.jo(e,Sl(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(x.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function WC(t,e,n,r){return new HC(t,e,n,r)}class GC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bn(n),this.aa=!1):Z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Jr="RemoteStore";class KC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((o=>{r.enqueueAndForget((async()=>{ns(this)&&(Z(Jr,"Restarting streams for network reachability change."),await(async function(l){const u=fe(l);u.Ea.add(4),await po(u),u.Va.set("Unknown"),u.Ea.delete(4),await ec(u)})(this))}))})),this.Va=new GC(r,s)}}async function ec(t){if(ns(t))for(const e of t.Ra)await e(!0)}async function po(t){for(const e of t.Ra)await e(!1)}function H_(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Lu(n)?Mu(n):Ks(n).O_()&&xu(n,e))}function Ou(t,e){const n=fe(t),r=Ks(n);n.Ia.delete(e),r.O_()&&W_(n,e),n.Ia.size===0&&(r.O_()?r.L_():ns(n)&&n.Va.set("Unknown"))}function xu(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ks(t).Z_(e)}function W_(t,e){t.da.$e(e),Ks(t).X_(e)}function Mu(t){t.da=new BS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ks(t).start(),t.Va.ua()}function Lu(t){return ns(t)&&!Ks(t).x_()&&t.Ia.size>0}function ns(t){return fe(t).Ea.size===0}function G_(t){t.da=void 0}async function zC(t){t.Va.set("Online")}async function QC(t){t.Ia.forEach(((e,n)=>{xu(t,e)}))}async function JC(t,e){G_(t),Lu(t)?(t.Va.ha(e),Mu(t)):t.Va.set("Unknown")}async function YC(t,e,n){if(t.Va.set("Online"),e instanceof P_&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.da.removeTarget(c))})(t,e)}catch(r){Z(Jr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ta(t,r)}else if(e instanceof Jo?t.da.Xe(e):e instanceof C_?t.da.st(e):t.da.tt(e),!n.isEqual(ue.min()))try{const r=await j_(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.da.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(st.EMPTY_BYTE_STRING,f.snapshotVersion)),W_(i,l);const p=new cr(f.target,l,u,f.sequenceNumber);xu(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Z(Jr,"Failed to raise snapshot:",r),await Ta(t,r)}}async function Ta(t,e,n){if(!Ws(e))throw e;t.Ea.add(1),await po(t),t.Va.set("Offline"),n||(n=()=>j_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Z(Jr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ec(t)}))}function K_(t,e){return e().catch((n=>Ta(t,n,e)))}async function tc(t){const e=fe(t),n=Ir(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Eu;for(;XC(e);)try{const s=await VC(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,ZC(e,s)}catch(s){await Ta(e,s)}z_(e)&&Q_(e)}function XC(t){return ns(t)&&t.Ta.length<10}function ZC(t,e){t.Ta.push(e);const n=Ir(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function z_(t){return ns(t)&&!Ir(t).x_()&&t.Ta.length>0}function Q_(t){Ir(t).start()}async function eP(t){Ir(t).ra()}async function tP(t){const e=Ir(t);for(const n of t.Ta)e.ea(n.mutations)}async function nP(t,e,n){const r=t.Ta.shift(),s=Su.from(r,e,n);await K_(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await tc(t)}async function rP(t,e){e&&Ir(t).Y_&&await(async function(r,s){if((function(o){return LS(o)&&o!==x.ABORTED})(s.code)){const i=r.Ta.shift();Ir(r).B_(),await K_(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await tc(r)}})(t,e),z_(t)&&Q_(t)}async function ep(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),Z(Jr,"RemoteStore received new credentials");const r=ns(n);n.Ea.add(3),await po(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ec(n)}async function sP(t,e){const n=fe(t);e?(n.Ea.delete(2),await ec(n)):e||(n.Ea.add(2),await po(n),n.Va.set("Unknown"))}function Ks(t){return t.ma||(t.ma=(function(n,r,s){const i=fe(n);return i.sa(),new jC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:zC.bind(null,t),Yo:QC.bind(null,t),t_:JC.bind(null,t),J_:YC.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Lu(t)?Mu(t):t.Va.set("Unknown")):(await t.ma.stop(),G_(t))}))),t.ma}function Ir(t){return t.fa||(t.fa=(function(n,r,s){const i=fe(n);return i.sa(),new qC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:eP.bind(null,t),t_:rP.bind(null,t),ta:tP.bind(null,t),na:nP.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await tc(t)):(await t.fa.stop(),t.Ta.length>0&&(Z(Jr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Fu{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Fu(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uu(t,e){if(Bn("AsyncQueue",`${e}: ${t}`),Ws(t))return new Y(x.UNAVAILABLE,`${e}: ${t}`);throw t}class bs{static emptySet(e){return new bs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=_i(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class tp{constructor(){this.ga=new Le(ne.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ae(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Fs{constructor(e,n,r,s,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Fs(e,n,bs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&za(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class iP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class oP{constructor(){this.queries=np(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=np(),i.forEach(((o,c)=>{for(const l of c.ba)l.onError(r)}))})(this,new Y(x.ABORTED,"Firestore shutting down"))}}function np(){return new es((t=>m_(t)),za)}async function aP(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new iP,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Uu(o,`Initialization of query '${fs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Bu(n)}async function cP(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lP(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.ba)c.Fa(s)&&(r=!0);o.wa=s}}r&&Bu(n)}function uP(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Bu(t){t.Ca.forEach((e=>{e.next()}))}var Vl,rp;(rp=Vl||(Vl={})).Ma="default",rp.Cache="cache";class hP{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vl.Cache}}class J_{constructor(e){this.key=e}}class Y_{constructor(e){this.key=e}}class fP{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ye(),this.mutatedKeys=ye(),this.eu=g_(e),this.tu=new bs(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new tp,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,p)=>{const m=s.get(f),v=Qa(this.query,p)?p:null,P=!!m&&this.mutatedKeys.has(m.key),k=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let F=!1;m&&v?m.data.isEqual(v.data)?P!==k&&(r.track({type:3,doc:v}),F=!0):this.su(m,v)||(r.track({type:2,doc:v}),F=!0,(l&&this.eu(v,l)>0||u&&this.eu(v,u)<0)&&(c=!0)):!m&&v?(r.track({type:0,doc:v}),F=!0):m&&!v&&(r.track({type:1,doc:m}),F=!0,(l||u)&&(c=!0)),F&&(v?(o=o.add(v),i=k?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Ss:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(v,P){const k=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{Vt:F})}};return k(v)-k(P)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Ya.size===0&&this.current&&!s?1:0,u=l!==this.Xa;return this.Xa=l,o.length!==0||u?{snapshot:new Fs(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tp,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new Y_(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new J_(r))})),n}cu(e){this.Za=e.ks,this.Ya=ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ju="SyncEngine";class dP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pP{constructor(e){this.key=e,this.hu=!1}}class mP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new es((c=>m_(c)),za),this.Iu=new Map,this.Eu=new Set,this.Ru=new Le(ne.comparator),this.Au=new Map,this.Vu=new Nu,this.du={},this.mu=new Map,this.fu=Ls.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gP(t,e,n=!0){const r=ry(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await X_(r,e,n,!0),s}async function _P(t,e){const n=ry(t);await X_(n,e,!0,!1)}async function X_(t,e,n,r){const s=await DC(t.localStore,gn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await yP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&H_(t.remoteStore,s),c}async function yP(t,e,n,r,s){t.pu=(p,m,v)=>(async function(k,F,$,j){let H=F.view.ru($);H.Ss&&(H=await Qd(k.localStore,F.query,!1).then((({documents:R})=>F.view.ru(R,H))));const G=j&&j.targetChanges.get(F.targetId),ce=j&&j.targetMismatches.get(F.targetId)!=null,le=F.view.applyChanges(H,k.isPrimaryClient,G,ce);return ip(k,F.targetId,le.au),le.snapshot})(t,p,m,v);const i=await Qd(t.localStore,e,!0),o=new fP(e,i.ks),c=o.ru(i.documents),l=fo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(c,t.isPrimaryClient,l);ip(t,n,u.au);const f=new dP(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function EP(t,e,n){const r=fe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!za(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Nl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ou(r.remoteStore,s.targetId),Dl(r,s.targetId)})).catch(Hs)):(Dl(r,s.targetId),await Nl(r.localStore,s.targetId,!0))}async function vP(t,e){const n=fe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ou(n.remoteStore,r.targetId))}async function TP(t,e,n){const r=CP(t);try{const s=await(function(o,c){const l=fe(o),u=xe.now(),f=c.reduce(((v,P)=>v.add(P.key)),ye());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let P=jn(),k=ye();return l.xs.getEntries(v,f).next((F=>{P=F,P.forEach((($,j)=>{j.isValidDocument()||(k=k.add($))}))})).next((()=>l.localDocuments.getOverlayedDocuments(v,P))).next((F=>{p=F;const $=[];for(const j of c){const H=VS(j,p.get(j.key).overlayedDocument);H!=null&&$.push(new ts(j.key,H,a_(H.value.mapValue),_n.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,$,c)})).next((F=>{m=F;const $=F.applyToLocalDocumentSet(p,k);return l.documentOverlayCache.saveOverlays(v,F.batchId,$)}))})).then((()=>({batchId:m.batchId,changes:y_(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,l){let u=o.du[o.currentUser.toKey()];u||(u=new Le(_e)),u=u.insert(c,l),o.du[o.currentUser.toKey()]=u})(r,s.batchId,n),await mo(r,s.changes),await tc(r.remoteStore)}catch(s){const i=Uu(s,"Failed to persist write");n.reject(i)}}async function Z_(t,e){const n=fe(t);try{const r=await NC(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Se(o.hu,14607):s.removedDocuments.size>0&&(Se(o.hu,42227),o.hu=!1))})),await mo(n,r,e)}catch(r){await Hs(r)}}function sp(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=fe(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,p)=>{for(const m of p.ba)m.va(c)&&(u=!0)})),u&&Bu(l)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IP(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Le(ne.comparator);o=o.insert(i,ft.newNoDocument(i,ue.min()));const c=ye().add(i),l=new Xa(ue.min(),new Map,new Le(_e),o,c);await Z_(r,l),r.Ru=r.Ru.remove(i),r.Au.delete(e),qu(r)}else await Nl(r.localStore,e,!1).then((()=>Dl(r,e,n))).catch(Hs)}async function wP(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await PC(n.localStore,e);ty(n,r,null),ey(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mo(n,s)}catch(s){await Hs(s)}}async function AP(t,e,n){const r=fe(t);try{const s=await(function(o,c){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((p=>(Se(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);ty(r,e,n),ey(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mo(r,s)}catch(s){await Hs(s)}}function ey(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function ty(t,e,n){const r=fe(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Dl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||ny(t,r)}))}function ny(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Ou(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),qu(t))}function ip(t,e,n){for(const r of n)r instanceof J_?(t.Vu.addReference(r.key,e),RP(t,r)):r instanceof Y_?(Z(ju,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||ny(t,r.key)):ae(19791,{wu:r})}function RP(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Z(ju,"New document in limbo: "+n),t.Eu.add(r),qu(t))}function qu(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ne(De.fromString(e)),r=t.fu.next();t.Au.set(r,new pP(n)),t.Ru=t.Ru.insert(n,r),H_(t.remoteStore,new cr(gn(Au(n.path)),r,"TargetPurposeLimboResolution",Wa.ce))}}async function mo(t,e,n){const r=fe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Vu.Es(l.targetId,u);i.push(f)}})))})),await Promise.all(o),r.Pu.J_(s),await(async function(l,u){const f=fe(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>M.forEach(u,(m=>M.forEach(m.Ts,(v=>f.persistence.referenceDelegate.addReference(p,m.targetId,v))).next((()=>M.forEach(m.Is,(v=>f.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))))))}catch(p){if(!Ws(p))throw p;Z(Du,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const v=f.vs.get(m),P=v.snapshotVersion,k=v.withLastLimboFreeSnapshotVersion(P);f.vs=f.vs.insert(m,k)}}})(r.localStore,i))}async function bP(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){Z(ju,"User change. New user:",e.toKey());const r=await B_(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new Y(x.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mo(n,r.Ns)}}function SP(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return ye().add(r.key);{let s=ye();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function ry(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IP.bind(null,e),e.Pu.J_=lP.bind(null,e.eventManager),e.Pu.yu=uP.bind(null,e.eventManager),e}function CP(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AP.bind(null,e),e}class Ia{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Za(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return CC(this.persistence,new RC,e.initialUser,this.serializer)}Cu(e){return new U_(ku.Vi,this.serializer)}Du(e){return new xC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ia.provider={build:()=>new Ia};class PP extends Ia{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof va,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new uC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new U_((r=>va.Vi(r,n)),this.serializer)}}class Ol{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bP.bind(null,this.syncEngine),await sP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oP})()}createDatastore(e){const n=Za(e.databaseInfo.databaseId),r=BC(e.databaseInfo);return WC(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new KC(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>sp(this.syncEngine,n,0)),(function(){return Xd.v()?new Xd:new MC})())}createSyncEngine(e,n){return(function(s,i,o,c,l,u,f){const p=new mP(s,i,o,c,l,u);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=fe(n);Z(Jr,"RemoteStore shutting down."),r.Ea.add(5),await po(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ol.provider={build:()=>new Ol};class NP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const wr="FirestoreClient";class kP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=yu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{Z(wr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Z(wr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Uu(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Wc(t,e){t.asyncQueue.verifyOperationInProgress(),Z(wr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await B_(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function op(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VP(t);Z(wr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>ep(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>ep(e.remoteStore,s))),t._onlineComponents=e}async function VP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z(wr,"Using user provided OfflineComponentProvider");try{await Wc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===x.FAILED_PRECONDITION||s.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Ds("Error using user provided cache. Falling back to memory cache: "+n),await Wc(t,new Ia)}}else Z(wr,"Using default OfflineComponentProvider"),await Wc(t,new PP(void 0));return t._offlineComponents}async function sy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z(wr,"Using user provided OnlineComponentProvider"),await op(t,t._uninitializedComponentsProvider._online)):(Z(wr,"Using default OnlineComponentProvider"),await op(t,new Ol))),t._onlineComponents}function DP(t){return sy(t).then((e=>e.syncEngine))}async function ap(t){const e=await sy(t),n=e.eventManager;return n.onListen=gP.bind(null,e.syncEngine),n.onUnlisten=EP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_P.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vP.bind(null,e.syncEngine),n}function OP(t,e,n,r){const s=new NP(r),i=new hP(e,s,n);return t.asyncQueue.enqueueAndForget((async()=>aP(await ap(t),i))),()=>{s.Nu(),t.asyncQueue.enqueueAndForget((async()=>cP(await ap(t),i)))}}function xP(t,e){const n=new qr;return t.asyncQueue.enqueueAndForget((async()=>TP(await DP(t),e,n))),n.promise}function iy(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const MP="ComponentProvider",cp=new Map;function LP(t,e,n,r,s){return new Zb(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,iy(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}const oy="firestore.googleapis.com",lp=!0;class up{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oy,this.ssl=lp}else this.host=e.host,this.ssl=e.ssl??lp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=F_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cC)throw new Y(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iy(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new up({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new up(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Vb;switch(r.type){case"firstParty":return new Mb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=cp.get(n);r&&(Z(MP,"Removing Datastore"),cp.delete(n),r.terminate())})(this),Promise.resolve()}}function FP(t,e,n,r={}){t=As(t,nc);const s=Bs(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(eg(`https://${c}`),tg("Firestore",!0)),i.host!==oy&&i.host!==c&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!Wr(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=lt.MOCK_USER;else{u=$I(r.mockUserToken,t._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Y(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new lt(p)}t._authCredentials=new Db(new Qg(u,f))}}class rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rs(this.firestore,e,this._query)}}class ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ze(this.firestore,e,this._key)}toJSON(){return{type:ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(uo(n,ze._jsonSchema))return new ze(e,r||null,new ne(De.fromString(n.referencePath)))}}ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:We("string",ze._jsonSchemaVersion),referencePath:We("string")};class mr extends rs{constructor(e,n,r){super(e,n,Au(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new ne(e))}withConverter(e){return new mr(this.firestore,e,this._path)}}function hp(t,e,...n){if(t=St(t),Jg("collection","path",e),t instanceof nc){const r=De.fromString(e,...n);return Id(r),new mr(t,null,r)}{if(!(t instanceof ze||t instanceof mr))throw new Y(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return Id(r),new mr(t.firestore,null,r)}}function ay(t,e,...n){if(t=St(t),arguments.length===1&&(e=yu.newId()),Jg("doc","path",e),t instanceof nc){const r=De.fromString(e,...n);return Td(r),new ze(t,null,new ne(r))}{if(!(t instanceof ze||t instanceof mr))throw new Y(x.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return Td(r),new ze(t.firestore,t instanceof mr?t.converter:null,new ne(r))}}const fp="AsyncQueue";class dp{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new q_(this,"async_queue_retry"),this._c=()=>{const r=Hc();r&&Z(fp,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Hc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new qr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ws(e))throw e;Z(fp,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Bn("INTERNAL UNHANDLED ERROR: ",pp(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Fu.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ae(47125,{Pc:pp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class eo extends nc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new dp,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dp(e),this._firestoreClient=void 0,await e}}}function UP(t,e){const n=typeof t=="object"?t:ig(),r=typeof t=="string"?t:ma,s=cu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=jI("firestore");i&&FP(s,...i)}return s}function cy(t){if(t._terminated)throw new Y(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BP(t),t._firestoreClient}function BP(t){const e=t._freezeSettings(),n=LP(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new kP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class Ut{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ut(st.fromBase64String(e))}catch(n){throw new Y(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ut(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ut._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uo(e,Ut._jsonSchema))return Ut.fromBase64String(e.bytes)}}Ut._jsonSchemaVersion="firestore/bytes/1.0",Ut._jsonSchema={type:We("string",Ut._jsonSchemaVersion),bytes:We("string")};class ly{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $u{constructor(e){this._methodName=e}}class En{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:En._jsonSchemaVersion}}static fromJSON(e){if(uo(e,En._jsonSchema))return new En(e.latitude,e.longitude)}}En._jsonSchemaVersion="firestore/geoPoint/1.0",En._jsonSchema={type:We("string",En._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};class Jt{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Jt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uo(e,Jt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Jt(e.vectorValues);throw new Y(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jt._jsonSchemaVersion="firestore/vectorValue/1.0",Jt._jsonSchema={type:We("string",Jt._jsonSchemaVersion),vectorValues:We("object")};const jP=/^__.*__$/;class qP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new ho(e,this.data,n,this.fieldTransforms)}}function uy(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{dataSource:t})}}class Hu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Hu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return wa(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(uy(this.dataSource)&&jP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class $P{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Za(e)}createContext(e,n,r,s=!1){return new Hu({dataSource:e,methodName:n,targetDoc:r,path:rt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hy(t){const e=t._freezeSettings(),n=Za(t._databaseId);return new $P(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HP(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);py("Data must be an object, but it was:",o,r);const c=fy(r,o);let l,u;if(i.merge)l=new zt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=rc(e,p,n);if(!o.contains(m))throw new Y(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zP(f,m)||f.push(m)}l=new zt(f),u=o.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,u=o.fieldTransforms;return new qP(new Ft(c),l,u)}class Wu extends $u{_toFieldTransform(e){return new CS(e.path,new Yi)}isEqual(e){return e instanceof Wu}}function WP(t,e,n,r=!1){return Gu(n,t.createContext(r?4:3,e))}function Gu(t,e){if(dy(t=St(t)))return py("Unsupported field value:",e,t),fy(t,e);if(t instanceof $u)return(function(r,s){if(!uy(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=Gu(c,s.childContextForArray(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xe.fromDate(r);return{timestampValue:Ea(s.serializer,i)}}if(r instanceof xe){const i=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ea(s.serializer,i)}}if(r instanceof En)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ut)return{bytesValue:N_(s.serializer,r._byteString)};if(r instanceof ze){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pu(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Jt)return(function(o,c){const l=o instanceof Jt?o.toArray():o;return{mapValue:{fields:{[i_]:{stringValue:o_},[ga]:{arrayValue:{values:l.map((f=>{if(typeof f!="number")throw c.createError("VectorValues must only contain numeric values.");return Ru(c.serializer,f)}))}}}}}})(r,s);if(L_(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Ha(r)}`)})(t,e)}function fy(t,e){const n={};return Zg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(t,((r,s)=>{const i=Gu(s,e.childContextForField(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function dy(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof En||t instanceof Ut||t instanceof ze||t instanceof $u||t instanceof Jt||L_(t))}function py(t,e,n){if(!dy(n)||!Yg(n)){const r=Ha(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function rc(t,e,n){if((e=St(e))instanceof ly)return e._internalPath;if(typeof e=="string")return KP(t,e);throw wa("Field path arguments must be of type string or ",t,!1,void 0,n)}const GP=new RegExp("[~\\*/\\[\\]]");function KP(t,e,n){if(e.search(GP)>=0)throw wa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ly(...e.split("."))._internalPath}catch{throw wa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wa(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Y(x.INVALID_ARGUMENT,c+t+l)}function zP(t,e){return t.some((n=>n.isEqual(e)))}class QP{convertValue(e,n="none"){switch(Tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zr(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[ga].arrayValue?.values?.map((r=>je(r.doubleValue)));return new Jt(n)}convertGeoPoint(e){return new En(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ka(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ki(e));default:return null}}convertTimestamp(e){const n=Er(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=De.fromString(e);Se(M_(r),9688,{name:e});const s=new zi(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||Bn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}class my extends QP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ut(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,n)}}function JP(){return new Wu("serverTimestamp")}const mp="@firebase/firestore",gp="4.10.0";function _p(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class gy{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(rc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class YP extends gy{data(){return super.data()}}function XP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ku{}class _y extends Ku{}function ZP(t,e,...n){let r=[];e instanceof Ku&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof Qu)).length,c=i.filter((l=>l instanceof zu)).length;if(o>1||o>0&&c>0)throw new Y(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class zu extends _y{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zu(e,n,r)}_apply(e){const n=this._parse(e);return yy(e._query,n),new rs(e.firestore,e.converter,Al(e._query,n))}_parse(e){const n=hy(e.firestore);return(function(i,o,c,l,u,f,p){let m;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Y(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Ep(p,f);const P=[];for(const k of p)P.push(yp(l,i,k));m={arrayValue:{values:P}}}else m=yp(l,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Ep(p,f),m=WP(c,o,p,f==="in"||f==="not-in");return He.create(u,f,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Qu extends Ku{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qu(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const c=i.getFlattenedFilters();for(const l of c)yy(o,l),o=Al(o,l)})(e._query,n),new rs(e.firestore,e.converter,Al(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ju extends _y{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ju(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new Y(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ji(i,o)})(e._query,this._field,this._direction);return new rs(e.firestore,e.converter,_S(e._query,n))}}function e0(t,e="asc"){const n=e,r=rc("orderBy",t);return Ju._create(r,n)}function yp(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new Y(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p_(e)&&n.indexOf("/")!==-1)throw new Y(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(De.fromString(n));if(!ne.isDocumentKey(r))throw new Y(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nd(t,new ne(r))}if(n instanceof ze)return Nd(t,n._key);throw new Y(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ha(n)}.`)}function Ep(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yy(t,e){const n=(function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Y(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function t0(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ei{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $r extends gy{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$r._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$r._jsonSchemaVersion="firestore/documentSnapshot/1.0",$r._jsonSchema={type:We("string",$r._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class Yo extends $r{data(e={}){return super.data(e)}}class Ss{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ei(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Yo(this._firestore,this._userDataWriter,r.key,r,new Ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new Yo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ei(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new Yo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ei(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:n0(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ss._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function n0(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:t})}}Ss._jsonSchemaVersion="firestore/querySnapshot/1.0",Ss._jsonSchema={type:We("string",Ss._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};function r0(t){return Ey(As(t.firestore,eo),[new bu(t._key,_n.none())])}function s0(t,e){const n=As(t.firestore,eo),r=ay(t),s=t0(t.converter,e),i=hy(t.firestore);return Ey(n,[HP(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then((()=>r))}function i0(t,...e){t=St(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||_p(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_p(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let i,o,c;if(t instanceof ze)o=As(t.firestore,eo),c=Au(t._key.path),i={next:u=>{e[r]&&e[r](o0(o,t,u))},error:e[r+1],complete:e[r+2]};else{const u=As(t,rs);o=As(u.firestore,eo),c=u._query;const f=new my(o);i={next:p=>{e[r]&&e[r](new Ss(o,f,u,p))},error:e[r+1],complete:e[r+2]},XP(t._query)}const l=cy(o);return OP(l,c,s,i)}function Ey(t,e){const n=cy(t);return xP(n,e)}function o0(t,e,n){const r=n.docs.get(e._key),s=new my(t);return new $r(t,s,e._key,r,new Ei(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){kb(js),Vs(new Gr("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new eo(new Ob(r.getProvider("auth-internal")),new Lb(o,r.getProvider("app-check-internal")),eS(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),dr(mp,gp,e),dr(mp,gp,"esm2020")})();const a0={apiKey:"AIzaSyC7_cH4FYnBwq4P9pV7uUplqOs2CTRxM5s",authDomain:"blog-test-f268a.firebaseapp.com",projectId:"blog-test-f268a",storageBucket:"blog-test-f268a.firebasestorage.app",messagingSenderId:"210834026579",appId:"1:210834026579:web:3eaf4bf286f6c18b4bd6a6"},vy=sg(a0),rr=Sb(vy),Gc=UP(vy),c0={class:"login-container"},l0={class:"login-card"},u0={key:0,class:"error-alert"},h0={class:"form-group"},f0={class:"form-group"},d0={class:"password-input-wrapper"},p0=["type"],m0={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},g0={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},_0=["disabled"],y0={class:"footer-text"},E0={__name:"loginview",setup(t){const e=iu(),n=Et(""),r=Et(""),s=Et(null),i=Et(!1),o=Et(!1),c=async()=>{if(s.value=null,!n.value||!r.value){s.value="Please fill in all fields";return}i.value=!0;try{const l=await pR(rr,n.value,r.value);console.log("Logged in:",l.user),e.push("/home")}catch(l){switch(console.error("Login error:",l),l.code){case"auth/user-not-found":case"auth/invalid-credential":s.value="This email is not registered or incorrect password.";break;case"auth/wrong-password":s.value="Incorrect password. Please try again";break;case"auth/invalid-email":s.value="Invalid email address.";break;case"auth/too-many-requests":s.value="Too many failed attempts. Please try again later.";break;default:s.value="Login failed. Please check your credentials"}}finally{i.value=!1}};return(l,u)=>{const f=cm("router-link");return ut(),bt("div",c0,[Q("div",l0,[u[9]||(u[9]=Q("h1",{class:"title"},"Welcome Back",-1)),u[10]||(u[10]=Q("p",{class:"subtitle"},"Please sign in to your account",-1)),Q("form",{onSubmit:Om(c,["prevent"]),class:"login-form"},[s.value?(ut(),bt("div",u0,un(s.value),1)):Ui("",!0),Q("div",h0,[u[3]||(u[3]=Q("label",{for:"email"},"Email",-1)),kn(Q("input",{type:"email",id:"email","onUpdate:modelValue":u[0]||(u[0]=p=>n.value=p),placeholder:"name@company.com",required:""},null,512),[[hn,n.value]])]),Q("div",f0,[u[6]||(u[6]=Q("label",{for:"password"},"Password",-1)),Q("div",d0,[kn(Q("input",{type:o.value?"text":"password",id:"password","onUpdate:modelValue":u[1]||(u[1]=p=>r.value=p),placeholder:"",required:""},null,8,p0),[[mT,r.value]]),Q("button",{type:"button",class:"toggle-password",onClick:u[2]||(u[2]=p=>o.value=!o.value),"aria-label":"Toggle password visibility"},[o.value?(ut(),bt("svg",g0,[...u[5]||(u[5]=[Q("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),Q("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(ut(),bt("svg",m0,[...u[4]||(u[4]=[Q("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),Q("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),Q("button",{type:"submit",class:"submit-btn",disabled:i.value},un(i.value?"Logging in...":"Sign In"),9,_0)],32),Q("p",y0,[u[8]||(u[8]=vs(" Don't have an account? ",-1)),It(f,{to:"/sinup"},{default:Yl(()=>[...u[7]||(u[7]=[vs("Signup",-1)])]),_:1})])])])}}},v0=La(E0,[["__scopeId","data-v-0c9d4fb3"]]),T0={class:"feed-container"},I0={class:"feed-content"},w0={class:"create-post-section"},A0={class:"create-post-card"},R0={class:"input-group"},b0={class:"input-group"},S0={class:"input-group"},C0={key:0,class:"loading-state"},P0={key:1,class:"posts-grid"},N0=["onClick"],k0={class:"card-content"},V0={class:"post-date"},D0={class:"post-title"},O0={class:"post-author"},x0={class:"post-summary"},M0={key:0,class:"code-block"},L0={__name:"homeviwe",setup(t){const e=iu(),n=Et({title:"",summary:"",codeSnippet:""}),r=Et([]),s=Et(!0);let i=null;Xl(()=>{const f=ZP(hp(Gc,"posts"),e0("createdAt","desc"));i=i0(f,p=>{r.value=p.docs.map(m=>{const v=m.data();return{id:m.id,...v,date:v.createdAt?v.createdAt.toDate().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Just now"}}),s.value=!1},p=>{console.error("Error fetching posts: ",p),s.value=!1})}),Zl(()=>{i&&i()});const o=()=>{console.log("logout"),e.push("/login")},c=()=>{console.log("signup"),e.push("/sinup")},l=async()=>{if(!(!n.value.title||!n.value.summary)){if(!rr.currentUser){alert("You must be logged in to publish.");return}try{await s0(hp(Gc,"posts"),{title:n.value.title,summary:n.value.summary,codeSnippet:n.value.codeSnippet,author:rr.currentUser.email.split("@")[0]||"User",authorId:rr.currentUser.uid,authorEmail:rr.currentUser.email,createdAt:JP()}),n.value.title="",n.value.summary="",n.value.codeSnippet=""}catch(f){console.error("Error adding document: ",f)}}},u=async f=>{try{await r0(ay(Gc,"posts",f))}catch(p){console.error("Error deleting document: ",p)}};return(f,p)=>(ut(),bt("div",T0,[Q("header",{class:"feed-header"},[Q("div",{class:"header-content"},[p[3]||(p[3]=Q("h1",{class:"logo"},"Batublog",-1)),Q("div",{class:"header-actions"},[Q("button",{onClick:c,class:"signup-btn"},"Signup"),Q("button",{onClick:o,class:"logout-btn"},"Login")])])]),Q("main",I0,[Q("section",w0,[Q("div",A0,[p[4]||(p[4]=Q("h2",{class:"section-title"},"Create Post",-1)),Q("div",R0,[kn(Q("input",{"onUpdate:modelValue":p[0]||(p[0]=m=>n.value.title=m),type:"text",placeholder:"Post Title",class:"post-input"},null,512),[[hn,n.value.title]])]),Q("div",b0,[kn(Q("textarea",{"onUpdate:modelValue":p[1]||(p[1]=m=>n.value.summary=m),placeholder:"What's on your mind?",class:"post-input post-textarea"},null,512),[[hn,n.value.summary]])]),Q("div",S0,[kn(Q("textarea",{"onUpdate:modelValue":p[2]||(p[2]=m=>n.value.codeSnippet=m),placeholder:"Code Snippets (Optional)",class:"post-input code-input"},null,512),[[hn,n.value.codeSnippet]])]),Q("div",{class:"action-row"},[Q("button",{onClick:l,class:"publish-btn"},"Publish")])])]),p[7]||(p[7]=Q("h2",{class:"section-title"},"Latest Posts",-1)),s.value?(ut(),bt("div",C0,"Loading posts...")):(ut(),bt("div",P0,[(ut(!0),bt(Mt,null,ZE(r.value,m=>(ut(),bt("article",{key:m.id,class:"post-card"},[ur(rr).currentUser&&m.authorId===ur(rr).currentUser.uid?(ut(),bt("button",{key:0,onClick:v=>u(m.id),class:"delete-btn","aria-label":"Delete post"},[...p[5]||(p[5]=[Q("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Q("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,N0)):Ui("",!0),Q("div",k0,[Q("span",V0,un(m.date),1),Q("h3",D0,un(m.title),1),Q("p",O0,"By "+un(m.author),1),Q("p",x0,un(m.summary),1),m.codeSnippet?(ut(),bt("div",M0,[Q("pre",null,[Q("code",null,un(m.codeSnippet),1)])])):Ui("",!0),p[6]||(p[6]=Q("button",{class:"read-more-btn"},"Read More",-1))])]))),128))]))])]))}},F0=La(L0,[["__scopeId","data-v-d8dd48f4"]]),U0={class:"signup-container"},B0={class:"signup-card"},j0={key:0,class:"error-alert"},q0={class:"form-group"},$0={class:"form-group"},H0={class:"form-group"},W0={class:"form-group"},G0=["disabled"],K0={key:0,class:"spinner"},z0={__name:"sinupview",setup(t){const e=iu(),n=Et(""),r=Et(""),s=Et(""),i=Et(""),o=Et(null),c=Et(!1),l=async()=>{if(o.value=null,s.value!==i.value){o.value="Passwords do not match.";return}if(s.value.length<6){o.value="Password must be at least 6 characters long.";return}c.value=!0;try{const u=await dR(rr,r.value,s.value);console.log("User created:",u.user),e.push("/home")}catch(u){switch(console.error("Full Firebase Error:",u),u.code){case"auth/email-already-in-use":o.value="This email is already registered.";break;case"auth/invalid-email":o.value="The email address is badly formatted.";break;case"auth/weak-password":o.value="The password is too weak.";break;case"auth/network-request-failed":o.value="Network error. Please check your internet.";break;default:o.value="An unexpected error occurred. Please try again."}}finally{c.value=!1}};return(u,f)=>(ut(),bt("div",U0,[Q("div",B0,[f[9]||(f[9]=Q("h1",{class:"title"},"Create Account",-1)),f[10]||(f[10]=Q("p",{class:"subtitle"},"Join our community today",-1)),Q("form",{onSubmit:Om(l,["prevent"]),class:"signup-form"},[It(Wv,{name:"fade"},{default:Yl(()=>[o.value?(ut(),bt("div",j0,[f[4]||(f[4]=Q("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"error-icon"},[Q("circle",{cx:"12",cy:"12",r:"10"}),Q("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),Q("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),vs(" "+un(o.value),1)])):Ui("",!0)]),_:1}),Q("div",q0,[f[5]||(f[5]=Q("label",{for:"name"},"Full Name",-1)),kn(Q("input",{type:"text",id:"name","onUpdate:modelValue":f[0]||(f[0]=p=>n.value=p),placeholder:"John Doe",required:""},null,512),[[hn,n.value]])]),Q("div",$0,[f[6]||(f[6]=Q("label",{for:"email"},"Email",-1)),kn(Q("input",{type:"email",id:"email","onUpdate:modelValue":f[1]||(f[1]=p=>r.value=p),placeholder:"name@company.com",required:""},null,512),[[hn,r.value]])]),Q("div",H0,[f[7]||(f[7]=Q("label",{for:"password"},"Password",-1)),kn(Q("input",{type:"password",id:"password","onUpdate:modelValue":f[2]||(f[2]=p=>s.value=p),placeholder:"",required:""},null,512),[[hn,s.value]])]),Q("div",W0,[f[8]||(f[8]=Q("label",{for:"confirmPassword"},"Confirm Password",-1)),kn(Q("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":f[3]||(f[3]=p=>i.value=p),placeholder:"",required:""},null,512),[[hn,i.value]])]),Q("button",{type:"submit",class:"submit-btn",disabled:c.value},[c.value?(ut(),bt("span",K0)):Ui("",!0),vs(" "+un(c.value?"Creating Account...":"Sign Up"),1)],8,G0)],32),f[11]||(f[11]=Q("p",{class:"footer-text"},[vs("Already have an account? "),Q("a",{href:"/login"},"Log in")],-1))])]))}},Q0=La(z0,[["__scopeId","data-v-47fb25cc"]]),J0=VI({history:uI("/"),routes:[{name:"login",path:"/login",component:v0,meta:{requiresAuth:!1}},{name:"home",path:"/home",component:F0,meta:{requiresAuth:!0}},{name:"sinup",path:"/sinup",component:Q0,meta:{requiresAuth:!1}}]}),Ty=TT(bT);Ty.use(J0);Ty.mount("#app");
